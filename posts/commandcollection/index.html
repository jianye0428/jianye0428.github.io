<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>CMake 常用命令查询 - yejian's blog</title><meta name=author content="Jian YE">
<meta name=author-link content="https://github.com/jianye0428"><meta name=description content="cmake常用命令的一些整理 CMake 是什么我就不用再多说什么了，相信大家都有接触才会看一篇文章。对于不太熟悉的开发人员可以把这篇文章当个查找手册。 1.CMake语法 1.1 指定cmake的最小版本 1 cmake_minimum_required(version 版本号) 例如： 1 cmake_minimum_required(version 2.8) 1.2 定义工程名称 1 2 #定义工程名称 project(项目名称) 例如： 1 project(MyTest) 1.3 显示定义变量 1 set(var [value]) 例如"><meta name=keywords content="CMake"><meta itemprop=name content="CMake 常用命令查询"><meta itemprop=description content="cmake常用命令的一些整理 CMake 是什么我就不用再多说什么了，相信大家都有接触才会看一篇文章。对于不太熟悉的开发人员可以把这篇文章当个查找手册。 1.CMake语法 1.1 指定cmake的最小版本 1 cmake_minimum_required(version 版本号) 例如： 1 cmake_minimum_required(version 2.8) 1.2 定义工程名称 1 2 #定义工程名称 project(项目名称) 例如： 1 project(MyTest) 1.3 显示定义变量 1 set(var [value]) 例如"><meta itemprop=datePublished content="2024-01-24T07:49:02+08:00"><meta itemprop=dateModified content="2024-02-02T16:30:42+08:00"><meta itemprop=wordCount content="7700"><meta itemprop=image content="https://jianye0428.github.io/images/favicon/jian_icon.png"><meta itemprop=keywords content="CMake,"><meta property="og:title" content="CMake 常用命令查询"><meta property="og:description" content="cmake常用命令的一些整理 CMake 是什么我就不用再多说什么了，相信大家都有接触才会看一篇文章。对于不太熟悉的开发人员可以把这篇文章当个查找手册。 1.CMake语法 1.1 指定cmake的最小版本 1 cmake_minimum_required(version 版本号) 例如： 1 cmake_minimum_required(version 2.8) 1.2 定义工程名称 1 2 #定义工程名称 project(项目名称) 例如： 1 project(MyTest) 1.3 显示定义变量 1 set(var [value]) 例如"><meta property="og:type" content="article"><meta property="og:url" content="https://jianye0428.github.io/posts/commandcollection/"><meta property="og:image" content="https://jianye0428.github.io/images/favicon/jian_icon.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-24T07:49:02+08:00"><meta property="article:modified_time" content="2024-02-02T16:30:42+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jianye0428.github.io/images/favicon/jian_icon.png"><meta name=twitter:title content="CMake 常用命令查询"><meta name=twitter:description content="cmake常用命令的一些整理 CMake 是什么我就不用再多说什么了，相信大家都有接触才会看一篇文章。对于不太熟悉的开发人员可以把这篇文章当个查找手册。 1.CMake语法 1.1 指定cmake的最小版本 1 cmake_minimum_required(version 版本号) 例如： 1 cmake_minimum_required(version 2.8) 1.2 定义工程名称 1 2 #定义工程名称 project(项目名称) 例如： 1 project(MyTest) 1.3 显示定义变量 1 set(var [value]) 例如"><meta name=application-name content="菠菜阿九时代峰峻啊；数量可根据；"><meta name=apple-mobile-web-app-title content="菠菜阿九时代峰峻啊；数量可根据；"><meta name=theme-color data-light=#ffffff data-dark=#252627 content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/png href=/jian_icon.png><link rel=icon type=image/png sizes=32x32 href=/jian_icon.png><link rel=icon type=image/png sizes=16x16 href=/jian_icon.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://jianye0428.github.io/posts/commandcollection/><link rel=prev href=https://jianye0428.github.io/posts/make_install/><link rel=next href=https://jianye0428.github.io/posts/cmake_note_10/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"CMake 常用命令查询","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/jianye0428.github.io\/posts\/commandcollection\/"},"image":["https:\/\/jianye0428.github.io\/images\/favicon\/jian_icon.png"],"genre":"posts","keywords":"CMake","wordcount":7700,"url":"https:\/\/jianye0428.github.io\/posts\/commandcollection\/","datePublished":"2024-01-24T07:49:02+08:00","dateModified":"2024-02-02T16:30:42+08:00","publisher":{"@type":"Organization","name":"Jian YE","logo":"https:\/\/jianye0428.github.io\/images\/favicon\/jian_icon.png"},"author":{"@type":"Person","name":"Jian YE"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=wide><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title="yejian's blog"><img loading=lazy src=/images/favicon/jian_icon.png srcset="/images/favicon/jian_icon.png, /images/favicon/jian_icon.png 1.5x, /images/favicon/jian_icon.png 2x" sizes=auto data-title="yejian's blog" data-alt="yejian's blog" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Jian's Blog</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 所有文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/friends/ title=友情链接><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/guestbook/><i class="fa-solid fa-comments fa-fw fa-sm" aria-hidden=true></i> 留言</a></li><li class="menu-item has-children"><a class=menu-link href=/about/><i class="fa-solid fa-user-tie fa-fw fa-sm" aria-hidden=true></i> 关于</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/projects/ title=项目><i class="fa-solid fa-laptop-code fa-fw fa-sm" aria-hidden=true></i> 我的项目</a></li></ul></li><li class=menu-item><a class=menu-link href=/pilot/><i class="fa-solid fa-user-tie fa-fw fa-sm" aria-hidden=true></i> 导航</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="yejian's blog"><img loading=lazy src=/images/favicon/jian_icon.png srcset="/images/favicon/jian_icon.png, /images/favicon/jian_icon.png 1.5x, /images/favicon/jian_icon.png 2x" sizes=auto data-title=/images/favicon/jian_icon.png data-alt=/images/favicon/jian_icon.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Jian's Blog</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 所有文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/friends/ title=友情链接><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/guestbook/><i class="fa-solid fa-comments fa-fw fa-sm" aria-hidden=true></i> 留言</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/about/><i class="fa-solid fa-user-tie fa-fw fa-sm" aria-hidden=true></i> 关于</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/projects/ title=项目><i class="fa-solid fa-laptop-code fa-fw fa-sm" aria-hidden=true></i> 我的项目</a></li></ul></li><li class=menu-item><a class=menu-link href=/pilot/><i class="fa-solid fa-user-tie fa-fw fa-sm" aria-hidden=true></i> 导航</a></li><li class="menu-item text-center"><a class=menu-link href=https://github.com/jianye0428/ title=GitHub rel="noopener noreferrer" target=_blank><i class='fa-brands fa-github fa-fw' aria-hidden=true></i></a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class="container container-reverse"><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>CMake 常用命令查询</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/jianye0428 title=作者 target=_blank rel="external nofollow noopener noreferrer author" class=author><img loading=lazy src="https://gravatar.loli.net/avatar/75a41975a5281767bf6bdba838de4238?s=32&amp;d=mp" srcset="https://gravatar.loli.net/avatar/75a41975a5281767bf6bdba838de4238?s=32&amp;d=mp, https://gravatar.loli.net/avatar/75a41975a5281767bf6bdba838de4238?s=32&amp;d=mp 1.5x, https://gravatar.loli.net/avatar/75a41975a5281767bf6bdba838de4238?s=32&amp;d=mp 2x" sizes=auto data-title="Jian YE" data-alt="Jian YE" class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;Jian YE</a></span>
<span class=post-category>收录于 <a href=/categories/c++/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> C++</a></span></div><div class=post-meta-line><span title="发布于 2024-01-24 07:49:02"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2024-01-24>2024-01-24</time></span>&nbsp;<span title="更新于 2024-02-02 16:30:42"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2024-02-02>2024-02-02</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 7700 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 16 分钟</span>&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title="CMake 常用命令查询">
<i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_page_pv>-</span>&nbsp;次阅读
</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1cmake语法>1.CMake语法</a><ul><li><a href=#11-指定cmake的最小版本>1.1 指定cmake的最小版本</a></li><li><a href=#12-定义工程名称>1.2 定义工程名称</a></li><li><a href=#13-显示定义变量>1.3 显示定义变量</a></li><li><a href=#14-设置编译类型>1.4 设置编译类型</a></li><li><a href=#15-指定静态库或者动态库编译输出目录>1.5 指定静态库或者动态库编译输出目录</a></li><li><a href=#16-指定可执行程序编译输出目录>1.6 指定可执行程序编译输出目录</a></li><li><a href=#17-设置链接库搜索目录>1.7 设置链接库搜索目录</a></li><li><a href=#18-设置包含目录>1.8 设置包含目录</a></li><li><a href=#19-设置宏定义>1.9 设置宏定义</a></li><li><a href=#110-链接静态库>1.10 链接静态库</a></li><li><a href=#111-链接动态库>1.11 链接动态库</a></li><li><a href=#112-link_libraries-和-target_link_libraries-区别>1.12 link_libraries 和 target_link_libraries 区别</a></li><li><a href=#113-file语法>1.13 file语法</a></li><li><a href=#1131-将文件夹所有的类型的文件添加到文件列表>1.13.1 将文件夹所有的类型的文件添加到文件列表</a></li><li><a href=#1132-递归搜索该文件夹将文件夹下包含子目录符合类型的文件添加到文件列表>1.13.2 递归搜索该文件夹，将文件夹下（包含子目录）符合类型的文件添加到文件列表</a></li><li><a href=#114-list操作>1.14 List操作</a></li><li><a href=#1141-list移除指定项>1.14.1 List移除指定项</a></li><li><a href=#1142-将两个list链接起来>1.14.2 将两个List链接起来</a></li><li><a href=#115-添加子文件夹>1.15 添加子文件夹</a></li><li><a href=#116-message输出消息机制>1.16 message输出消息机制</a></li><li><a href=#117-安装>1.17 安装</a></li><li><a href=#1171-目标文件安装>1.17.1 目标文件安装</a></li><li><a href=#1172-文件夹安装>1.17.2 文件夹安装</a></li><li><a href=#118-设置编译选项>1.18 设置编译选项</a></li><li><a href=#119-预定义变量>1.19 预定义变量</a></li><li><a href=#1191-基本变量>1.19.1 基本变量</a></li><li><a href=#1192-操作系统变量>1.19.2 操作系统变量</a></li><li><a href=#1193-开关选项>1.19.3 开关选项</a></li><li><a href=#1194-环境变量>1.19.4 环境变量</a></li><li><a href=#1195-cmake_include_current_dir>1.19.5 CMAKE_INCLUDE_CURRENT_DIR</a></li><li><a href=#120-条件判断>1.20 条件判断</a></li><li><a href=#1201-逻辑判断和比较>1.20.1 逻辑判断和比较</a></li><li><a href=#1202-数字比较>1.20.2 数字比较</a></li><li><a href=#1203-字母表顺序比较>1.20.3 字母表顺序比较</a></li><li><a href=#121-循环>1.21 循环</a></li><li><a href=#1211-foreach>1.21.1 foreach</a></li><li><a href=#1212-while>1.21.2 while</a></li><li><a href=#122-自动检测编译器是否支持c11>1.22 自动检测编译器是否支持C++11</a></li><li><a href=#123-cmake生成vs解决方案将项目放置在设定文件夹下>1.23 CMake生成VS解决方案将项目放置在设定文件夹下</a></li><li><a href=#第一步>第一步：</a></li><li><a href=#第二步在生成编译目标的语法之后如>第二步：在生成编译目标的语法之后，如：</a></li></ul></li><li><a href=#2-错误解决方案>2 错误解决方案</a><ul><li><a href=#21-cannot-specify-link-libraries-for-target-liblinuxlibmydlla-which>2.1 Cannot specify link libraries for target “/…/…/lib/linux/libMyDll.a” which</a></li><li><a href=#22-警告检测到时钟错误您的创建可能是不完整的>2.2 警告：检测到时钟错误。您的创建可能是不完整的。</a></li></ul></li><li><a href=#3-参考>3 参考</a></li></ul></nav></div></div><div class=content id=content data-end-flag=（完）><h1 id=cmake常用命令的一些整理>cmake常用命令的一些整理</h1><p>CMake 是什么我就不用再多说什么了，相信大家都有接触才会看一篇文章。对于不太熟悉的开发人员可以把这篇文章当个查找手册。</p><h2 id=1cmake语法>1.CMake语法</h2><h3 id=11-指定cmake的最小版本>1.1 指定cmake的最小版本</h3><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>cmake_minimum_required</span><span class=p>(</span><span class=n>version</span> <span class=err>版本号</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>例如：</p><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>cmake_minimum_required</span><span class=p>(</span><span class=n>version</span> <span class=mf>2.8</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=12-定义工程名称>1.2 定义工程名称</h3><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#定义工程名称
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>project</span><span class=p>(</span><span class=err>项目名称</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>例如：</p><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>project</span><span class=p>(</span><span class=n>MyTest</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=13-显示定义变量>1.3 显示定义变量</h3><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>var</span> <span class=p>[</span><span class=n>value</span><span class=p>])</span></span></span></code></pre></td></tr></table></div></div><p>例如：</p><div class=highlight id=id-6><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp># 第一种用法，生成代码文件列表
</span></span></span><span class=line><span class=cl><span class=cp>#先直接设置SRC_LIST的值
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>set</span><span class=p>(</span><span class=n>SRC_LIST</span> <span class=n>add</span><span class=p>.</span><span class=n>h</span> <span class=n>add</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=cp>#然后再在SRC_LIST中追加main.cpp
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>set</span><span class=p>(</span><span class=n>SRC_LIST</span> <span class=err>$</span><span class=p>{</span><span class=n>SRC_LIST</span><span class=p>}</span> <span class=n>main</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp># 第二中用法，设置库生成目录或者可执行文件生成目录
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>set</span><span class=p>(</span> <span class=n>LIBRARY_OUTPUT_PATH</span> <span class=err>$</span><span class=p>{</span><span class=n>PROJECT_SOURCE_DIR</span><span class=p>}</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>linux</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span> <span class=n>EXECUTABLE_OUTPUT_PATH</span> <span class=err>$</span><span class=p>{</span><span class=n>PROJECT_SOURCE_DIR</span><span class=p>}</span><span class=o>/</span><span class=n>bin</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=14-设置编译类型>1.4 设置编译类型</h3><div class=highlight id=id-7><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp># 编译静态库
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>add_library</span><span class=p>(</span><span class=err>库名称</span> <span class=n>STATIC</span> <span class=err>代码文件名称</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp># 编译动态库
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>add_library</span><span class=p>(</span><span class=err>库名称</span> <span class=n>SHARED</span> <span class=err>代码文件名称</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp># 编译可执行程序
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>add_executable</span><span class=p>(</span><span class=err>可执行程序名</span> <span class=err>代码文件名称</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>例如：</p><div class=highlight id=id-8><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp># 编译静态库
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>add_library</span><span class=p>(</span><span class=n>add</span> <span class=n>STATIC</span> <span class=n>add</span><span class=p>.</span><span class=n>h</span> <span class=n>add</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>add_library</span><span class=p>(</span><span class=n>add</span> <span class=n>STATIC</span> <span class=err>$</span><span class=p>{</span><span class=n>ADD_SRC</span><span class=p>}</span> <span class=err>$</span><span class=p>{</span><span class=n>ADD_HDR</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp># 编译动态库
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>add_library</span><span class=p>(</span><span class=n>add</span>  <span class=n>SHARED</span> <span class=n>add</span><span class=p>.</span><span class=n>h</span> <span class=n>add</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>add_library</span><span class=p>(</span><span class=n>add</span> <span class=n>SHARED</span>  <span class=err>$</span><span class=p>{</span><span class=n>ADD_SRC</span><span class=p>}</span> <span class=err>$</span><span class=p>{</span><span class=n>ADD_HDR</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp># 编译可执行程序
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>add_executable</span><span class=p>(</span><span class=n>main</span> <span class=n>add</span><span class=p>.</span><span class=n>h</span> <span class=n>add</span><span class=p>.</span><span class=n>cpp</span> <span class=n>mai</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>add_executable</span><span class=p>(</span><span class=n>main</span> <span class=err>$</span><span class=p>{</span><span class=n>MAIN_SRC</span><span class=p>}</span> <span class=err>$</span><span class=p>{</span><span class=n>MAIN_HDR</span><span class=p>})</span></span></span></code></pre></td></tr></table></div></div><h3 id=15-指定静态库或者动态库编译输出目录>1.5 指定静态库或者动态库编译输出目录</h3><p>例如将当前编译的静态库或者动态库输出到当前项目文件夹lib子目录下</p><div class=highlight id=id-9><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>LIBRARY_OUTPUT_PATH</span>  <span class=err>$</span><span class=p>{</span><span class=n>PROJECT_SOURCE_DIR</span><span class=p>}</span><span class=o>/</span><span class=n>lib</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=16-指定可执行程序编译输出目录>1.6 指定可执行程序编译输出目录</h3><p>例如将当前可执行程序输出到当前项目文件夹的bin子目录下</p><div class=highlight id=id-10><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#设定可执行二进制文件的目录
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>set</span><span class=p>(</span> <span class=n>EXECUTABLE_OUTPUT_PATH</span> <span class=err>$</span><span class=p>{</span><span class=n>PROJECT_SOURCE_DIR</span><span class=p>}</span><span class=o>/</span><span class=n>bin</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=17-设置链接库搜索目录>1.7 设置链接库搜索目录</h3><p>例如将链接库搜索目录设置为当前项目文件夹下lib/linux文件夹</p><div class=highlight id=id-11><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>link_directories</span><span class=p>(</span> <span class=err>$</span><span class=p>{</span><span class=n>PROJECT_SOURCE_DIR</span><span class=p>}</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>linux</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=18-设置包含目录>1.8 设置包含目录</h3><p>例如将包含目录设置为当前项目文件夹下include文件夹</p><div class=highlight id=id-12><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>include_directories</span><span class=p>(</span><span class=err>$</span><span class=p>{</span><span class=n>PROJECT_SOURCE_DIR</span><span class=p>}</span><span class=o>/</span><span class=n>include</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=19-设置宏定义>1.9 设置宏定义</h3><div class=highlight id=id-13><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#预定义宏
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>add_definitions</span><span class=p>(</span><span class=o>-</span><span class=n>D宏名称</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>例如：</p><div class=highlight id=id-14><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>add_definitions</span><span class=p>(</span><span class=o>-</span><span class=n>DWINDOWS</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>add_definitions</span><span class=p>(</span><span class=o>-</span><span class=n>DLINUX</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=110-链接静态库>1.10 链接静态库</h3><div class=highlight id=id-15><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>link_libraries</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=err>静态库</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=err>静态库</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=err>静态库</span><span class=mi>3</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>注意，link_libraries中的静态库为全路径，常与1.7 link_directories 搭配使用，例如：</p><p>lib1.a lib2.a在目录${PROJECT_SOURCE_DIR}/lib/linux下，则先设置链接目录，再链接相应的库</p><div class=highlight id=id-16><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#设置链接目录
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>link_directories</span><span class=p>(</span> <span class=err>$</span><span class=p>{</span><span class=n>PROJECT_SOURCE_DIR</span><span class=p>}</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>linux</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>link_libraries</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>lib1</span><span class=p>.</span><span class=n>a</span>
</span></span><span class=line><span class=cl>        <span class=n>lib2</span><span class=p>.</span><span class=n>a</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=111-链接动态库>1.11 链接动态库</h3><div class=highlight id=id-17><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>target_link_libraries</span><span class=p>(</span><span class=err>所需生成的文件名称</span> <span class=err>所需链接的动态库名称</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>例如</p><div class=highlight id=id-18><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>target_link_libraries</span><span class=p>(</span><span class=n>main</span> <span class=n>dl</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=112-link_libraries-和-target_link_libraries-区别>1.12 link_libraries 和 target_link_libraries 区别</h3><p>在cmake语法中，link_libraries和target_link_libraries是很重要的两个链接库的方式，虽然写法上很相似，但是功能上有很大区别：</p><div class=highlight id=id-19><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=n>link_libraries用在add_executable之前</span><span class=err>，</span><span class=n>target_link_libraries用在add_executable之后</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=n>link_libraries用来链接静态库</span><span class=err>，</span><span class=n>target_link_libraries用来链接导入库</span><span class=err>，即按照</span><span class=n>header</span> <span class=n>file</span> <span class=o>+</span> <span class=p>.</span><span class=n>lib</span> <span class=o>+</span> <span class=p>.</span><span class=n>dll方式隐式调用动态库的</span><span class=p>.</span><span class=n>lib库</span></span></span></code></pre></td></tr></table></div></div><h3 id=113-file语法>1.13 file语法</h3><h3 id=1131-将文件夹所有的类型的文件添加到文件列表>1.13.1 将文件夹所有的类型的文件添加到文件列表</h3><p>例如将当前文件夹下所有.cpp文件的文件名加入到MAIN_SRC中，将当前文件夹下所有.h加入到MAIN_HDR中。</p><div class=highlight id=id-20><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>file</span><span class=p>(</span><span class=n>GLOB</span> <span class=n>MAIN_SRC</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_CURRENT_SOURCE_DIR</span><span class=p>}</span><span class=cm>/*.cpp)
</span></span></span><span class=line><span class=cl><span class=cm>file(GLOB MAIN_HDR ${CMAKE_CURRENT_SOURCE_DIR}/*.h)
</span></span></span></code></pre></td></tr></table></div></div><p>例如将当前文件夹子目录src文件夹下所有.cpp文件的文件名加入到MAIN_SRC中，将当前文件夹子目录src文件夹下所有.h加入到MAIN_HDR中。</p><div class=highlight id=id-21><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>file</span><span class=p>(</span><span class=n>GLOB</span> <span class=n>MAIN_SRC</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_CURRENT_SOURCE_DIR</span><span class=p>}</span><span class=o>/</span><span class=n>src</span><span class=cm>/*.cpp)
</span></span></span><span class=line><span class=cl><span class=cm>file(GLOB MAIN_HDR ${CMAKE_CURRENT_SOURCE_DIR}/src/*.h)
</span></span></span></code></pre></td></tr></table></div></div><h3 id=1132-递归搜索该文件夹将文件夹下包含子目录符合类型的文件添加到文件列表>1.13.2 递归搜索该文件夹，将文件夹下（包含子目录）符合类型的文件添加到文件列表</h3><p>例如将当前文件夹下（包括子目录下）所有.cpp文件的文件名加入到MAIN_SRC中，所有.h加入到MAIN_HDR中</p><div class=highlight id=id-22><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>file</span><span class=p>(</span><span class=n>GLOB_RECURSE</span> <span class=n>MAIN_SRC</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_CURRENT_SOURCE_DIR</span><span class=p>}</span><span class=cm>/*.cpp)
</span></span></span><span class=line><span class=cl><span class=cm>file(GLOB_RECURSE MAIN_HDR ${CMAKE_CURRENT_SOURCE_DIR}/*.h)
</span></span></span></code></pre></td></tr></table></div></div><h3 id=114-list操作>1.14 List操作</h3><p>常见的List操作包括：</p><div class=highlight id=id-23><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>list</span><span class=p>(</span><span class=n>LENGTH</span> <span class=o>&lt;</span><span class=n>list</span><span class=o>&gt;</span> <span class=o>&lt;</span><span class=n>output</span> <span class=n>variable</span><span class=o>&gt;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>list</span><span class=p>(</span><span class=n>GET</span> <span class=o>&lt;</span><span class=n>list</span><span class=o>&gt;</span> <span class=o>&lt;</span><span class=n>element</span> <span class=n>index</span><span class=o>&gt;</span> <span class=p>[</span><span class=o>&lt;</span><span class=n>element</span> <span class=n>index</span><span class=o>&gt;</span> <span class=p>...]</span>
</span></span><span class=line><span class=cl>   <span class=o>&lt;</span><span class=n>output</span> <span class=n>variable</span><span class=o>&gt;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>list</span><span class=p>(</span><span class=n>APPEND</span> <span class=o>&lt;</span><span class=n>list</span><span class=o>&gt;</span> <span class=p>[</span><span class=o>&lt;</span><span class=n>element</span><span class=o>&gt;</span> <span class=p>...])</span>
</span></span><span class=line><span class=cl><span class=n>list</span><span class=p>(</span><span class=n>FIND</span> <span class=o>&lt;</span><span class=n>list</span><span class=o>&gt;</span> <span class=o>&lt;</span><span class=n>value</span><span class=o>&gt;</span> <span class=o>&lt;</span><span class=n>output</span> <span class=n>variable</span><span class=o>&gt;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>list</span><span class=p>(</span><span class=n>INSERT</span> <span class=o>&lt;</span><span class=n>list</span><span class=o>&gt;</span> <span class=o>&lt;</span><span class=n>element_index</span><span class=o>&gt;</span> <span class=o>&lt;</span><span class=n>element</span><span class=o>&gt;</span> <span class=p>[</span><span class=o>&lt;</span><span class=n>element</span><span class=o>&gt;</span> <span class=p>...])</span>
</span></span><span class=line><span class=cl><span class=n>list</span><span class=p>(</span><span class=n>REMOVE_ITEM</span> <span class=o>&lt;</span><span class=n>list</span><span class=o>&gt;</span> <span class=o>&lt;</span><span class=n>value</span><span class=o>&gt;</span> <span class=p>[</span><span class=o>&lt;</span><span class=n>value</span><span class=o>&gt;</span> <span class=p>...])</span>
</span></span><span class=line><span class=cl><span class=n>list</span><span class=p>(</span><span class=n>REMOVE_AT</span> <span class=o>&lt;</span><span class=n>list</span><span class=o>&gt;</span> <span class=o>&lt;</span><span class=n>index</span><span class=o>&gt;</span> <span class=p>[</span><span class=o>&lt;</span><span class=n>index</span><span class=o>&gt;</span> <span class=p>...])</span>
</span></span><span class=line><span class=cl><span class=n>list</span><span class=p>(</span><span class=n>REMOVE_DUPLICATES</span> <span class=o>&lt;</span><span class=n>list</span><span class=o>&gt;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>list</span><span class=p>(</span><span class=n>REVERSE</span> <span class=o>&lt;</span><span class=n>list</span><span class=o>&gt;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>list</span><span class=p>(</span><span class=n>SORT</span> <span class=o>&lt;</span><span class=n>list</span><span class=o>&gt;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=1141-list移除指定项>1.14.1 List移除指定项</h3><p>例如从MAIN_SRC移除指定项</p><div class=highlight id=id-24><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>list</span><span class=p>(</span><span class=n>REMOVE_ITEM</span> <span class=n>MAIN_SRC</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_CURRENT_SOURCE_DIR</span><span class=p>}</span><span class=o>/</span><span class=n>add</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=1142-将两个list链接起来>1.14.2 将两个List链接起来</h3><div class=highlight id=id-25><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp># 搜索当前目录
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>file</span><span class=p>(</span><span class=n>GLOB</span>  <span class=n>MAIN_SRC</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_CURRENT_SOURCE_DIR</span><span class=p>}</span><span class=cm>/*.cpp)
</span></span></span><span class=line><span class=cl><span class=cm>file(GLOB  MAIN_HDR ${CMAKE_CURRENT_SOURCE_DIR}/*.h)
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm># 递归搜索当前目录下src子目录
</span></span></span><span class=line><span class=cl><span class=cm>file(GLOB_RECURSE MAIN_SRC_ELSE  ${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp)
</span></span></span><span class=line><span class=cl><span class=cm>file(GLOB_RECURSE MAIN_HDR_ELSE  ${CMAKE_CURRENT_SOURCE_DIR}/src/*.h)
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm># 将MAIN_SRC_ELSE中的值添加到MAIN_SRC
</span></span></span><span class=line><span class=cl><span class=cm># 将MAIN_HDR_ELSE中的值添加到MAIN_HDR
</span></span></span><span class=line><span class=cl><span class=cm>list(APPEND MAIN_SRC ${MAIN_SRC_ELSE})
</span></span></span><span class=line><span class=cl><span class=cm>list(APPEND MAIN_HDR ${MAIN_HDR_ELSE})
</span></span></span></code></pre></td></tr></table></div></div><h3 id=115-添加子文件夹>1.15 添加子文件夹</h3><p>例如</p><div class=highlight id=id-26><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>add_subdirectory</span><span class=p>(</span><span class=n>src</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>该语句会在执行完当前文件夹CMakeLists.txt之后执行src子目录下的CMakeLists.txt</p><h3 id=116-message输出消息机制>1.16 message输出消息机制</h3><p>输出正常：</p><div class=highlight id=id-27><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=s>&#34;Enter cmake ${CMAKE_CURRENT_LIST_DIR}&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>输出警告</p><div class=highlight id=id-28><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>message</span><span class=p>(</span><span class=n>WARNING</span> <span class=s>&#34;Enter cmake ${CMAKE_CURRENT_LIST_DIR}&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>输出错误：</p><div class=highlight id=id-29><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>message</span><span class=p>(</span><span class=n>FATAL_ERROR</span> <span class=s>&#34;Enter cmake ${CMAKE_CURRENT_LIST_DIR}&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=117-安装>1.17 安装</h3><p>install 指令用于定义安装规则，安装的内容包括二进制可执行文件、动态库、静态库以及文件、目录、脚本等。</p><h3 id=1171-目标文件安装>1.17.1 目标文件安装</h3><p>例如：</p><div class=highlight id=id-30><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>install</span><span class=p>(</span><span class=n>TARGETS</span> <span class=n>util</span>
</span></span><span class=line><span class=cl>  <span class=n>RUNTIME</span> <span class=n>DESTINATION</span> <span class=n>bin</span>
</span></span><span class=line><span class=cl>  <span class=n>LIBRARY</span> <span class=n>DESTINATION</span> <span class=n>lib</span>
</span></span><span class=line><span class=cl>  <span class=n>ARCHIVE</span> <span class=n>DESTINATION</span> <span class=n>lib</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>ARCHIVE指静态库，LIBRARY指动态库，RUNTIME指可执行目标二进制，上述示例的意思是：</p><p>如果目标util是可执行二进制目标，则安装到${CMAKE_INSTALL_PREFIX}/bin目录 如果目标util是静态库，则安装到安装到${CMAKE_INSTALL_PREFIX}/lib目录 如果目标util是动态库，则安装到安装到${CMAKE_INSTALL_PREFIX}/lib目录</p><h3 id=1172-文件夹安装>1.17.2 文件夹安装</h3><div class=highlight id=id-31><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>install</span><span class=p>(</span><span class=n>DIRECTORY</span> <span class=n>include</span><span class=o>/</span> <span class=n>DESTINATION</span> <span class=n>include</span><span class=o>/</span><span class=n>util</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>这个语句的意思是将include/目录安装到include/util目录</p><h3 id=118-设置编译选项>1.18 设置编译选项</h3><p>设置编译选项可以通过add_compile_options命令，也可以通过set命令修改CMAKE_CXX_FLAGS或CMAKE_C_FLAGS。 方式1</p><div class=highlight id=id-32><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>set</span><span class=p>(</span> <span class=n>CMAKE_CXX_FLAGS</span> <span class=s>&#34;${CMAKE_CXX_FLAGS} -std=c++11 -march=native -O3 -frtti -fpermissive -fexceptions -pthread&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>方式2</p><div class=highlight id=id-33><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>add_compile_options</span><span class=p>(</span><span class=o>-</span><span class=n>march</span><span class=o>=</span><span class=n>native</span> <span class=o>-</span><span class=n>O3</span> <span class=o>-</span><span class=n>fexceptions</span> <span class=o>-</span><span class=n>pthread</span> <span class=o>-</span><span class=n>fPIC</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>这两种方式的区别在于：</p><div class=highlight id=id-34><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>add_compile_options命令添加的编译选项是针对所有编译器的</span><span class=p>(</span><span class=err>包括</span><span class=n>c和c</span><span class=o>++</span><span class=err>编译器</span><span class=p>)</span><span class=err>，而</span><span class=n>set命令设置CMAKE_C_FLAGS或CMAKE_CXX_FLAGS变量则是分别只针对c和c</span><span class=o>++</span><span class=err>编译器的。</span></span></span></code></pre></td></tr></table></div></div><h3 id=119-预定义变量>1.19 预定义变量</h3><h3 id=1191-基本变量>1.19.1 基本变量</h3><ul><li>==PROJECT_SOURCE_DIR==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;我们使用cmake命令后紧跟的目录，一般是工程的根目录；</li><li>==PROJECT_BINARY_DIR== &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;执行cmake命令的目录,通常是${PROJECT_SOURCE_DIR}/build；</li><li>==CMAKE_INCLUDE_PATH==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;系统环境变量,非cmake变量；</li><li>==CMAKE_LIBRARY_PATH==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;系统环境变量,非cmake变量；</li><li>==CMAKE_CURRENT_SOURCE_DIR==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;当前处理的CMakeLists.txt所在的路径；</li><li>==CMAKE_CURRENT_BINARY_DIR==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;target编译目录（使用ADD_SURDIRECTORY(src bin)可以更改此变量的值 ，SET(EXECUTABLE_OUTPUT_PATH &lt;新路径>)并不会对此变量有影响,只是改变了最终目标文件的存储路径）；</li><li>==CMAKE_CURRENT_LIST_FILE==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;输出调用这个变量的CMakeLists.txt的完整路径；</li><li>==CMAKE_CURRENT_LIST_LINE==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;输出这个变量所在的行；</li><li>==CMAKE_MODULE_PATH==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;定义自己的cmake模块所在的路径（这个变量用于定义自己的cmake模块所在的路径，如果你的工程比较复杂，有可能自己编写一些cmake模块，比如SET(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake),然后可以用INCLUDE命令来调用自己的模块）；</li><li>==EXECUTABLE_OUTPUT_PATH==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;重新定义目标二进制可执行文件的存放位置；</li><li>==LIBRARY_OUTPUT_PATH==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;重新定义目标链接库文件的存放位置；</li><li>==PROJECT_NAME==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-返回通过PROJECT指令定义的项目名称；</li><li>==CMAKE_ALLOW_LOOSE_LOOP_CONSTRUCTS==—用来控制IF ELSE语句的书写方式；</li></ul><h3 id=1192-操作系统变量>1.19.2 操作系统变量</h3><ul><li>==CMAKE_MAJOR_VERSION==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;cmake主版本号,如3.4.1中的3；</li><li>==CMAKE_MINOR_VERSION==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;cmake次版本号,如3.4.1中的4；</li><li>==CMAKE_PATCH_VERSION==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;cmake补丁等级,如3.4.1中的1；</li><li>==CMAKE_SYSTEM==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-操作系统名称，包括版本名，如Linux-2.6.22；</li><li>==CAMKE_SYSTEM_NAME==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-操作系统名称，不包括版本名，如Linux；</li><li>==CMAKE_SYSTEM_VERSION==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;操作系统版本号,如2.6.22；</li><li>==CMAKE_SYSTEM_PROCESSOR==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;电脑处理器名称，如i686；</li><li>==UNIX==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;在所有的类UNIX平台为TRUE,包括OS X和cygwin，Linux/Unix操作系统；</li><li>==WIN32==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;在所有的win32平台为TRUE,包括cygwin，Windows操作系统；</li><li>==APPLE==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-苹果操作系统；</li></ul><p>例如操作系统判断方式一：</p><div class=highlight id=id-35><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>WIN32</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=err>“</span><span class=n>This</span> <span class=n>operating</span> <span class=n>system</span> <span class=n>is</span> <span class=n>Windows</span><span class=p>.</span><span class=err>”</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>elseif</span><span class=p>(</span><span class=n>UNIX</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=err>“</span><span class=n>This</span> <span class=n>operating</span> <span class=n>system</span> <span class=n>is</span> <span class=n>Linux</span><span class=p>.</span><span class=err>”</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>elseif</span><span class=p>(</span><span class=n>APPLE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=err>“</span><span class=n>This</span> <span class=n>operating</span> <span class=n>system</span> <span class=n>is</span> <span class=n>APPLE</span><span class=p>.</span><span class=err>”</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>endif</span><span class=p>(</span><span class=n>WIN32</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>操作系统判断方式二：</p><div class=highlight id=id-36><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>CMAKE_SYSTEM_NAME</span> <span class=n>MATCHES</span> <span class=s>&#34;Linux&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=s>&#34;current platform: Linux &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>elseif</span> <span class=p>(</span><span class=n>CMAKE_SYSTEM_NAME</span> <span class=n>MATCHES</span> <span class=s>&#34;Windows&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=s>&#34;current platform: Windows&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>elseif</span> <span class=p>(</span><span class=n>CMAKE_SYSTEM_NAME</span> <span class=n>MATCHES</span> <span class=s>&#34;FreeBSD&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=s>&#34;current platform: FreeBSD&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=s>&#34;other platform: ${CMAKE_SYSTEM_NAME}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>endif</span> <span class=p>(</span><span class=n>CMAKE_SYSTEM_NAME</span> <span class=n>MATCHES</span> <span class=s>&#34;Linux&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=1193-开关选项>1.19.3 开关选项</h3><ul><li>==BUILD_SHARED_LIBS==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;控制默认的库编译方式。如果未进行设置,使用ADD_LIBRARY时又没有指定库类型,默认编译生成的库都是静态库；</li><li>==CMAKE_C_FLAGS==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-设置C编译选项，也可以通过指令ADD_DEFINITIONS()添加；</li><li>==CMAKE_CXX_FLAGS==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-设置C++编译选项，也可以通过指令ADD_DEFINITIONS()添加；</li><li>==CMAKE_C_COMPILER==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;指定C编译器；</li><li>==CMAKE_CXX_COMPILER==&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-指定C++编译器；</li><li>==CMAKE_BUILD_TYPE==:：build 类型(Debug, Release, …)-CMAKE_BUILD_TYPE=Debug</li></ul><h3 id=1194-环境变量>1.19.4 环境变量</h3><p>设置环境变量：</p><div class=highlight id=id-37><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>env</span><span class=p>{</span><span class=n>name</span><span class=p>}</span> <span class=n>value</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>调用环境变量：</p><div class=highlight id=id-38><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=err>$</span><span class=n>env</span><span class=p>{</span><span class=n>name</span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>例如</p><div class=highlight id=id-39><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=s>&#34;$env{name}&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=1195-cmake_include_current_dir>1.19.5 CMAKE_INCLUDE_CURRENT_DIR</h3><p>自动添加CMAKE_CURRENT_BINARY_DIR和CMAKE_CURRENT_SOURCE_DIR到当前处理 的CMakeLists.txt。 相当于在每个CMakeLists.txt加入：</p><div class=highlight id=id-40><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>include_directories</span><span class=p>(</span><span class=err>$</span><span class=p>{</span><span class=n>CMAKE_CURRENT_BINARY_DIR</span><span class=p>}</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_CURRENT_SOURCE_DIR</span><span class=p>})</span></span></span></code></pre></td></tr></table></div></div><h3 id=120-条件判断>1.20 条件判断</h3><h3 id=1201-逻辑判断和比较>1.20.1 逻辑判断和比较</h3><ul><li>==if (expression)==：expression 不为空时为真，false的值包括（0,N,NO,OFF,FALSE,NOTFOUND）；</li><li>==if (not exp)==：与上面相反；</li><li>==if (var1 AND var2)==：如果两个变量都为真时为真；</li><li>==if (var1 OR var2)==：如果两个变量有一个为真时为真；</li><li>==if (COMMAND cmd)==：如果 cmd 确实是命令并可调用为真；</li><li>==if (EXISTS dir) if (EXISTS file)==：如果目录或文件存在为真；</li><li>==if (file1 IS_NEWER_THAN file2)==：当 file1 比 file2 新，或 file1/file2 中有一个不存在时为真，文件名需使用全路径；</li><li>==if (IS_DIRECTORY dir)==：当 dir 是目录时为真；</li><li>==if (DEFINED var)==：如果变量被定义为真；</li><li>==if (var MATCHES regex)==：给定的变量或者字符串能够匹配正则表达式 regex 时为真，此处 var 可以用 var 名，也可以用 ${var}；</li><li>==if (string MATCHES regex)==：给定的字符串能够匹配正则表达式regex时为真。</li></ul><h3 id=1202-数字比较>1.20.2 数字比较</h3><ul><li>==if (variable LESS number)==：如果variable小于number时为真；</li><li>==if (string LESS number)==：如果string小于number时为真；</li><li>==if (variable GREATER number)==：如果variable大于number时为真；</li><li>==if (string GREATER number)==：如果string大于number时为真；</li><li>==if (variable EQUAL number)==：如果variable等于number时为真；</li><li>==if (string EQUAL number)==：如果string等于number时为真。</li></ul><h3 id=1203-字母表顺序比较>1.20.3 字母表顺序比较</h3><ul><li>==if (variable STRLESS string)==</li><li>==if (string STRLESS string)==</li><li>==if (variable STRGREATER string)==</li><li>==if (string STRGREATER string)==</li><li>==if (variable STREQUAL string)==</li><li>==if (string STREQUAL string)==</li></ul><h3 id=121-循环>1.21 循环</h3><h3 id=1211-foreach>1.21.1 foreach</h3><p>start 表示起始数，stop 表示终止数，step 表示步长</p><div class=highlight id=id-41><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>foreach</span><span class=p>(</span><span class=n>loop_var</span> <span class=n>RANGE</span> <span class=n>start</span> <span class=n>stop</span> <span class=p>[</span><span class=n>step</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>endforeach</span><span class=p>(</span><span class=n>loop_var</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=1212-while>1.21.2 while</h3><div class=highlight id=id-42><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>while</span><span class=p>(</span><span class=n>condition</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>endwhile</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h3 id=122-自动检测编译器是否支持c11>1.22 自动检测编译器是否支持C++11</h3><div class=highlight id=id-43><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>include</span><span class=p>(</span><span class=n>CheckCXXCompilerFlag</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>CHECK_CXX_COMPILER_FLAG</span><span class=p>(</span><span class=s>&#34;-std=c++11&#34;</span> <span class=n>COMPILER_SUPPORTS_CXX11</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>CHECK_CXX_COMPILER_FLAG</span><span class=p>(</span><span class=s>&#34;-std=c++0x&#34;</span> <span class=n>COMPILER_SUPPORTS_CXX0X</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>COMPILER_SUPPORTS_CXX11</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>set</span><span class=p>(</span><span class=n>CMAKE_CXX_FLAGS</span> <span class=s>&#34;${CMAKE_CXX_FLAGS} -std=c++11&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>elseif</span><span class=p>(</span><span class=n>COMPILER_SUPPORTS_CXX0X</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>set</span><span class=p>(</span><span class=n>CMAKE_CXX_FLAGS</span> <span class=s>&#34;${CMAKE_CXX_FLAGS} -std=c++0x&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=s>&#34;The compiler ${CMAKE_CXX_COMPILER} has no C++11 support. Please use a different C++ compiler.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>endif</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h3 id=123-cmake生成vs解决方案将项目放置在设定文件夹下>1.23 CMake生成VS解决方案将项目放置在设定文件夹下</h3><p>例如，我们在工程中引用了许多的第三方开源库，这些库的源码与自己所写的代码需要进行区分和隔离，通常情况下会单独开一个third筛选器存储这些第三方库的项目，怎么做？</p><h3 id=第一步>第一步：</h3><p>在第三方库的CMakeLists.txt中cmake_minimum_required(VERSION 2.6)中加上set_property(GLOBAL PROPERTY USE_FOLDERS On)</p><h3 id=第二步在生成编译目标的语法之后如>第二步：在生成编译目标的语法之后，如：</h3><div class=highlight id=id-44><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>add_executable</span><span class=p>(</span><span class=n>demo</span> <span class=n>demo</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span> <span class=err>#</span> <span class=err>生成可执行文件</span>
</span></span><span class=line><span class=cl><span class=n>add_library</span><span class=p>(</span><span class=n>common</span> <span class=n>STATIC</span> <span class=n>util</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span> <span class=err>#</span> <span class=err>生成静态库</span>
</span></span><span class=line><span class=cl><span class=n>add_library</span><span class=p>(</span><span class=n>common</span> <span class=n>SHARED</span> <span class=n>util</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span> <span class=err>#</span> <span class=err>生成动态库或共享库</span></span></span></code></pre></td></tr></table></div></div><p>加入一句</p><div class=highlight id=id-45><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>set_target_properties</span><span class=p>(</span><span class=err>$</span><span class=p>{</span><span class=err>第三方库项目名称</span><span class=p>}</span> <span class=n>PROPERTIES</span> <span class=n>FOLDER</span> <span class=err>“目标文件夹名称”</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h2 id=2-错误解决方案>2 错误解决方案</h2><h3 id=21-cannot-specify-link-libraries-for-target-liblinuxlibmydlla-which>2.1 Cannot specify link libraries for target “/…/…/lib/linux/libMyDll.a” which</h3><p>这个问题要将生成执行文件、静态库、动态库的声明</p><div class=highlight id=id-46><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>add_executable</span><span class=p>(</span><span class=n>demo</span> <span class=n>demo</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span> <span class=err>#</span> <span class=err>生成可执行文件</span>
</span></span><span class=line><span class=cl><span class=n>add_library</span><span class=p>(</span><span class=n>common</span> <span class=n>STATIC</span> <span class=n>util</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span> <span class=err>#</span> <span class=err>生成静态库</span>
</span></span><span class=line><span class=cl><span class=n>add_library</span><span class=p>(</span><span class=n>common</span> <span class=n>SHARED</span> <span class=n>util</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span> <span class=err>#</span> <span class=err>生成动态库或共享库</span></span></span></code></pre></td></tr></table></div></div><p>放在</p><div class=highlight id=id-47><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>target_link_libraries</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>之前。</p><h3 id=22-警告检测到时钟错误您的创建可能是不完整的>2.2 警告：检测到时钟错误。您的创建可能是不完整的。</h3><p>在项目根目录下执行命令：</p><div class=highlight id=id-48><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>touch</span> <span class=o>*</span></span></span></code></pre></td></tr></table></div></div><p>更新所有文件时间。</p><h2 id=3-参考>3 参考</h2><p>[1].<a href=https://zhuanlan.zhihu.com/p/315768216 target=_blank rel="external nofollow noopener noreferrer">cmake常用命令的一些整理<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a><br>[2].<a href=https://cmake-doc.readthedocs.io/zh-cn/latest/guide/tutorial/index.html target=_blank rel="external nofollow noopener noreferrer">简明教程<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a><br>[3].<a href=https://blog.csdn.net/qq_21438461/article/details/129797348 target=_blank rel="external nofollow noopener noreferrer">CMake 命令行参数<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a><br>[4].https://blog.csdn.net/geyichongchujianghu/article/details/124781090?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-124781090-blog-85257728.235%5Ev40%5Epc_relevant_3m_sort_dl_base1&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-124781090-blog-85257728.235%5Ev40%5Epc_relevant_3m_sort_dl_base1&amp;utm_relevant_index=2<br>[5].https://blog.csdn.net/Zhanganliu/article/details/85257728<br>[6].https://blog.csdn.net/llffss/article/details/120121617<br>[7].https://blog.csdn.net/wzj_110/category_10357507.html<br></p></div><div class=post-reward><div class=comment>Buy me a coffee~</div><input type=checkbox class=reward-input name=reward id=fi-reward hidden>
<label class=reward-button for=fi-reward>赞赏</label><div class=reward-ways data-mode=fixed><div><img loading=lazy src=/images/alipay.png srcset="/images/alipay.png, /images/alipay.png 1.5x, /images/alipay.png 2x" sizes=auto data-title="Jian YE 支付宝" data-alt="Jian YE 支付宝" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span data-animation>支付宝</span></div><div><img loading=lazy src=/images/wechatpay.png srcset="/images/wechatpay.png, /images/wechatpay.png 1.5x, /images/wechatpay.png 2x" sizes=auto data-title="Jian YE 微信" data-alt="Jian YE 微信" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span data-animation>微信</span></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2024-02-02 16:30:42">更新于 2024-02-02&nbsp;<a class=git-hash href=https://github.com/jianye0428/JianBlog/commit/d90b7dc618451031d0b9086fdf9da7137db8b3c2 rel="external nofollow noopener noreferrer" target=_blank title="commit by yejian(18817571704@163.com) d90b7dc618451031d0b9086fdf9da7137db8b3c2: feat: add cmake command sheet"><i class="fa-solid fa-hashtag fa-fw" aria-hidden=true></i>d90b7dc</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/posts/commandcollection/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span><span><a href=https://github.com/jianye0428/JianBlog/edit/docs/content/posts/C++/CMAKE/CommandCollection/index.md title=编辑此页 target=_blank rel="external nofollow noopener noreferrer" class=link-to-edit>编辑此页</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://jianye0428.github.io/posts/commandcollection/ data-title="CMake 常用命令查询" data-hashtags=CMake><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://jianye0428.github.io/posts/commandcollection/ data-hashtag=CMake><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Linkedin" data-sharer=linkedin data-url=https://jianye0428.github.io/posts/commandcollection/><i class="fa-brands fa-linkedin fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://jianye0428.github.io/posts/commandcollection/ data-title="CMake 常用命令查询"><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 百度" data-sharer=baidu data-url=https://jianye0428.github.io/posts/commandcollection/ data-title="CMake 常用命令查询"><i data-svg-src=/lib/simple-icons/icons/baidu.min.svg aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/cmake/ class=post-tag>CMake</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/make_install/ class=post-nav-item rel=prev title="configure、make、make install 背后的原理"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>configure、make、make install 背后的原理</a>
<a href=/posts/cmake_note_10/ class=post-nav-item rel=next title="CMake 笔记 | [10] 使用控制流">CMake 笔记 | [10] 使用控制流<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line powered">由 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.122.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.18"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2018 - 2024</span><span class=author itemprop=copyrightHolder>
<a href=https://github.com/jianye0428 target=_blank rel="external nofollow noopener noreferrer">Jian YE</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics order-first"><span class=site-time title=网站运行中……><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i><span class="ms-1 d-none">博客已运行</span><span class="run-times ms-1">网站运行中……</span></span></div><div class="footer-line visitor"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><a href=https://github.com/jianye0428/JianBlog title="在 GitHub 上查看程式碼，訂閱請點 Watch" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0;--bg-progress:#000;--bg-progress-dark:#fff></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/blue/pace-theme-minimal.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script src=/lib/instant-page/instantpage.min.js async defer type=module></script><script src=/lib/twemoji/twemoji.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=/lib/cell-watermark/watermark.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:50},comment:{enable:!1},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{algoliaAppID:"MTJNHU0JVB",algoliaIndex:"index",algoliaSearchKey:"5486225134d99f43826da401ee9bad57",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"},siteTime:"2018-05-28T20:01:01+08:00",twemoji:!0,watermark:{appendto:".wrapper>main",colspacing:30,content:'<img style="height: 0.85rem;" src="/images/favicon/jian_icon.png" alt="logo" /> jianye',enable:!0,fontfamily:"MMT_LRH,沐目体",fontsize:1.1,height:20,opacity:.0125,rotate:15,rowspacing:60,width:150}}</script><script src=/js/theme.min.js defer></script><script src=/js/custom.min.js defer></script></body></html>