# Effective C++ (ç¬¬3ç‰ˆ) ç²¾è¯»æ€»ç»“ [3]


<!-- {{< admonition quote "quote" false >}}
note abstract info tip success question warning failure danger bug example quote
{{< /admonition >}} -->

<!--more-->

# å‰è¨€

> Effective-C++æ€»ç»“ç³»åˆ—åˆ†ä¸ºå››éƒ¨åˆ†ï¼Œæœ¬æ–‡ä¸ºç¬¬äºŒéƒ¨åˆ†ï¼Œæ¶‰åŠåŸä¹¦ç¬¬3~4ç« ï¼Œå†…å®¹èŒƒå›´Rule13~25ã€‚ä¸ºæ–¹ä¾¿ä¹¦å†™ï¼ŒRule13ç®€å†™ä¸ºR13ã€‚

{{< admonition Note "Effective-C++ç³»åˆ—List" false >}}
æœ¬åšå®¢ç«™ç‚¹ç³»åˆ—å†…å®¹å¦‚ä¸‹ï¼š</br>
ğŸ’¡ [Effective C++(ç¬¬3ç‰ˆ)ç²¾è¯»æ€»ç»“(ä¸€)](https://jianye0428.github.io/posts/partone/)</br>
ğŸ’¡ [Effective C++(ç¬¬3ç‰ˆ)ç²¾è¯»æ€»ç»“(äºŒ)](https://jianye0428.github.io/posts/parttwo/)</br>
ğŸ’¡ [Effective C++(ç¬¬3ç‰ˆ)ç²¾è¯»æ€»ç»“(ä¸‰)](https://jianye0428.github.io/posts/partthree/)</br>
ğŸ’¡ [Effective C++(ç¬¬3ç‰ˆ)ç²¾è¯»æ€»ç»“(å››)](https://jianye0428.github.io/posts/partfour/)</br>
{{< /admonition >}}

ç”±äºåŸä¹¦åœ¨C++11ä¹‹å‰å†™æˆï¼Œæœ‰äº›ç°ä»£C++ç‰¹æ€§ä¸ä¼šæåŠï¼Œæ‰€ä»¥ä¼šæ ¹æ®æœ¬äºº`å¼€å‘ç»éªŒ`æ–°å¢ä¸€äº›ä¸ªäººæ„Ÿæ‚ŸğŸ‘‰`By the way`ç¯èŠ‚ã€‚

## CH5. å®ç°

### R26 å°½å¯èƒ½å»¶åå˜é‡å®šä¹‰å¼çš„å‡ºç°æ—¶é—´
- å°½å¯èƒ½å»¶åå˜é‡å®šä¹‰å¼çš„å‡ºç°ï¼Œå¯å¢åŠ ç¨‹åºæ¸…æ™°åº¦å’Œæ•ˆç‡
  1. å®šä¹‰åï¼Œåœ¨ä½¿ç”¨å‰å°±é­é‡æŠ›å¼‚å¸¸
    è¿™ç§æƒ…å†µï¼Œå¦‚æœæ˜¯å®šä¹‰äº†å¯¹è±¡`ObjectA a`ï¼Œä¾¿ç™½ç™½åœ°æµªè´¹äº†å¯¹è±¡açš„æ„é€ å’Œææ„æˆæœ¬ã€‚
  2. ä¸åªæ˜¯å»¶åå˜é‡å®šä¹‰åˆ°ä½¿ç”¨æ—¶ï¼Œè€Œæ˜¯å°½é‡å»¶ååˆ°èƒ½ç»™å®ƒåˆå€¼æ—¶
    ```c++
    std::string encryptPassword(const std::string& password){
      if(password.length() < 8){
        throw std::logic_error("Password is too short");
      }// è€ƒè™‘1ï¼šåœ¨å¼‚å¸¸ä¹‹åå®šä¹‰å˜é‡
      std::string encrypted(password);//è€ƒè™‘2ï¼šå®šä¹‰å»¶åè‡³å˜é‡èƒ½èµ‹åˆå€¼çš„æ—¶æœº
      encrypt(encrypted);
      return encrypted;
    }
    ```
  3. æ€è€ƒå˜é‡å®šä¹‰**æ˜¯å¦**è¯¥åœ¨å¾ªç¯å†…
    - æ–¹æ³•Aï¼šå®šä¹‰äºå¾ªç¯å¤–
      ```c++
      Widget w;
      for(int i = 0 ; i< n; ++i) {
      â€ƒ â€ƒ w = foo(i);
      â€ƒ â€ƒ// other...
      }
      ```
    - æ–¹æ³•Bï¼šå®šä¹‰äºå¾ªç¯å†…
      ```c++
      for (int i = 0; i < n; ++i) {
        Widget w(foo(i));
        // other...
      }
      ```
**ç©¶ç«Ÿæ˜¯Aè¿˜æ˜¯Bæ–¹æ³•å¥½**ï¼Œå–å†³äº `ä¸€ä¸ªèµ‹å€¼æˆæœ¬`å’Œ`ä¸€ç»„æ„é€ +ææ„`æˆæœ¬ï¼Œè¿™2è€…ä¹‹é—´ï¼Œå¦‚æœæ˜¯èµ‹å€¼æˆæœ¬ä½ï¼Œé‚£ä¹ˆAæ›´å¥½ï¼Œå¦åˆ™Bæ›´å¥½ã€‚

### R27 å°½é‡å°‘åšè½¬å‹åŠ¨ä½œ
é€šå¸¸çš„è½¬å‹æ˜¯å¯èƒ½ä¼šè¿™æ ·å†™ï¼šå‡½æ•°é£æ ¼çš„`int(expression)`æˆ–è€…Cé£æ ¼çš„(int)`expression`ï¼Œè¿™éƒ½è¢«æˆä¸ºâ€œæ—§å¼è½¬å‹â€ã€‚

  - åœ¨C++ä¸­ï¼Œæœ‰4ç§æ–°å¼è½¬å‹æ“ä½œç¬¦ï¼š
    1. **const_cast (expression)**
      ä½œç”¨æ˜¯ç§»é™¤å˜é‡çš„å¸¸é‡æ€§(cast away the constness)ï¼Œæ˜¯å”¯ä¸€æœ‰æ­¤èƒ½åŠ›çš„æ“ä½œç¬¦ã€‚
    2. **dynamic_cast(expression)**
      ä½œç”¨æ˜¯â€œå®‰å…¨å‘ä¸‹è½¬å‹â€(safe downcasting)ï¼Œå†³å®šæŸä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸç»§æ‰¿ä½“ç³»ã€‚è€—è´¹é‡å¤§è¿è¡Œæˆæœ¬ï¼ˆåŸå› ï¼šéœ€è¦æŸ¥è¯¢RTTIä¿¡æ¯ï¼Œè€Œä¸”ä¸åŒç¼–è¯‘å™¨å®ç°çš„æ–¹æ³•å’Œæ•ˆç‡æœ‰æ‰€ä¸åŒï¼‰ã€‚
    3. **reinterpret_cast(expression)**
      æ‰§è¡Œä½çº§è½¬å‹ï¼Œå®é™…ç»“æœå–å†³äºç¼–è¯‘å™¨ï¼Œç§»æ¤æ€§å·®ã€‚ï¼ˆæ¯”å¦‚int* è½¬ä¸ºintï¼‰è¦æ¸…æ¥šè‡ªå·±åœ¨åšä»€ä¹ˆï¼Œæ…ç”¨ã€‚
    4. **static_cast(expression)**
      å¼ºè¿«éšå¼ç±»å‹è½¬æ¢ï¼Œä»£æ›¿Cé£æ ¼çš„"æ—§å¼è½¬æ¢"ã€‚ä¹Ÿå¯ä»¥ç»™å˜é‡åŠ ä¸Šconstç‰¹æ€§ã€‚

    æ–°å¼è½¬æ¢çš„å¥½å¤„ï¼šå¾ˆå®¹æ˜“åœ¨ä»£ç æ‰¾åˆ°â€œç±»å‹ç³»ç»Ÿåœ¨ä½•å¤„è½¬å˜æˆ–ç ´åâ€ï¼›å¯¹constç‰¹æ€§çš„ä¸¥æ§ï¼Œè®©ç±»å‹ç³»ç»Ÿæ›´å¥å£®ã€‚

  - æ´¾ç”Ÿç±»é‡Œç›´æ¥è°ƒç”¨åŸºç±»æˆå‘˜å‡½æ•°æ—¶ï¼Œä¸è¦ç”¨è½¬å‹
    ```C++
    class SpecialWindow:public Window{
    public:
      virtual void onResize(){
        Window::onResize();//ä¸è¦ä½¿ç”¨ static_cast<Window>(*this).onResize();
      }
    };
    ```
  - å…³äºdynamic_castéœ€è¦æ³¨æ„çš„
    1. å¦‚ä½•æ›¿ä»£å’Œé¿å…
      ä¸€èˆ¬æ˜¯æŒæœ‰ä¸€ä¸ª`Base *pBase`ï¼Œä½†æ˜¯æŒ‡å‘çš„æ˜¯DerivedObjï¼Œäºæ˜¯è½¬å‹ä¸ºpDerived
      - å¯ä»¥è¿™æ ·ä¿®æ”¹ï¼š
      ä¿®æ”¹è®¾è®¡ï¼Œçª„åŒ–ç±»å‹ï¼ŒæŒæœ‰ä¸€ä¸ªpDerivedå³å¯ï¼›æˆ–è€…å°†æƒ³åšçš„äº‹æ”¾åˆ°è™šå‡½æ•°ä¸­ï¼Œåˆ©ç”¨å¤šæ€å»å®Œæˆã€‚
    2. é¿å…ä¸²è”
      é¿å…ä¸‹æ–¹è¿™æ ·çš„ä»£ç ï¼Œä¸€è¿ä¸²çš„dynamic_castï¼š
      ```C++
      class Window{ ... };
      // å®šä¹‰å­ç±» SpecialWindow1,SpecalWindow2,SpecialWindow3
      Window* winPtr;
      // çœç•¥winPtrçš„å…¶ä»–æ“ä½œ ...
      if(SpecialWindow1 *psw1 = dynamic_cast<SpecialWindow1*>(winPtr)){ ... }
      else  if(SpecialWindow2 *psw2 = dynamic_cast<SpecialWindow2*>(winPtr)){ ... }
      else  if(SpecialWindow3 *psw3 = dynamic_cast<SpecialWindow3*>(winPtr)){ ... }
      ```
      è¿™æ ·çš„ä»£ç åˆå¤§åˆæ…¢ï¼Œæ¯æ¬¡ç»§æ‰¿ä½“ç³»æœ‰æ‰€æ”¹å˜ï¼Œä»£ç å°±éœ€è¦é‡æ–°æ£€é˜…åˆ¤æ–­ã€‚è¿™æ ·çš„ä»£ç åº”è¯¥ç”¨â€œåŸºäºvirtualå‡½æ•°è°ƒç”¨â€å–ä»£å®ƒã€‚

{{<admonition Note "By the way">}}
è‡ª **C++11** èµ·ï¼Œé’ˆå¯¹æ™ºèƒ½æŒ‡é’ˆ shared_ptr çš„è½¬å‹ï¼Œæ¨å‡ºäº†å¦å¤– 4 ä¸ªæ¨¡ç‰ˆå‡½æ•°ï¼š
- `std::static_pointer_cast`
  å‡½æ•°çš„åŸå‹å£°æ˜ä¸ºï¼š
  ```c++
  template< class T, class U >
  std::shared_ptr<T> static_pointer_cast( const std::shared_ptr<U>& r ) noexcept;
  ```
  å«ä¹‰ä»¥åŠåº”ç”¨åœºæ™¯ä¸ `static_cast` ç±»ä¼¼ï¼Œæ¯”å¦‚å­ç±»å‹æŒ‡é’ˆè½¬ä¸ºçˆ¶ç±»å‹ï¼š
  ```c++
  auto basePtr = std::make_shared<Base>();
  auto derivedPtr = std::make_shared<Derived>();
  basePtr = std::static_pointer_cast<Base>(derivedPtr);
  ```
  æˆ–è®¸æˆ‘ä»¬ä¼šæœ‰ç–‘é—®ï¼Œæ˜¯å¦æœ‰å¿…è¦ç”¨è¿™ä¸ªå‡½æ•°è¿›è¡Œè½¬å‹å‘¢ï¼Œå¦‚ä¸‹å®ç°ä¸æ˜¯ä¸€æ ·çš„å—?
  ```c++
  basePtr = std::shared_ptr<Base>(static_cast<Base*>(derivedPtr.get()));
  ```
  ğŸ¤” å½“ç„¶ä¸ä¸€æ ·ï¼Œstatic_cast<T*>((U*)nullptr)æ˜¯æœªå®šä¹‰è¡Œä¸ºï¼Œè€Œä¸”å°±è¯­æ³•æè¿°ä¸Šæ¥çœ‹ï¼Œå“ªä¸ªæ›´ç®€æ´ä¸è¨€è‡ªæ˜ã€‚
  å¦å¤–ï¼Œè‡ª C++20 èµ·æ”¯æŒå³å€¼å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯å¦‚ä¸‹å½¢å¼ï¼š
  ```c++
  template< class T, class U >
  std::shared_ptr<T> static_pointer_cast( std::shared_ptr<U>&& r ) noexcept;
  ```
- `std::dynamic_pointer_cast`
å«ä¹‰ä»¥åŠåº”ç”¨åœºæ™¯ä¸ dynamic_cast ç±»ä¼¼ï¼Œç”¨æ³•ä¼ å‚ä¸ std::static_pointer_cast ç±»ä¼¼ï¼Œä¸”è‡ª C++20 èµ·æ”¯æŒå³å€¼å¼•ç”¨ï¼Œä¸èµ˜è¿°ã€‚
- `std::const_pointer_castï¼š`ä¸å‰ 2 è€…ç±»ä¼¼ï¼Œä¸èµ˜è¿°ã€‚
- `std::reinterpret_pointer_castï¼š`ä¸å‰ 3 è€…ç±»ä¼¼ï¼Œä¸èµ˜è¿°ã€‚
{{</admonition>}}

### R28 é¿å…è¿”å›handlesæŒ‡å‘å¯¹è±¡å†…éƒ¨æˆåˆ†

è¿™é‡Œçš„**handlesï¼ˆå·ç ç‰Œï¼‰åŒ…æ‹¬**æŒ‡å‘å¯¹è±¡å†…éƒ¨çš„**æŒ‡é’ˆ**ã€**è¿­ä»£å™¨**ã€**å¼•ç”¨**ã€‚

ä»¥ä¸‹è®²è¿°å½“è¿”å›å¯¹è±¡å†…éƒ¨çš„handlesæ—¶ï¼Œå­˜åœ¨çš„2ä¸ªé—®é¢˜ï¼š

  - å¯èƒ½ä¼šç ´åå°è£…æ€§
    è€ƒè™‘ä¸€ä¸ªåœºæ™¯ï¼špublicå‡½æ•°è¿”å›ä¸€ä¸ªprivateæˆå‘˜çš„éconstå¼•ç”¨ï¼Œå°±è®©å¤–ç•Œæœ‰äº†ä¿®æ”¹privateçš„æœºä¼šï¼Œç ´åäº†å°è£…æ€§ã€‚
    æ­¤æ—¶ï¼Œéœ€è¦å°†éconstå¼•ç”¨æ”¹ä¸ºconstå¼•ç”¨ï¼Œåªè¯»å±æ€§ã€‚
    ```c++
    struct Pixel {
      float r,g,b;
    }
    class Image {
    public:  //æ³¨æ„ï¼šåé¢è¿™conståªä¿è¯æˆå‘˜å˜é‡vPixPtrs_ä¸æ”¹
        Pixel& GetThePixel(int idx) const{
            return  vPixPtrs_[i];}//éšæ‚£ï¼šå…¶å®å¤–éƒ¨è°ƒç”¨è€…ä»èƒ½ç›´æ¥ä¿®æ”¹Pixelçš„rgbå€¼
        // ä¸Šä¸€å¥çš„è¿”å›å€¼åº”è¯¥æ”¹ä¸º "const Pixel&"
    private:
        std::vector<std::shared_ptr<Pixel>> vPixPtrs_;
    }
    ```
  - å¯èƒ½ä¼šå¼•èµ·â€œç©ºæ‚¬handlesâ€
    å³ä½¿ç”¨constè§£å†³äº†å°è£…æ€§çš„é—®é¢˜ï¼Œå› ä¸ºå¾ˆå®¹æ˜“å‡ºç°**â€œhandlesæ¯”å…¶æ‰€æŒ‡å¯¹è±¡æ›´é•¿å¯¿â€**ï¼Œå¯èƒ½å­˜åœ¨å¯¹è±¡å·²ææ„ï¼Œä½†handlesè¿˜ç•™å­˜çš„é—®é¢˜ã€‚å°¤å…¶æ˜¯ä¸´æ—¶å˜é‡çš„ææ„ï¼Œä¸å¤ªå®¹æ˜“å¯Ÿè§‰ã€‚
    ```c++
    class SceneGraph{ ... };
    const Image CaptureImage(const SceneGraph& graph);
    //é‚£ä¹ˆè°ƒç”¨æ–¹å¯èƒ½ä¼šè¿™æ ·ä½¿ç”¨
    SceneGraph Grap;
    //ä¸‹é¢è¿™å¥ä¹‹åï¼ŒImageä¸´æ—¶å¯¹è±¡è¢«é”€æ¯ï¼ŒpPixæŒ‡å‘ä¸€ä¸ªä¸å­˜åœ¨çš„å¯¹è±¡
    const Pixel *pPix = &(CaptureImage(Grap).GetThePixel(0));
    ```
    æ³¨æ„ï¼ŒCaptureImageçš„ç¡®èƒ½è¿”å›ä¸€ä¸ªä¸´æ—¶Imageå¯¹è±¡ï¼Œèƒ½æˆåŠŸè°ƒç”¨GetThePixelï¼Œä½†è¿™å¥ç»“æŸåï¼Œä¸´æ—¶å¯¹è±¡ç«‹é©¬ä¼šè¢«é”€æ¯ï¼Œé€ æˆç©ºæ‚¬ç°è±¡ï¼Œæˆ–å«è™šåŠ(dangling) ï¼

### R29 ä¸ºâ€œå¼‚å¸¸å®‰å…¨â€è€ŒåŠªåŠ›æ˜¯å€¼å¾—çš„

â€œ**å¼‚å¸¸å®‰å…¨**â€æ˜¯æŒ‡ï¼Œå½“å¼‚å¸¸æŠ›å‡ºæ—¶ï¼Œä»£ç ä¾ç„¶èƒ½åšåˆ°å¦‚ä¸‹2ç‚¹ï¼š
  1. ä¸æ³„éœ²ä»»ä½•èµ„æº
    åŒ…æ‹¬å†…å­˜èµ„æºï¼Œé”èµ„æºã€‚
  2. ä¸å…è®¸æ•°æ®è´¥å
    ä¸ä¼šå› ä¸ºå¼‚å¸¸è€Œå¯¼è‡´ç©ºæ‚¬æŒ‡é’ˆç­‰æœªå®šä¹‰è¡Œä¸ºã€‚

è€ƒè™‘ä¸‹æ–¹çš„ç¤ºä¾‹ä»£ç ï¼Œï¼ˆå¦‚æœ`new Image`æŠ›`std::bad_alloc`å¼‚å¸¸ï¼‰åˆ™ä¼šåŒæ—¶è¿èƒŒäº†ä¸Šè¿°2æ¡ï¼š

```c++
class PrettyMenu{
private:
    Mutex mutex_; //äº’æ–¥å™¨
    Image* bgImage_ = nullptr;
    int imageChangeCnt_ = 0;
public:
	void PrettyMenu::changeBackground(std::ifstream& imgSrc){
        lock(&mutex_);// è¿™ä¸ªå¯ä»¥æ”¹ä¸ºRAIIçš„é”ï¼Œæ¥ä¿è¯å¼‚å¸¸å®‰å…¨
        delete bgImage_;
        ++imageChangeCnt_;
        //è¿™é‡Œnew ImageæŠ›å¼‚å¸¸ï¼Œå¯¼è‡´æ— æ³•è§£é”ï¼›ä¸”bgImage_æŒ‡å‘èµ„æºå·²ç»é‡Šæ”¾ï¼Œç©ºæ‚¬æŒ‡é’ˆ
        bgImage_ = new Image(imageSrc_);
        unlock(&mutex_);
    }
};
```

#### å¼‚å¸¸å®‰å…¨çš„3ä¸ªç­‰çº§

å¼‚å¸¸å®‰å…¨çš„å‡½æ•°ï¼Œæœ‰**3ä¸ªç­‰çº§**çš„å¼‚å¸¸å®‰å…¨ä¿è¯ï¼Œä¼šæ»¡è¶³**ä¸‰è€…ä¹‹ä¸€**ï¼š

- **åŸºæœ¬æ‰¿è¯º**
  å¦‚æœå¼‚å¸¸è¢«æŠ›å‡ºï¼Œç¨‹åºå†…çš„ä»»ä½•äº‹åŠ¡ä»ç„¶ä¿æŒåœ¨æœ‰æ•ˆçŠ¶æ€ä¸‹ï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•æ•°æ®è´¥åã€‚æ¯”å¦‚ä¸Šä¾‹ä¸­å¦‚æœæŠ›å¼‚å¸¸ï¼Œä¼šå¦å¤–æ·»åŠ å®ç°ï¼Œä½¿bgImage_æŒæœ‰æŸä¸ªé»˜è®¤å›¾åƒï¼Œæˆ–ä¿æŒåŸå€¼ï¼Œè®©ç¨‹åºç»§ç»­æœ‰æ•ˆè¿è¡Œã€‚

- **å¼ºçƒˆä¿è¯**
  å¦‚æœå¼‚å¸¸è¢«æŠ›å‡ºï¼Œç¨‹åºçŠ¶æ€ä¸æ”¹å˜ã€‚è¿™æ ·çš„å‡½æ•°è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆé€€å›åˆ°æ‰§è¡Œå‰çš„çŠ¶æ€ã€‚

  ä¸Šè¿°æ¡ˆä¾‹åˆ™åº”è¯¥ä¼šè¢«ä¿®æ”¹æˆå¦‚ä¸‹å½¢å¼ï¼š
  ```c++
  class PrettyMenu{
  private:
      std::shared_ptr<Image> bgImage_; //RAIIé¿å…äº†å¼‚å¸¸å‘ç”Ÿæ—¶çš„èµ„æºæ³„æ¼å’Œæ•°æ®è´¥å
      //... çœç•¥å…¶ä»–æˆå‘˜
  public:
    void PrettyMenu::changeBackground(std::ifstream& imgSrc){
          CLock ml(&mutex_);//RAIIå°è£…çš„Lockç±»ï¼Œè¯¦ç»†å¯å‚è€ƒ é˜…è¯»æ€»ç»“(äºŒ)-Rule14
          bgImage_.reset(new Image(imgSrc));//è‹¥newå¤±è´¥ï¼Œåˆ™ä¸ä¼šreset
          ++imageChangeCnt_;//æŠŠäº‹æƒ…åšå®Œå†++count
      }
  };
  ```
- **ä¸æŠ›å¼‚å¸¸**
  åœ¨åŸä¹¦ä¸­ï¼Œè¿™ä¸ªâ€œNo Throwâ€ä¸æ˜¯ç»å¯¹ä¸æŠ›å¼‚å¸¸ï¼Œè€Œæ˜¯ä¸€æ—¦æ„å¤–æŠ›å¼‚å¸¸ï¼Œå°±ä¼šè°ƒç”¨unexpectedå‡½æ•°è¿›è€Œabortï¼ˆä¾‹å¦‚`int doSomething() throw();//ç©ºç™½çš„å¼‚å¸¸æ˜ç»†`ï¼‰ã€‚

{{<admonition Note "By the way">}}
åŸä¹¦ä¸­ä¾‹å­çš„ **throw()** åœ¨ä¸åŒç¼–è¯‘å™¨è¡¨ç°ä¸ä¸€è‡´ï¼Œç°åœ¨å·²ç» **ä¸æ¨èä½¿ç”¨**ã€‚

æ›´è¯¦ç»†èµ„æ–™å¯å‚è€ƒ[A Pragmatic Look at Exception Specifications](http://gotw.ca/publications/mill22.htm)å’Œ[Should I use an exception specifier in C++](https://stackoverflow.com/questions/88573/should-i-use-an-exception-specifier-in-c)

åœ¨C++11ä¸­ï¼Œæœ‰äº†æ›´å¯é æœ‰æ•ˆçš„å…³é”®å­—noexceptï¼Œä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œæœ‰æ“ä½œç¬¦å’Œå¼‚å¸¸æç¤ºç¬¦ä¸¤ç§ä½œç”¨ï¼Œä¸‹æ–¹å±•ç¤ºç®€å•ç”¨æ³•ï¼š
  ```c++
  void f() noexcept; // å‡½æ•° f() ä¸ä¼šæŠ›å‡º
  void (*fp)() noexcept(false); // fp æŒ‡å‘å¯èƒ½ä¼šæŠ›å‡ºçš„å‡½æ•°
  void g(void pfa() noexcept);  // g æ¥æ”¶æŒ‡å‘ä¸ä¼šæŠ›å‡ºçš„å‡½æ•°çš„æŒ‡é’ˆ
  // typedef int (*pf)() noexcept; // é”™è¯¯
  ```
æ›´è¯¦ç»†çš„`noexcept`ä»‹ç»å¯ä»¥è®¿é—®[cppreferenceï¼šnoexceptæ“ä½œç¬¦](https://zh.cppreference.com/w/cpp/language/noexcept)å’Œ[cppreferenceï¼šnoexceptå¼‚å¸¸è¯´æ˜ç¬¦](https://zh.cppreference.com/w/cpp/language/noexcept_spec)
{{</admonition>}}

#### ä½¿ç”¨copy-and-swapä¿éšœå¼‚å¸¸å®‰å…¨

`copy-and-swap`æŠ€æœ¯ï¼šå…ˆæ‹·è´ä¸€ä»½æƒ³ä¿®æ”¹çš„å¯¹è±¡ï¼Œç­‰ä¿®æ”¹å½»åº•å®Œæˆåï¼ˆè¿‡ç¨‹ä¸­ä¸æŠ›å¼‚å¸¸ï¼‰ï¼Œå†ä¸åŸå¯¹è±¡äº¤æ¢ã€‚

ä¸ºäº†æ›´å½¢è±¡å±•ç¤ºè¿™ä¸€è¿‡ç¨‹ï¼Œä½¿ç”¨pImlæ‰‹æ³•å¯¹bgImage_å°è£…ä¸€ä¸‹ï¼š
```c++
struct ImgPimpl{ //é€‰ç”¨structè€ŒéClassï¼šæ–¹ä¾¿ï¼›æœ€åè¢«privateæˆå‘˜å½¢å¼ä½¿ç”¨ï¼Œå°è£…æ€§ä¸ç”¨æ‹…å¿ƒ
   std::shared_ptr<Image> bgImage_;
   int imageChangeCnt_ = 0;
};
```

é‚£ä¹ˆPrettyMenuç±»å¯ä»¥æ”¹ä¸ºå¦‚ä¸‹ï¼š
```c++
class PrettyMenu{
private:
    Mutex mutex_;
    std::shared_ptr<ImgPimpl> pImpl_;
public:  //æ„é€ ç•¥
	void PrettyMenu::changeBackground(std::ifstream& imgSrc){
        using std::swap;   //å‚è€ƒ é˜…è¯»æ€»ç»“(äºŒ)-Rule25
        CLock ml(&mutex_);//RAIIå°è£…çš„Lockç±»ï¼Œè¯¦ç»†å¯å‚è€ƒæ€»ç»“(äºŒ)-Rule14
        std::shared_ptr<ImgPimpl> pNewCopy(new ImgPimpl(*pImpl_));
        pNewCopy->bgImage_.reset(new Image(imgSrc)); //ä¿®æ”¹å‰¯æœ¬
        ++pNewCopy->imageChangeCnt_;

        swap(pImpl_,pNewCopy);//æ”¹å®Œä¹‹åswap
    }
};
```

#### å¼‚å¸¸å®‰å…¨çš„è¿å¸¦å½±å“(side effects)

å‡½æ•°æä¾›çš„â€œå¼‚å¸¸å®‰å…¨ä¿è¯ç­‰çº§â€åª**å–å†³äº**å…¶è°ƒç”¨çš„**å„ä¸ªå­å‡½æ•°çš„â€œæœ€ä¸å®‰å…¨è€…â€**ã€‚

è€ƒè™‘ä»¥ä¸‹å‡½æ•°SomeFuncä»£ç ï¼š
```c++
void SomeFunc{
    ... // å¯¹localçŠ¶æ€åšä¸€ä»½å‰¯æœ¬
    f1();
    f2();
    ...  //å°†ä¿®æ”¹åçš„çŠ¶æ€ç½®æ¢è¿‡æ¥
}
```

**`åˆ†æ`**ï¼šæ˜¾ç„¶copy-and-swapåœ¨å°½åŠ›å¼ºçƒˆä¿è¯å¼‚å¸¸å®‰å…¨ï¼Œä½†æ˜¯ï¼Œf1æˆ–è€…f2çš„å¼‚å¸¸å®‰å…¨å¦‚æœæ¯”è¾ƒä½ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦å•ç‹¬å¯¹f1ï¼Œf2è¿›è¡Œcopy-and-swapï¼Œæ¥å°è¯•ä¿è¯â€œå¼ºçƒˆå¼‚å¸¸å®‰å…¨â€ï¼›å³ä½¿å¦‚æ­¤ï¼Œå¦‚æœf1èƒ½æˆåŠŸåšäº†ä¿®æ”¹ï¼Œä½†æ˜¯f2ä¿®æ”¹å¤±è´¥äº†å¹¶å›é€€ï¼Œé‚£ä¹ˆ**f1ã€f2æ•´ä½“**çœ‹èµ·æ¥è¿˜æ˜¯â€œ**æ”¹äº†ä¸€éƒ¨åˆ†**â€ã€‚

**`è¿™ä¹Ÿå‘Šè¯«æˆ‘ä»¬`**ï¼Œå¦‚æœå¼•å…¥äº†å¼‚å¸¸ä¸å®‰å…¨çš„æ—§ä»£ç ï¼Œé‚£ä¹ˆè¿™ç§ç‰¹æ€§ä¼šæ³¢åŠå…¶ä»–ä»£ç ã€‚

å°±è®¾è®¡è€…è€Œè¨€ï¼Œåªèƒ½æ ¹æ®å®é™…æƒ…å†µï¼Œå°½å¯èƒ½ä¿è¯â€œå¼‚å¸¸å®‰å…¨â€ï¼Œé€‰æ‹©3ä¸ªå¼‚å¸¸å®‰å…¨ç­‰çº§ä¹‹ä¸€å®æ–½ã€‚

### R30 é€å½»äº†è§£inlineçš„é‡Œé‡Œå¤–å¤–

`inline`æ˜¯C++çš„å…³é”®å­—ï¼Œè¡¨ç¤ºå†…è”å‡½æ•°ã€‚`ç›´æ¥åœ¨å¯¹åº”ä½ç½®å±•å¼€ä»£ç `ï¼Œå…å»å‡½æ•°è°ƒç”¨çš„å¼€é”€ï¼Œéš¾ä»¥é¿å… â€œ**ä»£ç è†¨èƒ€**â€é—®é¢˜ã€‚

ä½¿ç”¨inlineæ—¶åº”è¯¥æ³¨æ„ä»¥ä¸‹é—®é¢˜ï¼š
- **inlineåªæ˜¯å¯¹ç¼–è¯‘å™¨çš„ç”³è¯·**
  inlineåªæ˜¯å¯¹ç¼–è¯‘å™¨çš„ç”³è¯·/å»ºè®®ï¼Œä¸æ˜¯å¼ºåˆ¶å‘½ä»¤ï¼Œ**ç¼–è¯‘å™¨æœ‰æƒåˆ©** å¯¹å…¶è®¤ä¸ºä¸é€‚åˆinlineçš„å‡½æ•°**æ‹’ç»**inlineã€‚ ï¼ˆåŸä¹¦è¯´ï¼šå¦‚æœç¼–è¯‘å™¨æ‹’ç»ï¼Œé€šå¸¸å®ƒä¼šç»™å‡ºwarningä¿¡æ¯ã€‚å®é™…æœ¬äººå®æµ‹VS2017æ²¡çœ‹åˆ°ï¼‰
  inlineæœ‰2ç§ç”³è¯·æ–¹å¼ ï¼š
    1. åœ¨å‡½æ•°å®šä¹‰ æ—¶ä½¿ç”¨å…³é”®å­—inline**æ˜¾å¼å¼ºè°ƒ**
    2. å®ç°åœ¨Classå†…çš„æˆå‘˜å‡½æ•°æˆ–friendå‡½æ•°ï¼Œå±äº**éšå¼inline**
- **inlineå’ŒTemplateæ²¡æœ‰ä»»ä½•å¿…ç„¶è”ç³»**
  è™½ç„¶æœ‰ä¸å°‘ç®€çŸ­çš„Templateå‡½æ•°æ˜¯å¸¦æœ‰inlineï¼ˆä¾‹å¦‚ä¸‹æ–¹çš„std::maxï¼‰ï¼Œä½†ä¸æ˜¯å¿…ç„¶ä¸ºä¹‹ï¼Œ**ä¸¤è€…æ²¡æœ‰å› æœå…³ç³»**ã€‚
  ```c++
  template<typename T>
  inline const T& std::max(const T& a, const T& b){ //å¯ä»¥ç”³è¯·inlineï¼Œä½†ä¸æ˜¯å¿…é¡»ç”³è¯·
      return a < b ? b : a;
  }
  ```
- **ç¼–è¯‘å™¨æ‹’ç»å¤æ‚å‡½æ•°è¿›è¡Œinline**
  å¤æ‚å‡½æ•°çš„inlineä¼šå¸¦æ¥è¾ƒä¸¥é‡çš„â€œä»£ç è†¨èƒ€â€é—®é¢˜ï¼Œå¹¶ä¸”å¯èƒ½ä¼šæ›´æ…¢ï¼Œå› ä¸ºå¢åŠ äº†è¿è¡Œæ—¶çš„â€œé¢å¤–æ¢é¡µâ€è¡Œä¸ºï¼Œé™ä½äº†æŒ‡ä»¤cacheå‘½ä¸­ç‡ã€‚
  1. inlineå‡½æ•°å†…ä¸è¦å‡ºç°å¾ªç¯æˆ–é€’å½’
  2. è™šå‡½æ•°ä¹Ÿä¸é€‚åˆåšinline
      å› ä¸ºinlineæ˜¯ç¼–è¯‘æœŸé—´å†³å®šçš„äº‹ï¼Œè€Œè™šå‡½æ•°æ˜¯è¿è¡Œæ—¶å†³å®šçš„äº‹ï¼Œä¸¤è€…å°±ä¸æ˜¯åŒä¸€ä¸ªåœºæ™¯çš„ã€‚
  3. æ„é€ /ææ„å‡½æ•°ä¹Ÿä¸é€‚åˆåšinline
      ç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨æ„é€ /ææ„å‡½æ•°å†…éƒ¨åšç²¾å¦™å¤æ‚çš„å¼‚å¸¸å¤„ç†ï¼›ä»¥åŠåœ¨ç»§æ‰¿ä½“ç³»ä¸‹ï¼ŒBaseç±»å‡½æ•°ä½“åˆ°å¤„inlineè†¨èƒ€ã€‚

- **ä»¥å‡½æ•°æŒ‡é’ˆå½¢å¼çš„è°ƒç”¨é€šå¸¸ä¸èƒ½inline**
  å¯¹ç»å¤§å¤šæ•°ç¼–è¯‘å™¨è€Œè¨€ï¼Œæ˜¯å¦inlineæ˜¯compileé˜¶æ®µå†³å®šçš„äº‹æƒ…ï¼Œå°‘æ•°ç¼–è¯‘å™¨æ”¾åˆ°äº†linké˜¶æ®µã€‚

  è®¨è®ºå¤§å¤šæ•°æƒ…å†µï¼šéœ€è¦åœ¨ç¼–è¯‘æ—¶å¾—çŸ¥inlineçš„æœ¬ä½“ï¼Œè€Œå‡½æ•°æŒ‡é’ˆåŠä¸åˆ°ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š
  ```c++
  inline void f() {...} //å‡è®¾ç¼–è¯‘å™¨æœ‰æ„æ„¿inline â€œå¯¹fçš„è°ƒç”¨â€
  void (* pf)() = f;//pf æ‰§è¡Œf
  ...
  f();     //è¿™ä¸ªè°ƒç”¨å°†è¢«inlinedï¼Œå› ä¸ºæ˜¯ä¸ªæ­£å¸¸è°ƒç”¨
  pf();     //è¿™ä¸ªå¾ˆå¯èƒ½ä¸è¢«inlined
  ```
- **è¿‡åº¦inlineå¯¹è°ƒè¯•å’Œå‘å¸ƒå¸¦æ¥å›°éš¾**
  inlineæ˜¯ä»£ç åµŒå…¥ä¸å±•å¼€ï¼Œè€Œéå‡½æ•°è°ƒç”¨ï¼Œæ‰€ä»¥æŸäº›ç¼–è¯‘å™¨ä¸æ”¯æŒinlineçš„å•æ­¥Debugï¼ˆå°±åƒå®å±•å¼€ä¸€æ ·ä¸æ”¯æŒè°ƒè¯•ï¼‰ï¼›å¦å¤–ï¼Œinlineåªè¦å·²ä¿®æ”¹ï¼Œæ¶‰åŠè°ƒç”¨å®ƒçš„ä»£ç å…¨éƒ½è¦ç¼–è¯‘ï¼Œå¦‚æœæ˜¯non-inlineåˆ™å¯èƒ½åªéœ€è¦é‡æ–°linkå³å¯ã€‚

### R31 å°†æ–‡ä»¶é—´çš„ç¼–è¯‘ä¾èµ–å…³ç³»é™è‡³æœ€ä½

C++çš„Classå®šä¹‰å¼åŒ…æ‹¬äº†æˆå‘˜å˜é‡ï¼Œå‡è®¾æŸæˆå‘˜å˜é‡æ˜¯ç±»å¯¹è±¡`ClassObjA a`ï¼Œå¦‚æœ`ClassObjA`ç±»çš„å†…éƒ¨å®ç°å‘ç”Ÿäº†æ”¹å˜ï¼ˆå“ªæ€•è¿™ä¸ª`ClassObjA.h`å†…åªåœ¨æŸå¤„åŠ äº†ä¸€ä¸ªç©ºæ ¼ ï¼‰ï¼Œé‚£ä¹ˆincludeäº†`ClassObjA.h`çš„æ‰€æœ‰`.h`æ–‡ä»¶`.cpp`æ–‡ä»¶éƒ½ä¼š**é‡æ–°ç¼–è¯‘**ã€‚

ğŸ‘†è¿™å°±æ˜¯ç”±â€œ**ç¼–è¯‘ä¾èµ–**â€å…³ç³»å¸¦æ¥çš„é—®é¢˜ã€‚

ä½¿ç”¨ `PIMPL` æ‰‹æ³•(pointer to implementation)å¯ä»¥å¾ˆå¥½åœ°åˆ†ç¦»å£°æ˜å’Œå®šä¹‰ï¼š
```c++
//Person.hæ–‡ä»¶  ä¸éœ€è¦include "PersonImpl.h"å’Œ"BirthDay.h"
class PersonImpl;
class BirthDay;// å‰ç½®å£°æ˜ä»£æ›¿include
class Person {
public:// æ„é€ å‡½æ•°è¿™é‡Œæ”¾å®ç°æ— æ‰€è°“ï¼Œå› ä¸ºæ˜¯å‡½æ•°æŒ‡é’ˆï¼Œä¸éœ€çŸ¥é“PersonImplæœ¬ä½“å®ç°
    Person(const std::shared_ptr<PersonImpl>& pImpl);//æ„é€ å‡½æ•°çš„å®ç°ä¹Ÿæ”¾åˆ°cppé‡Œå»
    const BirthDay& GetBirthDay();// æ³¨æ„ï¼šè¿™é‡Œåªå£°æ˜ï¼ŒæŠŠå®ç°éƒ¨åˆ†æ”¾åˆ°cppé‡Œ
    std::string GetName();//å®ç°ç»†èŠ‚ç”±pImpl_è½¬å‘å®ç°
private:
    std::shared_ptr<PersonImpl> pImpl_;
};
//Person.cppæ–‡ä»¶
#include "PersonImpl.h" //åœ¨"PersonImpl.h"æ–‡ä»¶å†…includeé‚£ä¸ª"BirthDay.h"
#include "Person.h"
```
æ³¨æ„ï¼šImplç”¨æ³•ï¼Œç›¸å…³çš„å¤´æ–‡ä»¶é‡Œä¸è¦æ”¾ç½®ä»»ä½•å‡½æ•°å®ç°ä»£ç  ã€‚
ä¸Šè¿°åšæ³•å¯ä»¥è®©ä½¿ç”¨Personç±»çš„å®¢æˆ·ä¸éœ€è¦å†å…³å¿ƒPersonImplä»¥åŠBirthDayçš„å®ç°ç»†èŠ‚äº†ï¼Œåšåˆ°äº†â€œæ¥å£ä¸å®ç°åˆ†ç¦»â€ï¼Œå…³é”®ç‚¹åœ¨äºæŠŠâ€œå®šä¹‰çš„ä¾èµ–æ€§â€ æ¢æˆ $\Rightarrow$ â€œ**å£°æ˜çš„ä¾èµ–æ€§**â€ã€‚
è¿™é‡Œçªå‡ºäº†å¦‚ä½•**æœ€å°åŒ–ç¼–è¯‘ä¾èµ–æ€§**çš„æœ¬è´¨ï¼š`è®©å¤´æ–‡ä»¶å°½å¯èƒ½è‡ªæˆ‘æ»¡è¶³`ï¼Œå¦‚æœä¸è¡Œï¼Œä¹Ÿè¦ä¾èµ–äºå…¶ä»–æ–‡ä»¶çš„å£°æ˜å¼è€Œéå®šä¹‰å¼ã€‚

å…·ä½“åˆ°è®¾è®¡ç­–ç•¥ä¸Šï¼Œæœ‰ä»¥ä¸‹å‡ ç§åšæ³•ï¼š
- å¦‚æœèƒ½ç”¨object references æˆ– object pointerså®Œæˆä»»åŠ¡ï¼Œå°±åˆ«ç”¨objects
  å¦‚æœè¦å®šä¹‰æŸç±»å‹çš„objectsï¼Œå°±è¦ä½¿ç”¨å®šä¹‰å¼ï¼ŒæŒ‡é’ˆå’Œåº”ç”¨åˆ™å¯ä»¥åªç”¨å£°æ˜å¼ã€‚

- å°½é‡ä»¥classå£°æ˜å¼æ›¿æ¢classå®šä¹‰å¼
  å‡½æ•°å£°æ˜ç§çš„Classç±»å‹å¯ä»¥åªç”¨å£°æ˜å¼ï¼Œå³ä½¿ä»¥by-object-valueå½¢å¼ä¼ å€¼ä¹Ÿæ˜¯å¦‚æ­¤ã€‚

- ä¸ºå£°æ˜å¼å’Œå®šä¹‰å¼æä¾›ä¸åŒçš„æ–‡ä»¶
  æ¯”å¦‚Dateç±»ï¼Œåˆ†ä¸ºåªåŒ…å«å£°æ˜å¼çš„"Datefwd.h"å’ŒåŒ…å«å®šä¹‰å¼çš„"Date.h"ï¼Œé‚£ä¹ˆä½¿ç”¨æ—¶ç”¨å£°æ˜å¼å¤´æ–‡ä»¶ä»£æ›¿å‰ç½®å£°æ˜ï¼Œåœ¨éœ€è¦åº”ç”¨ä»£ç client.cppé‡Œincludeå®šä¹‰å¼å¤´æ–‡ä»¶ã€‚è¿™ç§æ–¹å¼åœ¨æ ‡å‡†åº“é‡Œé‡‡ç”¨è¾ƒå¤šï¼Œå‚è€ƒ<iosfwd>å’Œ<sstream>,<fstream>,<streambuf>ç­‰ã€‚

{{<admonition Note "By the way">}}
- C/C++å¯ä»¥ä½¿ç”¨ç¼–è¯‘å™¨é¢„å¤„ç†æŒ‡ä»¤<font color=red>`#pragma message`</font>ï¼Œæ‰“å°å‡ºè¯¥æ–‡ä»¶æ˜¯å¦å‚ä¸æ­¤æ¬¡ç¼–è¯‘ï¼Œä»¥åŠå‚ä¸ç¼–è¯‘æ—¶è¢«å“ªä¸ªæ–‡ä»¶æ‰€ä¾èµ–ã€‚
  ```c++
  //æ¯”å¦‚å¯ä»¥åœ¨ testEffective.h æ–‡ä»¶å†…åŠ ä¸Šè¿™å¥ï¼Œå°±èƒ½åœ¨ç¼–è¯‘è¾“å‡ºä¿¡æ¯é‡Œçœ‹åˆ°æ‰“å°ä¿¡æ¯ï¼Œè§‚å¯Ÿåˆ°ä¾èµ–å…³ç³»
  #pragma message("testEffective.h å‚ä¸é‡æ–°ç¼–è¯‘")
  //è¿˜å¯ä»¥ç”¨äºæµ‹è¯•æŸäº›å®æ˜¯å¦çœŸçš„ç”Ÿæ•ˆï¼Œæœ‰æ—¶IDEçš„é«˜äº®æ˜¾ç¤ºä¸å‡†ç¡®è€Œä»¤äººç”Ÿç–‘ã€‚
  ```
- å…³äºå¤´æ–‡ä»¶includeçš„å…¶ä»–ç¼–å†™è§„èŒƒï¼Œå¯ä»¥å‚è€ƒï¼š[Google-C++é£æ ¼æŒ‡å—ï¼š1.å¤´æ–‡ä»¶](https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/headers/#)
{{</admonition>}}


ä½¿ç”¨ <font color>**`Interface Class`**</font> ä¹Ÿèƒ½åšåˆ°æ¥å£å’Œå®ç°çš„çœŸæ­£åˆ†ç¦»ï¼š

è¿™ç§æ–¹å¼å¸¸è§äºè¾“å‡ºåŠ¨æ€åº“ç»™åˆ°å®¢æˆ·ä½¿ç”¨ï¼Œå®¢æˆ·èƒ½è§åˆ°æ¥å£å®šä¹‰å’Œä½¿ç”¨ï¼Œä½†æ— æ³•çœ‹åˆ°å†…éƒ¨å®ç°ã€‚

ç”¨æ³•è¾ƒä¸ºå¸¸è§ï¼Œä¸èµ˜è¿°ï¼Œç›´æ¥**show-code**ï¼š

```c++
//VirtualPerson.h   //å’Œ libæ–‡ä»¶ä¸€èµ·æä¾›ç»™åˆ°å®¢æˆ·
class VirtualPerson {
public: //createçš„è¿”å›å€¼è¿˜å¯ä»¥æ ¹æ®éœ€æ±‚ï¼Œæ¢æˆRAIIçš„æ™ºèƒ½æŒ‡é’ˆ
    static VirtualPerson * create(int level, int salary);
    virtual int Level() = 0;
    virtual int Salary() = 0;
    virtual ~VirtualPerson();// avoid memory leak
};
//VirtualPerson.cpp  //æºç ä¸æä¾›ç»™å®¢æˆ·ï¼Œè€Œæ˜¯ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶ libæ–‡ä»¶
VirtualPerson* VirtualPerson::create(int level, int salary) {
    if (level == 3) { //å·¥å‚æ–¹æ³•ï¼Œè¿˜å¯ä»¥ç”Ÿæˆå…¶ä»–å­ç±»
        return new Engineer(level, salary);
    }
    return nullptr;
}
VirtualPerson::~VirtualPerson() { }
// Engineer.h  //Engineerä¹Ÿæ˜¯å‚ä¸ç¼–è¯‘åˆ° libæ–‡ä»¶ä¸­
class Engineer: public VirtualPerson {
public:
    Engineer(int level,int salary);
    virtual int Level() ;
    virtual int Salary() ;
private:
    int level_ = 3;
    int salary_ = 0;
};
```

## CH6. ç»§æ‰¿ä¸é¢å‘å¯¹è±¡è®¾è®¡

### R32 ç¡®å®šä½ çš„publicç»§æ‰¿å¡‘é€ å‡ºis-aå…³ç³»















ref:</br>
[1]. https://blog.csdn.net/cltcj/category_12098441.html</br>
[2]. https://kissingfire123.github.io/2022/02/14_effective-c-%E4%B9%8B%E9%98%85%E8%AF%BB%E6%80%BB%E7%BB%93%E4%B8%89/</br>

---

> ä½œè€…: [Jian YE](https://github.com/jianye0428)  
> URL: https://jianye0428.github.io/posts/partthree/  

