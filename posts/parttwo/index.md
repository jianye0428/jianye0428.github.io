# Effective C++ (ç¬¬3ç‰ˆ) ç²¾è¯»æ€»ç»“ [2]


<!-- {{< admonition quote "quote" false >}}
note abstract info tip success question warning failure danger bug example quote
{{< /admonition >}} -->

<!--more-->
# å‰è¨€

> Effective-C++æ€»ç»“ç³»åˆ—åˆ†ä¸ºå››éƒ¨åˆ†ï¼Œæœ¬æ–‡ä¸ºç¬¬äºŒéƒ¨åˆ†ï¼Œæ¶‰åŠåŸä¹¦ç¬¬3~4ç« ï¼Œå†…å®¹èŒƒå›´Rule13~25ã€‚ä¸ºæ–¹ä¾¿ä¹¦å†™ï¼ŒRule13ç®€å†™ä¸ºR13ã€‚

{{< admonition Note "Effective-C++ç³»åˆ—List" false >}}
æœ¬åšå®¢ç«™ç‚¹ç³»åˆ—å†…å®¹å¦‚ä¸‹ï¼š</br>
ğŸ’¡ [Effective C++(ç¬¬3ç‰ˆ)ç²¾è¯»æ€»ç»“(ä¸€)](https://jianye0428.github.io/posts/partone/)</br>
ğŸ’¡ [Effective C++(ç¬¬3ç‰ˆ)ç²¾è¯»æ€»ç»“(äºŒ)](https://jianye0428.github.io/posts/parttwo/)</br>
ğŸ’¡ Effective C++(ç¬¬3ç‰ˆ)ç²¾è¯»æ€»ç»“(ä¸‰)</br>
ğŸ’¡ Effective C++(ç¬¬3ç‰ˆ)ç²¾è¯»æ€»ç»“(å››)</br>
{{< /admonition >}}

ç”±äºåŸä¹¦åœ¨C++11ä¹‹å‰å†™æˆï¼Œæœ‰äº›ç°ä»£C++ç‰¹æ€§ä¸ä¼šæåŠï¼Œæ‰€ä»¥ä¼šæ ¹æ®æœ¬äºº`å¼€å‘ç»éªŒ`æ–°å¢ä¸€äº›ä¸ªäººæ„Ÿæ‚ŸğŸ‘‰`By the way`ç¯èŠ‚ã€‚

## CH3.èµ„æºç®¡ç†

### R13 ä»¥å¯¹è±¡ç®¡ç†èµ„æº

- ä¸ºé˜²æ­¢èµ„æºæ³„éœ²ï¼Œå°½é‡ä½¿ç”¨`RAII`å¯¹è±¡(èµ„æºè·å–å³åˆå§‹åŒ–ï¼ŒResource Acquisition Is Initialization)
  å¦‚æœç”¨è€å¼çš„new-deleteç»„åˆæ‰‹åŠ¨ç®¡ç†èµ„æºï¼Œå¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼Œå¤„ç†ä»£ç ä¸­æœ‰å¤šå¤„return/breakä¹‹ç±»çš„åˆ†æ”¯è¯­å¥ï¼Œæ¯å¤„éƒ½æ‰‹åŠ¨æ·»åŠ deleteå›æ”¶èµ„æºéš¾å…ä¼šæœ‰é—æ¼é£é™©ã€‚
  1. auto_ptr
    æœ¬ä¹¦æåŠçš„æ™ºèƒ½æŒ‡é’ˆå¯¹è±¡`std::auto_ptr`å¯ä»¥åœ¨èµ„æºAåˆå§‹åŒ–åŒ–æ—¶æ¥ç®¡å¯¹è±¡Aï¼Œå¯¹è±¡è„±ç¦»ä½œç”¨åŸŸï¼Œææ„æ—¶é‡Šæ”¾æ¥ç®¡çš„Aã€‚
    ä¸ºé¿å…é‡å¤åˆ é™¤èµ„æºï¼Œ`std::auto_ptrç‰¹æ€§:` é€šè¿‡copyæ„é€ å‡½æ•°æˆ–copy-assignmentæ“ä½œç¬¦ï¼Œæ“ä½œå®ƒä»¬ï¼Œå®ƒä»¬è‡ªèº«ä¼šå¤±å»èµ„æºæ‰€æœ‰æƒï¼Œå˜æˆNULL ï¼

  2. shared_ptr
    ä¸ºè§£å†³ä¸Šè¿°é—®é¢˜ï¼Œåæ¥æ¨å‡ºäº†å¼•ç”¨è®¡æ•°ç®¡ç†èµ„æºï¼Œå³`RCSP(Reference-counting smart poiner)`ï¼Œstd::shared_ptr ã€‚(ä¹¦ä¸­å½“æ—¶è¿˜æ˜¯tr1::shared_ptr)ç‰¹ç‚¹æ˜¯shared_ptråœ¨ä½¿ç”¨copyæ„é€ å‡½æ•°æˆ–copy-assignmentæ“ä½œç¬¦æ—¶ï¼Œä¸ä¼šå¤±å»èµ„æºæ‰€æœ‰æƒï¼Œè€Œæ˜¯è‡ªèº«å¼•ç”¨è®¡æ•°åŠ 1ã€‚
  {{<admonition Note "Note">}}
  - auto_ptrç›®å‰å·²ç»è¢«å¼ƒç”¨ï¼Œè½¬è€Œä½¿ç”¨ std::unique_ptræ¥æŒ‡æ¶‰ç‹¬å èµ„æºçš„æ™ºèƒ½æŒ‡é’ˆï¼Œä¸å¯è¢«å¤åˆ¶å’Œèµ‹å€¼ã€‚

  - shared_ptrå­˜åœ¨çš„é—®é¢˜æ˜¯ç¯å½¢å¾ªç¯åº”ç”¨ï¼Œäº’ç›¸æŒæœ‰å¯¹æ–¹ï¼Œåˆ™æ— æ³•é‡Šæ”¾ï¼Œé’ˆå¯¹è¿™ä¸€é—®é¢˜ï¼Œéœ€è¦å¼•å…¥std::weak_ptræ¥ç ´å±€ã€‚

  - è¿™äº›æ™ºèƒ½æŒ‡é’ˆçš„å¤´æ–‡ä»¶æ”¯æŒï¼š#include <memory>
  {{</admonition>}}

- å¸¸ç”¨çš„RAIIæ–¹å¼å­˜åœ¨çš„é—®é¢˜
ä¸Šè¿°çš„shared_ptræ˜¯**ä¸æ”¯æŒæ•°ç»„èµ„æºçš„é‡Šæ”¾**çš„ï¼Œåœ¨ææ„æ—¶é»˜è®¤è°ƒç”¨deleteï¼Œè€Œä¸æ˜¯delete[] ã€‚å¦‚æœè¦èƒ½é‡Šæ”¾ï¼Œéœ€è¦æ‰‹åŠ¨ä¼ å…¥ææ„å‡½æ•°ã€‚
  ```c++
  std::shared_ptr<Investment> instSpMan(new Investment[5], [](Investment* p) {delete[] p; }); // ä½¿ç”¨lamdaå‡½æ•°ï¼Œè¿˜å¯ä»¥ä¼ å…¥æ™®é€šå‡½æ•°æŒ‡é’ˆ
  std::shared_ptr<Investment[]> instSp(new Investment[5]);// shared_ptré‡è½½äº†[]
  std::unique_ptr<int[]> intUp(new int[5]); // unique_ptré‡è½½äº†[]
  ```
  PS: é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœèƒ½ç”¨vectorä»£æ›¿çš„åœºæ™¯ï¼Œå°±ä¸éœ€è¦è¿™æ ·ä½¿ç”¨å¯¹è±¡æ•°ç»„ã€‚

### R14 åœ¨èµ„æºç®¡ç†ç±»ä¸­å°å¿ƒcopingè¡Œä¸º

å¹¶éæ‰€æœ‰èµ„æºéƒ½æ˜¯å †ä¸Šç®¡ç†(heap-based)ï¼Œæ‰€ä»¥ä¹Ÿæœ‰æ™ºèƒ½æŒ‡é’ˆä¸é€‚åˆçš„åœºæ™¯ï¼Œè¿™æ—¶éœ€è¦è‡ªå·±å®ç°ä¸€ä¸ªèµ„æºç®¡ç†ç±»ã€‚

æ¯”å¦‚æœ‰ä¸ªç±»CMutex ï¼Œåªæœ‰2ä¸ªå‡½æ•°lockå’Œunlockï¼Œå¯ä»¥æ–°å»ºä¸€ä¸ªç®¡ç†ç±»CLockï¼Œæ¥ç®¡ç†Mutexç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š
```c++
class CMutex {/*çœç•¥ç±»å®ç°*/};
void lock(CMutex *mtx) { std::cout << "has lock...\n";/*other operation...*/ }
void unlock(CMutex *mtx) { std::cout << "release lock...\n";/*other operation...*/ }

class CLock {
public:
    explicit CLock(CMutex *mtx) :mtx_(mtx) { lock(mtx_); }
    ~CLock() { unlock(mtx_); }
private: CMutex *mtx_;
};
```
å¦‚æœæ¶‰åŠCLockçš„copingç›¸å…³å‡½æ•°ï¼Œé‚£ä¹ˆæœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š
  - ç¦æ­¢å¤åˆ¶
  å‚è€ƒæœ¬ä¹¦Part1-Rule06ï¼Œç¦æ­¢copingå‡½æ•°çš„ç”Ÿæˆã€‚
  - å¯¹åº•å±‚èµ„æºä½¿ç”¨â€œå¼•ç”¨è®¡æ•°æ³•â€
  ä»¥shared_ptr<CMutex>ä»£æ›¿è£¸æŒ‡é’ˆï¼Œå¹¶ä¸”ä¼ å…¥unlockå‡½æ•°ä½œä¸ºè¯¥æŒ‡é’ˆçš„â€œåˆ é™¤å™¨â€ã€‚
  - å¤åˆ¶åº•éƒ¨èµ„æº
  å³â€œæ·±åº¦æ‹·è´â€ï¼Œå¤åˆ¶èµ„æºç®¡ç†å¯¹è±¡æ—¶ï¼ŒåŒæ—¶å¤åˆ¶å…¶åŒ…è£¹çš„èµ„æºã€‚
  - è½¬ç§»åº•éƒ¨èµ„æºæ‰€æœ‰æƒ
  å³æµ…å¤åˆ¶ï¼Œä¸æ‹·è´åŒ…è£¹çš„èµ„æºï¼Œè€Œæ˜¯è½¬ç§»æ‰€æœ‰æƒï¼Œå’Œå‰æ–‡æåˆ°çš„auto_ptréå¸¸å¥‘åˆã€‚

### R15 åœ¨èµ„æºç®¡ç†ç±»ä¸­æä¾›å¯¹åŸå§‹èµ„æºçš„è®¿é—®

æ™ºèƒ½æŒ‡é’ˆ`auto_ptr`, `unique_ptr`, `shared_ptr`éƒ½æä¾›äº†æ¥å£è®¿é—®åŸå§‹èµ„æºï¼Œæ–¹æ³•åç§°ä¸º`get()`ï¼Œå¯¹ç±»Aèµ„æºå¾—åˆ°è£¸æŒ‡é’ˆ`A*`ã€‚

æ™ºèƒ½æŒ‡é’ˆä¹Ÿé‡è½½äº†æ“ä½œç¬¦`operator ->` å’Œ `operator *` ï¼Œè®¿é—®ç±»æˆå‘˜å‡½æ•°éƒ½å¯ä»¥åƒæ™®é€šæŒ‡é’ˆé‚£æ ·ä½¿ç”¨ã€‚

å¦‚æœè‡ªè¡Œè®¾è®¡èµ„æºç®¡ç†ç±»ï¼Œä¹Ÿè¦åƒä¸Šè¿°çš„æ™ºèƒ½æŒ‡é’ˆé‚£æ ·ï¼Œåšåˆ°èƒ½å¤Ÿè½»æ¾è®¿é—®åŸå§‹èµ„æºã€‚

æŸäº›æƒ…å†µï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨getæˆå‘˜å‡½æ•°**æ˜¾å¼è½¬æ¢**ï¼Œè½¬è€Œä½¿ç”¨**éšå¼ç±»å‹è½¬æ¢**ï¼Œæ–¹ä¾¿å®¢æˆ·è°ƒç”¨:

```c++
class Font{
public:
     // éšå¼è½¬æ¢
  operator FontHandle() const{ return f;}
     // æ˜¾å¼è½¬æ¢
  FontHandle get() const { return f;}
private:
    FontHandle f;
}
```

### R16 æˆå¯¹ä½¿ç”¨newå’Œdeleteæ—¶è¦é‡‡å–ç›¸åŒå½¢å¼

å…ˆçœ‹ä¸€æ®µé”™è¯¯ä»£ç ï¼š
```c++
std::string *stringArray = new std::string[100];
delete stringArray;// undefined behavior,æœªå®šä¹‰è¡Œä¸ºï¼›æœ‰å¯èƒ½åªåˆ é™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ 
```

{{<admonition Note "æ³¨æ„">}}
- new å’Œ deleteå¯¹åº”
- new[] å’Œ delete[]å¯¹åº”
ä¸å¯é—æ¼æˆ–è€…äº¤å‰é”™é…ï¼
{{</admonition>}}

ç®€å•æ¢ç©¶ `delete[]`çš„åŸç†ï¼šå®é™…ä¸Šï¼Œåœ¨ç¼–è¯‘å™¨çš„å®ç°ä¸­ï¼Œå¯¹è±¡æ•°ç»„çš„èµ·å§‹å†…å­˜ä¼šå­˜æ”¾â€œæ•°ç»„é•¿åº¦â€è¿™ä¸€å˜é‡ï¼Œä»¥ä¾¿å‘ŠçŸ¥`delete[]`åº”è¯¥è°ƒç”¨å¤šå°‘æ¬¡ææ„ï¼Œåˆ é™¤å¤šå°‘èµ„æºã€‚

ğŸ‘‰ è°¨æ…å¯¹æ•°ç»„ä½¿ç”¨typedefï¼Œå®¹æ˜“äº§ç”Ÿnew-deleteçš„åŒ¹é…è¯¯è§£ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š

```c++
typedef std::string AddressLines[4];
std::string *pal = new AddressLines;//æ³¨æ„ï¼šè¿™é‡Œå…¶å®å°±æ˜¯ new string[4]
delete pal;     // è¡Œä¸ºæœªå®šä¹‰ï¼ï¼
delete [] pal;  // æ­£è§£ï¼
// è¿™é‡Œå»ºè®®çš„æ›¿ä»£æ–¹æ³•ï¼švector<string>
```

### R17 ä»¥ç‹¬ç«‹è¯­å¥å°†newedå¯¹è±¡ç½®å…¥æ™ºèƒ½æŒ‡é’ˆ

**ä¸è¦å°†ç”³è¯·èµ„æºçš„newè¯­å¥ç›´æ¥å½“ä½œå‡½æ•°å…¥å‚**ï¼Œè€Œæ˜¯åº”è¯¥å…ˆä»¥å•ç‹¬è¯­å¥ç”³è¯·åä¼ å…¥ã€‚

è€ƒè™‘ä¸‹è¿°é—®é¢˜ä»£ç ï¼š
```c++
int priority();
void processWidget(std::shared_ptr<Widget> pw,int pri);
//å‡½æ•°è°ƒç”¨
processWidget(std::shared_ptr<Widget>(new Widget),priority());
```
ä¸Šè¿°ä»£ç ç¬¬4è¡Œï¼Œåœ¨processWidgetå‡½æ•°ä½“æ‰§è¡Œä¹‹å‰ï¼Œè‡³å°‘æœ‰3ä¸ªæ­¥éª¤(å¹¶éä¸¥æ ¼æ¬¡åº)ï¼š

1. æ‰§è¡Œ"new Widget"
2. è°ƒç”¨std::shared_ptrçš„æ„é€ å‡½æ•°
3. è°ƒç”¨priorityå‡½æ•°

C++ç¼–è¯‘å™¨èƒ½ä¿è¯1->2çš„æ¬¡åº(2éœ€è¦1åšå…¥å‚)ï¼Œä½†æ˜¯æ— æ³•ä¿è¯3çš„æ¬¡åºä¸åœ¨1ï¼Œ2ä¹‹é—´ï¼Œå¦‚æœæ­¥éª¤3æŠ›å‡ºå¼‚å¸¸ï¼Œå°†ä¼šç›´æ¥å¯¼è‡´å†…å­˜æ³„æ¼ã€‚æ­£ç¡®ç¤ºä¾‹å¦‚ä¸‹ï¼š
```c++
std::shared_ptr<Widget>  pw(new Widget);
processWidget(pw,priority());
```

## CH4.è®¾è®¡ä¸å£°æ˜

### R18 è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸æ˜“è¢«è¯¯ç”¨

è¦æƒ³è®¾è®¡ä¸€ä¸ªä¸å®¹æ˜“è¯¯ç”¨çš„æ¥å£ï¼Œ**å°±è¦å…ˆè€ƒè™‘ä½¿ç”¨è€…å¯èƒ½çŠ¯ä»€ä¹ˆé”™è¯¯**ã€‚

   - `é¿å…â€œæ¥å£è¯¯ç”¨â€ï¼Œå¯ä»¥å¯¼å…¥æ–°ç±»å‹è¿›è¡Œé™åˆ¶`
      æ¯”å¦‚è®¾è®¡ä¸€ä¸ªDateç±»ï¼Œå‚æ•°ä¼ é€’å°±å¯èƒ½å‡ºé”™ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
      ```c++
      class Date{
      public:
          Date(int month,int day,int year);
      };
      ```
      å®é™…ä½¿ç”¨æ—¶ï¼Œä½¿ç”¨è€…å¯èƒ½å†™å‡º`Date date(30,4,2021)`;è¿™æ ·çš„é”™è¯¯ä»£ç ï¼Œå¦‚ä½•é˜²èŒƒå‘¢ï¼Ÿ
      æ–¹æ³•ä¹‹ä¸€ï¼šå°è£…å‡ºMonth,Day,Yearè¿™3ä¸ªStruct/Classï¼Œä½œä¸ºå‚æ•°å…¥å‚ï¼Œå¹¶**æ·»åŠ æœˆä»½é™åˆ¶**ï¼Œä»£ç ï¼š
      ```c++
      class Month{
      public:
          static Month Jan() { return Month(1);} // ...çœç•¥å…¶ä»–11ä¸ªæœˆä»½
      private:
          int val;
          explicit Month(int m):val(m){} //å¯è¢«class-staticè°ƒç”¨ï¼Œä¸èƒ½è¢«å¤–éƒ¨è°ƒç”¨
      };
      struct Day {explicit Day(int d) :day(d){}    int day;
      };  //çœç•¥ struct Yearå®šä¹‰ï¼Œå’ŒDayç±»ä¼¼
      class Date{
      public:
          Date(const Month& month,const Day& day,const Year& year){}
      };
      ```
      æœ€ç»ˆå®¢æˆ·ä»£ç ä½¿ç”¨çš„æƒ…å†µå¦‚ä¸‹ï¼š
      ```c++
      Date date(Month::Jan(),Day(13),Year(2022));
      ```
      {{<admonition Note "By the way">}}
      C++11 æ”¯æŒå¯¹æšä¸¾çš„å¼ºåŒ–ï¼Œå³ç±»å‹å®‰å…¨çš„`enum class`ï¼Œå®ƒä¸èƒ½éšå¼åœ°è½¬æ¢ä¸ºæ•´æ•°ï¼›ä¹Ÿæ— æ³•ä¸æ•´æ•°æ•°å€¼åšæ¯”è¾ƒã€‚æ­¤å¤„å¯ä»¥è€ƒè™‘å®šä¹‰ä¸€ä¸ªMonthEmæ¥ä»£æ›¿Monthï¼š
      ```c++
      enum  class MonthEm {
      Jan = 1,
      Feb = 2, //... çœç•¥å…¶å®ƒçš„æœˆä»½å®šä¹‰
      };
      // ä¿®æ”¹Dateçš„æ„é€ å‡½æ•°ï¼ŒMonthEmæ¥ä»£æ›¿Month
      Date(const MonthEm& monthEm, const Day& day, const Year& year) {}
      // æ„é€ å¯¹è±¡
      Date date2(MonthEm::Feb, Day(23), Year(2021));
      ```
      {{</admonition>}}
   - `é™åˆ¶ç±»å‹å†…ä»€ä¹ˆäº‹æ˜¯å¯ä¸å¯åšçš„`
      å¸¸è§æ“ä½œæ˜¯åŠ ä¸Šconsté™åˆ¶ï¼Œæ¯”å¦‚â€œä»¥const ä¿®é¥°operator * çš„è¿”å›ç±»å‹â€å¯ä»¥é˜»æ­¢è¿™ä¸ªé”™è¯¯ï¼š
      ```c++
      //æœ¬æ„æ˜¯æƒ³åšæ¯”è¾ƒï¼Œå†™æˆäº†èµ‹å€¼ï¼Œä½†æ˜¯èµ‹ç»™constï¼ŒæŠ¥é”™ï¼
      if (a * b = c)
      ```
   - `æ™ºèƒ½æŒ‡é’ˆä¼ å…¥åˆ é™¤å™¨å¯é¿å…"Cross-dll-problem"`
      std::shared_ptrç®¡ç†èµ„æºæ—¶ï¼Œä¼ å…¥åˆ é™¤å™¨ï¼Œå¯é¿å…åœ¨A-Dllä¸­newï¼Œç»“æœåœ¨å¦ä¸€ä¸ªB-Dllä¸­deleteçš„æƒ…å†µï¼Œè¿™ä¼šå¯¼è‡´Runtime-Errorã€‚

### R19 è®¾è®¡ClassçŠ¹å¦‚è®¾è®¡Type

è®¾è®¡ä¸€ä¸ªä¼˜ç§€çš„Classå¹¶ä¸å®¹æ˜“ï¼Œå¾ˆå¤šC++ä¹¦ç±éƒ½åƒæœ¬ä¹¦ä¸€æ ·æåˆ°â€œCheck-Tableâ€ï¼Œè®¾è®¡Class/Typeå‰ï¼Œé—®è‡ªå·±ä¸€äº›é‡è¦é—®é¢˜ï¼š
- æ–°typeçš„å¯¹è±¡åº”è¯¥å¦‚ä½•è¢«åˆ›å»ºå’Œé”€æ¯ï¼Ÿ
- å¯¹è±¡çš„åˆå§‹åŒ–å’Œèµ‹å€¼è¯¥æœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿ
- æ–°typeçš„å¯¹è±¡å¦‚æœå€¼ä¼ é€’(pass-by-value)ï¼Œæ„å‘³ç€ä»€ä¹ˆï¼Ÿ
  copyæ„é€ å‡½æ•°ç”¨æ¥å®šä¹‰ä¸€ä¸ªtypeçš„å€¼ä¼ é€’å…·ä½“å®ç°ã€‚
- ä»€ä¹ˆæ˜¯æ–°typeçš„â€œåˆæ³•å€¼â€ï¼Ÿ
  æƒ³æ¸…æ¥šçº¦æŸæ¡ä»¶ï¼Œç‰¹åˆ«æ˜¯æ„é€ å‡½æ•°ã€èµ‹å€¼æ“ä½œç¬¦ä»¥åŠ**setter**å‡½æ•°ï¼Œæ¶‰åŠçš„é”™è¯¯æ£€æŸ¥ä¸éæ³•å€¼æ‹¦æˆªã€‚
- æ–°typeéœ€è¦é…åˆæŸä¸ªç»§æ‰¿å›¾è°±å—ï¼Ÿ
  å¦‚æœç»§æ‰¿è‡ªæŸBaseç±»ï¼Œé‚£ä¹ˆå°±ä¼šæ”¶åˆ°virtual,non-virtualå‡½æ•°çš„çº¦æŸï¼›å¦‚æœè¦åšåç»­ç±»çš„åŸºç±»ï¼Œåˆ™è¯¥typeå°±è¦æ³¨æ„**è™šææ„**çš„è®¾è®¡ã€‚
- æ–°typeæ¶‰åŠä»€ä¹ˆæ ·çš„è½¬æ¢ï¼Ÿ
  ä¸å…¶ä»–typeä¹‹é—´å¦‚æœ‰è½¬æ¢éœ€æ±‚ï¼Œåˆ™éœ€è¦è‡ªè¡Œå®ç°ç›¸å…³å‡½æ•°ï¼Œå¯å‚è€ƒ`Rule15`ã€‚
- æ–°typeéœ€è¦æ€æ ·çš„æ“ä½œç¬¦å’Œå‡½æ•°ï¼Ÿ
  ç¡®å®šå“ªäº›æ˜¯memberå‡½æ•°ï¼Œå“ªäº›ä¸æ˜¯ã€‚å‚è€ƒ`Rule23`ï¼Œ`Rule24`ï¼Œ`Rule26`ã€‚
- æ˜¯å¦æœ‰éœ€è¦ç«‹å³é©³å›çš„æ ‡å‡†å‡½æ•°ï¼Ÿ
  æ¯”å¦‚**æ˜¯å¦ç¦æ­¢**copyæ„é€ ï¼Œcopy-assignmentæ“ä½œç¬¦ç­‰å‡½æ•°ï¼Œå¯ä»¥å£°æ˜ä¸ºprivateï¼›æˆ–è€…ä½¿ç”¨C++æ–°ç‰¹æ€§"=delete"ã€‚å‚è€ƒ`Rule6`ã€‚
- æ–°typeæˆå‘˜çš„è®¿é—®å±æ€§æ§åˆ¶ï¼Ÿ
  æˆå‘˜å˜é‡éƒ½åº”ä¸ºprivateï¼Œè€ƒè™‘å…¶ä»–memberå‡½æ•°è¯¥ä¸ºprivate/public/protectedã€‚ä»¥åŠå¯ç”¨å‹å…ƒfriendçš„è€ƒè™‘ã€‚
- ä»€ä¹ˆæ˜¯æ–°typeçš„â€œæœªå£°æ˜æ¥å£â€?
  å‚è€ƒ`Rule29`ã€‚
- æ–°typeæœ‰å¤šä¹ˆä¸€èˆ¬åŒ–ï¼Ÿ
  å¦‚æœæ˜¯ä¸€èˆ¬åŒ–çš„é—®é¢˜å¤„ç†ï¼Œè¯¥è€ƒè™‘æ˜¯å¦è¯¥å®šä¹‰Class-Templateã€‚
- çœŸçš„éœ€è¦ä¸€ä¸ªæ–°typeå—ï¼Ÿ

### R20 ä»¥pass-by-reference-to-constä»£æ›¿pass-by-value

- å°½é‡ä»¥pass-by-reference-to-constä»£æ›¿pass-by-value
  å‰è€…é€šå¸¸æ›´**é«˜æ•ˆ**ï¼Œå¹¶å¯**é¿å…â€œå¯¹è±¡åˆ‡å‰²â€é—®é¢˜**ã€‚
  å¦‚æœå¯¹è±¡å…¥å‚ä»¥å€¼ä¼ é€’ï¼Œå°±ä¼šåœ¨å…¥å‚æ—¶åˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œå‡½æ•°å®Œæˆåä¸´æ—¶å¯¹è±¡ææ„ï¼Œæ¶‰åŠæ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„è°ƒç”¨ï¼Œè¿™äº›éƒ½å¯èƒ½æ˜¯ä¸å°çš„å¼€é”€ï¼
  `å¦‚æœæ˜¯ä»¥const referenceå½¢å¼ï¼Œåˆ™ä¸ä¼šæœ‰ä»»ä½•æ„é€ /ææ„çš„å¼€é”€`ã€‚constçš„ä½œç”¨æ˜¯è®©ä½¿ç”¨è€…æ”¾å¿ƒï¼Œä¸ä¼šæ”¹å˜å…¥å‚çš„å€¼ã€‚
  â€œå¯¹è±¡åˆ‡å‰²"é—®é¢˜ï¼š
    å¦‚æœæ˜¯å€¼ä¼ é€’ï¼ŒDerived-Objä¼ é€’ç»™Base-Paramï¼Œä¼šä¸¢å¤±Derivedç‹¬æœ‰çš„ç‰¹æ€§ï¼Œåªä¿ç•™Baseçš„é‚£éƒ¨åˆ†ã€‚
- å¯¹äºC++å†…ç½®ç±»å‹ï¼Œå€¼ä¼ é€’å¾€å¾€æ›´é«˜æ•ˆ
  ä»C++ç¼–è¯‘å™¨çš„åº•å±‚å®ç°è§’åº¦æ¥çœ‹ï¼Œreferenceså¼•ç”¨å¾€å¾€æ˜¯ä»¥æŒ‡é’ˆçš„å½¢å¼å®ç°ã€‚æ‰€ä»¥å¦‚æœæ˜¯å†…ç½®æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚intç±»å‹ ï¼Œç›´æ¥å€¼ä¼ é€’åè€Œæ•ˆç‡æ›´é«˜ã€‚
  > æ­¤è§„åˆ™è¿˜é€‚ç”¨äºSTLè¿­ä»£å™¨å’Œå‡½æ•°å¯¹è±¡ã€‚

### R21 å¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œä¸è¦éšæ„è¿”å›reference

**ä¸è¦è¿”å›æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘ä»¥ä¸‹å¯¹è±¡**:
- å±€éƒ¨æ ˆå¯¹è±¡(local stack)
  å‡½æ•°å†…éƒ¨æ–°å»ºçš„æ ˆå˜é‡å¯¹è±¡ï¼Œå‡ºäº†å‡½æ•°å°±é¢ä¸´æ¶ˆäº¡ï¼Œä»æŒæœ‰å®ƒçš„å¼•ç”¨/æŒ‡é’ˆï¼Œæ˜¯å…¸å‹çš„æœªå®šä¹‰è¡Œä¸ºã€‚
- å †åˆ†é…å¯¹è±¡(heap allocated)
  å†…éƒ¨newï¼Œç„¶åreturnå‡ºå»ä½¿ç”¨ï¼Œä¸€æ¥ä¼šå¢åŠ å¤–éƒ¨deleteçš„è´Ÿæ‹…ï¼ŒäºŒæ¥å¯èƒ½deleteçš„æœºä¼šéƒ½æ²¡æœ‰ã€‚ä»£ç å¦‚ä¸‹ï¼š
  ```c++
  const Rational& operator*(const Rational& lhs, const Rational& rhs){
    Rational *result = new Rational(lhs.n * rhs.n,lhs.d * rhs.d);
    return *result;
  }
  // å¦‚ä¸‹ä½¿ç”¨è¿ä¹˜ï¼Œåˆ™æ²¡æœ‰deleteçš„æœºä¼š
  Rational w,x,y,z;
  w = x * y * z; // å†…å­˜æ³„æ¼ï¼ï¼ï¼
  ```
  ä¸Šè¿°ä»£ç è¿”å›çš„æ˜¯å¼•ç”¨ï¼Œè¿”å›æŒ‡é’ˆä¹Ÿæ˜¯ä¸€æ ·çš„è´Ÿä½œç”¨ã€‚
- å±€éƒ¨staticå¯¹è±¡(local static)
  å‡½æ•°å†…éƒ¨çš„staticå¯¹è±¡ï¼Œåªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¸”åªæœ‰ä¸€ä»½ï¼Œæœ‰è®°å¿†åŠŸèƒ½ï¼Œå¯ä»¥è¢«æ›´æ–°ã€‚é‚£ä¹ˆä¸‹è¿°ä»£ç å°±ä¼šå‡ºç°é—®é¢˜ï¼š
  ```c++
  const Rational& operator*(const Rational& lhs,const Rational& rhs){
    static Rational result;
  	result = Rational(lhs.n * rhs.n,lhs.d * rhs.d)
    return result; //åœ¨è°ƒç”¨è€…çœ‹æ¥ï¼Œå› ä¸ºæ˜¯å¼•ç”¨ï¼Œæ°¸è¿œåªçœ‹åˆ°ç‹¬ä¸€ä»½çš„resultçš„â€œæœ€æ–°å€¼ â€
  }
  // ä¸‹æ–¹çš„æ¯”è¾ƒæ°¸è¿œéƒ½æ˜¯trueï¼Œæ°¸è¿œèµ°ifåˆ†æ”¯  ï¼ï¼
  Rational a,b,c,d;
  if((a*b) == (c*d)){
    //ä¹˜ç§¯ç›¸ç­‰ï¼Œèµ°ifåˆ†æ”¯
  }else{
    //ä¹˜ç§¯ä¸ç›¸ç­‰ï¼Œèµ°elseåˆ†æ”¯
  }
  ```
{{<admonition Note "Tips">}}
> é‚£æ˜¯ä¸æ˜¯æ°¸è¿œä¸èƒ½ä»¥referenceä½œä¸ºè¿”å›å€¼å‘¢ ï¼Ÿ
> å½“ç„¶ä¸æ˜¯ï¼Œ*thiså¯ä»¥è¿”å›å…¶å¼•ç”¨ï¼Œå‚è€ƒRule10ï¼›æˆ–è€…ç±»æˆå‘˜ä½œä¸ºè¿”å›å€¼æ—¶ï¼Œå¯ä»¥è¿”å›å…¶å¼•ç”¨ï¼Œä½†æœ€å¥½æ˜¯constã€‚
{{</admonition>}}

### R22 å°†æˆå‘˜å˜é‡å£°æ˜ä¸ºprivate

- æˆå‘˜å˜é‡ä¸ºprivateè·å¾—çš„å¥½å¤„

  1. å®¢æˆ·è®¿é—®æ•°æ®çš„ä¸€è‡´æ€§ã€‚éƒ½æ˜¯ç”¨getterå‡½æ•°ï¼ˆéœ€è¦åŠ æ‹¬å·ï¼‰ï¼Œè€Œä¸æ˜¯æ··ç”¨å‡½æ•°è·å–å’Œç›´æ¥è®¿é—®ï¼›
  2. ç»†åŒ–æˆå‘˜å˜é‡çš„è®¿é—®æƒé™ã€‚æ ¹æ®æ˜¯å¦æœ‰getterã€setterå‡½æ•°å¯ä»¥ç²¾å‡†æ§åˆ¶read/write/noneè¿™æ ·çš„ç»†åŒ–ã€‚
  3. ä¿æŒå®ç°å¼¹æ€§ã€‚æ¯”å¦‚è·å–æŸç³»ç»ŸæŒ‡æ ‡ï¼Œå¯ä»¥åœ¨getterå‡½æ•°ä¸­ä¿®æ”¹å„ç§çµæ´»çš„ç­–ç•¥å’Œç®—æ³•ï¼Œè€Œè°ƒç”¨è€…æ„ŸçŸ¥ä¸åˆ°ã€‚
  4. å°è£…æ€§ã€‚å°è£…æ€§æ˜¯æŒ‡â˜ `è¶Šå¤šå‡½æ•°å¯ä»¥è®¿é—®è¯¥æ•°æ®ï¼Œå°è£…æ€§è¶Šä½`ã€‚
    å®¢æˆ·è°ƒç”¨ç«¯æ„ŸçŸ¥ä¸åˆ°classå†…éƒ¨çš„å®ç°ï¼Œè¿™äº›ç¡®å®ä¹Ÿæ˜¯ä¸å¿…æš´éœ²çš„ã€‚å¹¶ä¸”ï¼Œå¦‚æœæ˜¯è¦ä¿®æ”¹æŸä¸ªå˜é‡ï¼Œä½¿ç”¨setterå‡½æ•°ä¹Ÿæ›´æ–¹ä¾¿è°ƒè¯•ï¼Œä¸è‡³äºè¢«éšæ„ä¿®æ”¹ã€‚

- protectedå’Œpublicå·®ä¸å¤šï¼Œéƒ½ä¸å…·å¤‡å°è£…æ€§
  å¦‚æœæŸä¸ªpublic/protectedå˜é‡æƒé™è¢«å–æ¶ˆï¼ˆæ¯”å¦‚æ”¹ä¸ºprivateï¼‰ï¼Œå°†ä¼šå¯¼è‡´å¤§é¢ç§¯çš„ç¼–è¯‘é”™è¯¯ï¼Œèƒ½è®¿é—®çš„å˜æˆunaccessibleï¼Œéœ€è¦å¯¹åº”ä¿®æ”¹è®¸å¤šä»£ç ã€‚

### R23 å®å¯ç”¨non-member,non-friendä»£æ›¿memberå‡½æ•°

- å®é™…ä¸Šï¼Œnon-member/non-friendå‡½æ•°å…·æœ‰æ›´å¤§çš„å°è£…æ€§
  è€ƒè™‘ä¸‹è¿°ä¸€ä¸ªç±»WebBrowserï¼Œmemberå‡½æ•°å’Œnon-memberå‡½æ•°ï¼Œå®é™…ä¸Šï¼Œ**memberå‡½æ•°**WebBrowser::clearEverythingå…·æœ‰å…¶ä»–privateæ•°æ®çš„è®¿é—®æƒé™ï¼Œ**å°è£…æ€§æ˜¯æ›´å·®çš„**ï¼
  ```c++
  class WebBrowser {
  public:
      void clearCache() {/*to clear cache*/}
      void clearHistory() {/*to clear history*/}
      void removeCookies() {/*to clear cookies*/}
      void clearEverything() {
          clearCache();
          clearHistory();
          removeCookies();}
  };
  void clearBrowser(WebBrowser &wb) {
      wb.clearCache();
      wb.clearHistory();
      wb.removeCookies();
  }
  ```
- å·¥ç¨‹ç»“æ„å®‰æ’
  å¯¹äºä¸Šè¿°WebBrowserçš„ä¾‹å­ï¼Œnon-memberå‡½æ•°æ”¾å“ªé‡Œå‘¢ï¼Œé™¤äº†å¯ä»¥æ˜¯å…¶ä»–classçš„memberå‡½æ•°ï¼Œæ›´é€‚ç”¨è‡ªç„¶çš„ç­”æ¡ˆæ˜¯ç”¨`namespaceåŒ…è£¹èµ·æ¥`ã€‚ä»£ç å¦‚ä¸‹ï¼š
  ```c++
  namespace WebBrowserStuff{
    class WebBrowser {};
    void clearBrowser(WebBrowser &wb);
  }
  ```
  æ³¨æ„ï¼š`namespaceå¯ä»¥è·¨è¶Šå¤šä¸ªæºç æ–‡ä»¶ï¼Œè€Œclassä¸èƒ½`ã€‚
  **é€šå¸¸çš„ç»„ç»‡æ–¹å¼**ï¼šå¤šä¸ª.hå¤´æ–‡ä»¶éƒ½ä½¿ç”¨åŒä¸€ä¸ªnamespaceï¼Œç®¡ç†ä¸åŒçš„åŠŸèƒ½æ¨¡å—ã€‚é™¤äº†è®©æ¨¡å—æ›´æ¸…æ™°ï¼Œè¿˜èƒ½é™ä½ä¸å¿…è¦çš„ç¼–è¯‘ä¾èµ–å…³ç³»ã€‚
- å¯¹äºprivateæ•°æ®ï¼Œmemberå’Œfriendå‡½æ•°å…·æœ‰ç›¸åŒçš„è®¿é—®æƒé™
  åŸºäºæ­¤ï¼Œè¿™é‡Œè®¨è®ºçš„å°è£…æ€§ä¸åœ¨äºmemberä¸å¦ï¼Œè€Œæ˜¯memberå’Œnon-member ï¼Œnon-friendå‡½æ•°ä¹‹é—´ã€‚

### R24 è‹¥æ‰€æœ‰å‚æ•°çš†éœ€ç±»å‹è½¬æ¢ï¼Œè¯·é‡‡ç”¨non-member

æ ‡é¢˜éœ€æ˜æ™°ï¼šæ‰€æœ‰å‚æ•°ï¼Œæ˜¯æŒ‡**åŒ…å«äº†è¢«thisæŒ‡é’ˆæ‰€æŒ‡å‘çš„é‚£ä¸ªéšå«å‚æ•°**ï¼ˆnon-explicitæ„é€ å‡½æ•°è°ƒç”¨éšå¼ç±»å‹è½¬æ¢æ—¶ï¼‰ã€‚

**åº”å¯¹å…·ä½“åœºæ™¯**ï¼šæ„é€ å‡½æ•°å…è®¸éšå¼ç±»å‹è½¬æ¢ï¼Œä¸”éœ€è¦è¿™ä¸ªæ„é€ å¥½çš„å¯¹è±¡ç«‹å³è°ƒç”¨æŸmemberå‡½æ•°foo(æ¯”å¦‚operatorå‡½æ•°)ï¼Œæ­¤æ—¶è¿™ä¸ªfooå‡½æ•°åº”è¯¥æ”¹ä¸ºnon-memberçš„fooå‡½æ•°ã€‚

è€ƒè™‘ä¸€ä¸ªæœ‰ç†æ•°ç±»Rationalï¼Œå…è®¸éšå¼ç±»å‹è½¬æ¢æ„é€ ï¼ˆå³non-explicitï¼‰ï¼Œå¦‚æœ`operator*`æ˜¯memberå‡½æ•°åˆ™ä¼šå‡ºç°é—®é¢˜ã€‚Rationalç±»å®ç°ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```c++
class Rational {
public:
    Rational(int numerator = 0, int denominator = 1)
        :numerator_(numerator), denominator_(denominator) {}
    const Rational operator* (const Rational& rhs)const {
        return Rational(numerator_*rhs.numerator_, denominator_*rhs.denominator_);
    }
    int numerator()const  { return numerator_; }
    int denominator()const { return denominator_; }
private:
    int numerator_ = 0;
    int denominator_ = 1;
};
```
ä¸Šè¿°ä»£ç å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸èƒ½æ··åˆè¿ç®—ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š
```c++
Rational rat(2, 5);
Rational rat3Tm = rat * 3;   //èƒ½æˆåŠŸè°ƒç”¨member-operator*
Rational rat3Tm2 = 3 * rat;  //ç¼–è¯‘æŠ¥é”™ï¼ï¼ï¼ æœ¬èŠ‚çš„åœºæ™¯å°±åœ¨äºæ­¤.
```

å¦‚æœè¦è®©è¿™ç§æ··åˆè¿ç®—æ— éšœç¢ï¼ŒæŠŠ`operator*`å‡½æ•°æ”¹æˆnon-memberå³å¯ï¼Œæ³¨æ„è¦**åˆ æ‰åŸæ¥memberå†…çš„`operator*`**ï¼Œä¸èƒ½åŒæ—¶å­˜åœ¨è¿™2ä¸ªoperator*ã€‚
```c++
class Rational {
    //... æ³¨æ„ï¼Œè¦åˆ é™¤ç±»å†…çš„memberå‡½æ•°operator*
};
const Rational operator* (const Rational& lhs, const Rational& rhs) {
        return Rational(lhs.numerator() * rhs.numerator(), lhs.denominator() * rhs.denominator());
}
```

### R25 è€ƒè™‘å†™ä¸€ä¸ªä¸æŠ›å¼‚å¸¸çš„swapå‡½æ•°

- å½“ std::swapå¯¹æŸä¸ªç±»å‹æ•ˆç‡ä¸é«˜æ—¶ï¼Œæä¾›ä¸€ä¸ªswapæˆå‘˜å‡½æ•°ï¼Œä¸”è¯¥swapä¸æŠ›å¼‚å¸¸
  å…ˆçœ‹ä¸€ä¸‹æ•ˆç‡ä¸é«˜çš„std::swapå®ç°ï¼š
  ```c++
  namespace std {
    template<typename T>  //std::swapçš„å…¸å‹å®ç°
    void swap(T& a,T& b) { //ç½®æ¢ a å’Œ b çš„å€¼
      T temp(a);   //è‹¥Tæ˜¯classï¼Œæ­¤å¤„è°ƒç”¨copyæ„é€ å‡½æ•°
      a = b;       //è‹¥Tæ˜¯classï¼Œæ­¤å¤„è°ƒç”¨copy assignmentæ“ä½œç¬¦
      b = temp;
	  }
  }
  ```
  è€ƒè™‘è¿™æ ·çš„ä½¿ç”¨åœºæ™¯ï¼šéœ€è¦swapä¸€ä¸ª"pimplæ‰‹æ³•â€(pointer to implementation)å®ç°çš„ç±»ï¼Œè¿™ç§ä¼ ç»Ÿçš„std::swapå¿…ç„¶æ˜¯æ•ˆç‡ä¸é«˜(æ·±å¤åˆ¶implç±»çš„æ•°æ®è€—æ—¶è¾ƒé•¿)ã€‚
  ```c++
  class WidgetSwImpl {
  private:
      int a, b, c;
      std::vector<double> v; //å¾ˆå¤§çš„vector,æ„å‘³ç€å¤åˆ¶æ—¶é—´å¾ˆé•¿
  };
  class WidgetSw {
  public:
      WidgetSw(WidgetSwImpl* pImpl) :pImpl_(pImpl) {}
      WidgetSw(const WidgetSw& rhs) {/*å…¶ä»–copy&initialæ“ä½œ*/}
      WidgetSw& operator=(const WidgetSw& rhs) {
          *pImpl_ = *(rhs.pImpl_);
      }
      void swap(WidgetSw& other) { //public-memberå‡½æ•°swap
          using std::swap;   //ä»¤std::swapåœ¨æ­¤å‡½æ•°å¯ç”¨
          swap(pImpl_,other.pImpl_);
      }
  private:
      WidgetSwImpl* pImpl_ = nullptr;
  };
  ```
  è°ƒç”¨æ—¶ä»£ç å¦‚ä¸‹ï¼š
  ```c++
  WidgetSw wSw1(new WidgetSwImpl);
  WidgetSw wSw2(new WidgetSwImpl);
  wSw1.swap(wSw2); //æˆåŠŸè¿è¡Œ
  ```
- å¦‚æœæä¾›äº†member swapï¼Œéœ€æä¾›ä¸€ä¸ªnon-memberçš„swapè°ƒç”¨å‰è€…
  æ³¨æ„ï¼Œå…¶å®ä¸Šè¿°swapæˆå‘˜å‡½æ•°ä½¿ç”¨èµ·æ¥ä¸ç®—ç›´è§‚å’Œç»Ÿä¸€ï¼Œå¯ä»¥å…¨ç‰¹åŒ–std::swapè®©ä½¿ç”¨æ›´ç›´è§‚æ–¹ä¾¿ï¼Œä»£ç å¦‚ä¸‹ï¼š
  ```c++
  namespace std {
    template<>
    void swap<WidgetSw>(WidgetSw& a, WidgetSw& b) {
        a.swap(b);
    }
  }
  // å®¢æˆ·ç«¯åº”ç”¨ä»£ç å¯ä»¥å¦‚ä¸‹è°ƒç”¨
  // æ³¨æ„ï¼Œä¸åº”è¯¥ï¼Œä¹Ÿæ²¡å¿…è¦åŠ  std::ï¼Œä¼šé™åˆ¶ç¼–è¯‘å™¨åªä½¿ç”¨stdå‘½åç©ºé—´çš„swap
  swap(wSw1,wSw2);//ç¼–è¯‘å™¨ä¼šä¼˜å…ˆæŒ‘ä¸­å…¨ç‰¹åŒ–ç‰ˆæœ¬çš„std::swap
  ```
- å¦‚æœæ˜¯Class-Templateï¼Œåˆ™ä¸è¦ç‰¹åŒ–stdå‘½åç©ºé—´çš„swapï¼Œè€Œæ˜¯ç§»åˆ°å…¶å®ƒå‘½åç©ºé—´
  ```c++
  namespace WidgetStuff{
    template<typename T>
    class WidgetSw{ /*çœç•¥ç±»å®šä¹‰*/} // ç±»å†…å«æœ‰swapæˆå‘˜å‡½æ•°
    template<typename T>
    void swap(WidgetSw<T>& a, WidgetSw<T>& b) {
      a.swap(b);
    }
  }
  ```
  {{<admonition Note "Notice">}}
  - stdå‘½åç©ºé—´çš„å‡½æ•°ä¸è¦å°è¯•é‡è½½ï¼Œä¹Ÿä¸è¦å¢åŠ ä»»ä½•æ–°ä¸œè¥¿
  - C++åªå…è®¸å¯¹`Class-Template`ç›´æ¥åç‰¹åŒ–ï¼Œä¸èƒ½å¯¹`Function-Template`åç‰¹åŒ–(å‡½æ•°æ¨¡æ¿å¯ä»¥é€šè¿‡é‡è½½é—´æ¥å®ç°â€œåç‰¹åŒ–â€çš„ä½œç”¨)
  - **æˆå‘˜ç‰ˆswapç»å¯¹ä¸è¦æŠ›å‡ºå¼‚å¸¸**ï¼Œéæˆå‘˜swapå¯ä»¥(å› ä¸ºæˆå‘˜swapçš„ä¸€ä¸ªæœ€å¥½åº”ç”¨å°±æ˜¯æä¾›å¼‚å¸¸å®‰å…¨æ€§)
  {{</admonition>}}

ref:</br>
[1]. https://blog.csdn.net/cltcj/category_12098441.html</br>
[2]. https://kissingfire123.github.io/2022/01/11_effective-c-%e4%b9%8b%e5%ad%a6%e4%b9%a0%e6%80%bb%e7%bb%93%e4%ba%8c/</br>


---

> ä½œè€…: [Jian YE](https://github.com/jianye0428)  
> URL: https://jianye0428.github.io/posts/parttwo/  

