<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>CMake 笔记 | [41] 安装项目 - yejian's blog</title><meta name=author content="Jian YE">
<meta name=author-link content="https://github.com/jianye0428"><meta name=description content="一、导言 导言 这篇笔记，将通过一个小项目来介绍一些基本概念，这些概念也将在后面的笔记中使用。安装文件、库和可执行文件是一项非常基础的任务，但是也可能会带来一些问题。通过这篇笔记，展示如何使用CMake有效地避开这些问题。 二、项目结构 1 2 3 4 5 6 7 8 9 . ├── CMakeLists.txt ├── src │ ├── CMakeLists.txt │ ├── hello_world.cpp │ ├── message.cpp │ └"><meta name=keywords content='CMake'><meta itemprop=name content="CMake 笔记 | [41] 安装项目"><meta itemprop=description content="一、导言 导言 这篇笔记，将通过一个小项目来介绍一些基本概念，这些概念也将在后面的笔记中使用。安装文件、库和可执行文件是一项非常基础的任务，但是也可能会带来一些问题。通过这篇笔记，展示如何使用CMake有效地避开这些问题。 二、项目结构 1 2 3 4 5 6 7 8 9 . ├── CMakeLists.txt ├── src │ ├── CMakeLists.txt │ ├── hello_world.cpp │ ├── message.cpp │ └"><meta itemprop=datePublished content="2024-02-01T13:11:05+08:00"><meta itemprop=dateModified content="2024-02-02T10:39:29+08:00"><meta itemprop=wordCount content="5063"><meta itemprop=image content="https://jianye0428.github.io/images/favicon/jian_icon.png"><meta itemprop=keywords content="CMake,"><meta property="og:title" content="CMake 笔记 | [41] 安装项目"><meta property="og:description" content="一、导言 导言 这篇笔记，将通过一个小项目来介绍一些基本概念，这些概念也将在后面的笔记中使用。安装文件、库和可执行文件是一项非常基础的任务，但是也可能会带来一些问题。通过这篇笔记，展示如何使用CMake有效地避开这些问题。 二、项目结构 1 2 3 4 5 6 7 8 9 . ├── CMakeLists.txt ├── src │ ├── CMakeLists.txt │ ├── hello_world.cpp │ ├── message.cpp │ └"><meta property="og:type" content="article"><meta property="og:url" content="https://jianye0428.github.io/posts/cmake_note_41/"><meta property="og:image" content="https://jianye0428.github.io/images/favicon/jian_icon.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-01T13:11:05+08:00"><meta property="article:modified_time" content="2024-02-02T10:39:29+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jianye0428.github.io/images/favicon/jian_icon.png"><meta name=twitter:title content="CMake 笔记 | [41] 安装项目"><meta name=twitter:description content="一、导言 导言 这篇笔记，将通过一个小项目来介绍一些基本概念，这些概念也将在后面的笔记中使用。安装文件、库和可执行文件是一项非常基础的任务，但是也可能会带来一些问题。通过这篇笔记，展示如何使用CMake有效地避开这些问题。 二、项目结构 1 2 3 4 5 6 7 8 9 . ├── CMakeLists.txt ├── src │ ├── CMakeLists.txt │ ├── hello_world.cpp │ ├── message.cpp │ └"><meta name=application-name content="菠菜阿九时代峰峻啊；数量可根据；"><meta name=apple-mobile-web-app-title content="菠菜阿九时代峰峻啊；数量可根据；"><meta name=theme-color data-light=#ffffff data-dark=#252627 content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/png href=/jian_icon.png><link rel=icon type=image/png sizes=32x32 href=/jian_icon.png><link rel=icon type=image/png sizes=16x16 href=/jian_icon.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://jianye0428.github.io/posts/cmake_note_41/><link rel=prev href=https://jianye0428.github.io/posts/cmake_note_40/><link rel=next href=https://jianye0428.github.io/posts/cmake_note_42/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"CMake 笔记 | [41] 安装项目","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/jianye0428.github.io\/posts\/cmake_note_41\/"},"image":["https:\/\/jianye0428.github.io\/images\/favicon\/jian_icon.png"],"genre":"posts","keywords":"CMake","wordcount":5063,"url":"https:\/\/jianye0428.github.io\/posts\/cmake_note_41\/","datePublished":"2024-02-01T13:11:05+08:00","dateModified":"2024-02-02T10:39:29+08:00","publisher":{"@type":"Organization","name":"Jian YE","logo":"https:\/\/jianye0428.github.io\/images\/favicon\/jian_icon.png"},"author":{"@type":"Person","name":"Jian YE"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=wide><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title="yejian's blog"><img loading=lazy src=/images/favicon/jian_icon.png srcset="/images/favicon/jian_icon.png, /images/favicon/jian_icon.png 1.5x, /images/favicon/jian_icon.png 2x" sizes=auto data-title="yejian's blog" data-alt="yejian's blog" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Jian's Blog</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 所有文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/friends/ title=友情链接><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/guestbook/><i class="fa-solid fa-comments fa-fw fa-sm" aria-hidden=true></i> 留言</a></li><li class="menu-item has-children"><a class=menu-link href=/about/><i class="fa-solid fa-user-tie fa-fw fa-sm" aria-hidden=true></i> 关于</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/projects/_index.zh-tw/ title=項目><i class="fa-solid fa-laptop-code fa-fw fa-sm" aria-hidden=true></i> 我的項目</a></li><li class=menu-item><a class=menu-link href=/projects/ title=项目><i class="fa-solid fa-laptop-code fa-fw fa-sm" aria-hidden=true></i> 我的项目</a></li></ul></li><li class=menu-item><a class=menu-link href=/pilot/><i class="fa-solid fa-user-tie fa-fw fa-sm" aria-hidden=true></i> 导航</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="yejian's blog"><img loading=lazy src=/images/favicon/jian_icon.png srcset="/images/favicon/jian_icon.png, /images/favicon/jian_icon.png 1.5x, /images/favicon/jian_icon.png 2x" sizes=auto data-title=/images/favicon/jian_icon.png data-alt=/images/favicon/jian_icon.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Jian's Blog</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 所有文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/friends/ title=友情链接><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/guestbook/><i class="fa-solid fa-comments fa-fw fa-sm" aria-hidden=true></i> 留言</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/about/><i class="fa-solid fa-user-tie fa-fw fa-sm" aria-hidden=true></i> 关于</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/projects/_index.zh-tw/ title=項目><i class="fa-solid fa-laptop-code fa-fw fa-sm" aria-hidden=true></i> 我的項目</a></li><li class=menu-item><a class=menu-link href=/projects/ title=项目><i class="fa-solid fa-laptop-code fa-fw fa-sm" aria-hidden=true></i> 我的项目</a></li></ul></li><li class=menu-item><a class=menu-link href=/pilot/><i class="fa-solid fa-user-tie fa-fw fa-sm" aria-hidden=true></i> 导航</a></li><li class="menu-item text-center"><a class=menu-link href=https://github.com/jianye0428/ title=GitHub rel="noopener noreferrer" target=_blank><i class='fa-brands fa-github fa-fw' aria-hidden=true></i></a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class="container container-reverse"><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>CMake 笔记 | [41] 安装项目</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/jianye0428 title=作者 target=_blank rel="external nofollow noopener noreferrer author" class=author><img loading=lazy src="https://gravatar.loli.net/avatar/75a41975a5281767bf6bdba838de4238?s=32&amp;d=mp" srcset="https://gravatar.loli.net/avatar/75a41975a5281767bf6bdba838de4238?s=32&amp;d=mp, https://gravatar.loli.net/avatar/75a41975a5281767bf6bdba838de4238?s=32&amp;d=mp 1.5x, https://gravatar.loli.net/avatar/75a41975a5281767bf6bdba838de4238?s=32&amp;d=mp 2x" sizes=auto data-title="Jian YE" data-alt="Jian YE" class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;Jian YE</a></span>
<span class=post-category>收录于 <a href=/categories/c++/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> C++</a></span></div><div class=post-meta-line><span title="发布于 2024-02-01 13:11:05"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2024-02-01>2024-02-01</time></span>&nbsp;<span title="更新于 2024-02-02 10:39:29"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2024-02-02>2024-02-02</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 5063 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 11 分钟</span>&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title="CMake 笔记 | [41] 安装项目">
<i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_page_pv>-</span>&nbsp;次阅读
</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#一导言>一、导言</a></li><li><a href=#二项目结构>二、项目结构</a></li><li><a href=#三相关源码>三、相关源码</a></li><li><a href=#四结果展示>四、结果展示</a></li><li><a href=#五补充内容>五、补充内容</a></li></ul></nav></div></div><div class=content id=content data-end-flag=（完）><h2 id=一导言>一、导言</h2><div class="details admonition quote"><div class="details-summary admonition-title"><i class="icon fa-solid fa-quote-right fa-fw" aria-hidden=true></i>导言<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><strong>这篇笔记，将通过一个小项目来介绍一些基本概念，这些概念也将在后面的笔记中使用。安装文件、库和可执行文件是一项非常基础的任务，但是也可能会带来一些问题。通过这篇笔记，展示如何使用CMake有效地避开这些问题。</strong></div></div></div><h2 id=二项目结构>二、项目结构</h2><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>├── CMakeLists.txt
</span></span><span class=line><span class=cl>├── src
</span></span><span class=line><span class=cl>│   ├── CMakeLists.txt
</span></span><span class=line><span class=cl>│   ├── hello_world.cpp
</span></span><span class=line><span class=cl>│   ├── message.cpp
</span></span><span class=line><span class=cl>│   └── message.hpp
</span></span><span class=line><span class=cl>└── <span class=nb>test</span>
</span></span><span class=line><span class=cl>    └── CMakeLists.txt</span></span></code></pre></td></tr></table></div></div><p>项目地址</p><blockquote><p><a href=https://gitee.com/jiangli01/tutorials/tree/master/cmake-tutorial/chapter9/01 target=_blank rel="external nofollow noopener noreferrer">https://gitee.com/jiangli01/tutorials/tree/master/cmake-tutorial/chapter9/01<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></p></blockquote><h2 id=三相关源码>三、相关源码</h2><p><strong>src/CMakeLists.txt</strong></p><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp># Search for pkg-config and UUID
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>find_package</span><span class=p>(</span><span class=n>PkgConfig</span> <span class=n>QUIET</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>PKG_CONFIG_FOUND</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>pkg_search_module</span><span class=p>(</span><span class=n>UUID</span> <span class=n>uuid</span> <span class=n>IMPORTED_TARGET</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span><span class=p>(</span><span class=n>TARGET</span> <span class=n>PkgConfig</span><span class=o>::</span><span class=n>UUID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=s>&#34;Found libuuid&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>set</span><span class=p>(</span><span class=n>UUID_FOUND</span> <span class=n>TRUE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>endif</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>endif</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp># SHARED library
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>add_library</span><span class=p>(</span><span class=n>message</span><span class=o>-</span><span class=n>shared</span> <span class=n>SHARED</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>target_sources</span><span class=p>(</span><span class=n>message</span><span class=o>-</span><span class=n>shared</span>
</span></span><span class=line><span class=cl>  <span class=n>PRIVATE</span>
</span></span><span class=line><span class=cl>    <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_CURRENT_LIST_DIR</span><span class=p>}</span><span class=o>/</span><span class=n>message</span><span class=p>.</span><span class=n>cpp</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>target_compile_definitions</span><span class=p>(</span><span class=n>message</span><span class=o>-</span><span class=n>shared</span>
</span></span><span class=line><span class=cl>  <span class=n>PUBLIC</span>
</span></span><span class=line><span class=cl>    <span class=err>$</span><span class=o>&lt;</span><span class=err>$</span><span class=o>&lt;</span><span class=nl>BOOL</span><span class=p>:</span><span class=err>$</span><span class=p>{</span><span class=n>UUID_FOUND</span><span class=p>}</span><span class=o>&gt;:</span><span class=n>HAVE_UUID</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>target_link_libraries</span><span class=p>(</span><span class=n>message</span><span class=o>-</span><span class=n>shared</span>
</span></span><span class=line><span class=cl>  <span class=n>PUBLIC</span>
</span></span><span class=line><span class=cl>    <span class=err>$</span><span class=o>&lt;</span><span class=err>$</span><span class=o>&lt;</span><span class=nl>BOOL</span><span class=p>:</span><span class=err>$</span><span class=p>{</span><span class=n>UUID_FOUND</span><span class=p>}</span><span class=o>&gt;:</span><span class=n>PkgConfig</span><span class=o>::</span><span class=n>UUID</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>set_target_properties</span><span class=p>(</span><span class=n>message</span><span class=o>-</span><span class=n>shared</span>
</span></span><span class=line><span class=cl>  <span class=n>PROPERTIES</span>
</span></span><span class=line><span class=cl>    <span class=n>POSITION_INDEPENDENT_CODE</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>SOVERSION</span> <span class=err>$</span><span class=p>{</span><span class=n>PROJECT_VERSION_MAJOR</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>OUTPUT_NAME</span> <span class=s>&#34;message&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>DEBUG_POSTFIX</span> <span class=s>&#34;_d&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>PUBLIC_HEADER</span> <span class=s>&#34;message.hpp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>MACOSX_RPATH</span> <span class=n>ON</span>
</span></span><span class=line><span class=cl>    <span class=n>WINDOWS_EXPORT_ALL_SYMBOLS</span> <span class=n>ON</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>add_executable</span><span class=p>(</span><span class=n>hello</span><span class=o>-</span><span class=n>world_wDSO</span> <span class=n>hello_world</span><span class=p>.</span><span class=n>cpp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>target_link_libraries</span><span class=p>(</span><span class=n>hello</span><span class=o>-</span><span class=n>world_wDSO</span>
</span></span><span class=line><span class=cl>  <span class=n>PUBLIC</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=o>-</span><span class=n>shared</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp># Prepare RPATH
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>file</span><span class=p>(</span><span class=n>RELATIVE_PATH</span> <span class=n>_rel</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_PREFIX</span><span class=p>}</span><span class=o>/</span><span class=err>$</span><span class=p>{</span><span class=n>INSTALL_BINDIR</span><span class=p>}</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_PREFIX</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>APPLE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>set</span><span class=p>(</span><span class=n>_rpath</span> <span class=s>&#34;@loader_path/${_rel}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=n>set</span><span class=p>(</span><span class=n>_rpath</span> <span class=s>&#34;\$ORIGIN/${_rel}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>endif</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>file</span><span class=p>(</span><span class=n>TO_NATIVE_PATH</span> <span class=s>&#34;${_rpath}/${INSTALL_LIBDIR}&#34;</span> <span class=n>message_RPATH</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>set_target_properties</span><span class=p>(</span><span class=n>hello</span><span class=o>-</span><span class=n>world_wDSO</span>
</span></span><span class=line><span class=cl>  <span class=n>PROPERTIES</span>
</span></span><span class=line><span class=cl>    <span class=n>MACOSX_RPATH</span> <span class=n>ON</span>
</span></span><span class=line><span class=cl>    <span class=n>SKIP_BUILD_RPATH</span> <span class=n>OFF</span>
</span></span><span class=line><span class=cl>    <span class=n>BUILD_WITH_INSTALL_RPATH</span> <span class=n>OFF</span>
</span></span><span class=line><span class=cl>    <span class=n>INSTALL_RPATH</span> <span class=s>&#34;${message_RPATH}&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>INSTALL_RPATH_USE_LINK_PATH</span> <span class=n>ON</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp># &lt;&lt;&lt; Install and export targets &gt;&gt;&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=n>install</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=n>TARGETS</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=o>-</span><span class=n>shared</span>
</span></span><span class=line><span class=cl>    <span class=n>hello</span><span class=o>-</span><span class=n>world_wDSO</span>
</span></span><span class=line><span class=cl>  <span class=n>ARCHIVE</span>
</span></span><span class=line><span class=cl>    <span class=n>DESTINATION</span> <span class=err>$</span><span class=p>{</span><span class=n>INSTALL_LIBDIR</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>COMPONENT</span> <span class=n>lib</span>
</span></span><span class=line><span class=cl>  <span class=n>RUNTIME</span>
</span></span><span class=line><span class=cl>    <span class=n>DESTINATION</span> <span class=err>$</span><span class=p>{</span><span class=n>INSTALL_BINDIR</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>COMPONENT</span> <span class=n>bin</span>
</span></span><span class=line><span class=cl>  <span class=n>LIBRARY</span>
</span></span><span class=line><span class=cl>    <span class=n>DESTINATION</span> <span class=err>$</span><span class=p>{</span><span class=n>INSTALL_LIBDIR</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>COMPONENT</span> <span class=n>lib</span>
</span></span><span class=line><span class=cl>  <span class=n>PUBLIC_HEADER</span>
</span></span><span class=line><span class=cl>    <span class=n>DESTINATION</span> <span class=err>$</span><span class=p>{</span><span class=n>INSTALL_INCLUDEDIR</span><span class=p>}</span><span class=o>/</span><span class=n>message</span>
</span></span><span class=line><span class=cl>    <span class=n>COMPONENT</span> <span class=n>dev</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class="details admonition quote"><div class="details-summary admonition-title"><i class="icon fa-solid fa-quote-right fa-fw" aria-hidden=true></i>tips<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><div class=highlight id=id-16><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>target_compile_definitions</span><span class=p>(</span><span class=n>message</span><span class=o>-</span><span class=n>shared</span>
</span></span><span class=line><span class=cl>  <span class=n>PUBLIC</span>
</span></span><span class=line><span class=cl>    <span class=err>$</span><span class=o>&lt;</span><span class=err>$</span><span class=o>&lt;</span><span class=nl>BOOL</span><span class=p>:</span><span class=err>$</span><span class=p>{</span><span class=n>UUID_FOUND</span><span class=p>}</span><span class=o>&gt;:</span><span class=n>HAVE_UUID</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>如果我们找到了三方库<code>UUID</code>的话，该命令会将 <code>HAVE_UUID</code> 编译定义添加到消息共享目标及其依赖库中。</p></div></div></div><div class="details admonition quote"><div class="details-summary admonition-title"><i class="icon fa-solid fa-quote-right fa-fw" aria-hidden=true></i>引用<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p>这段 CMake 脚本使用了 <code>set_target_properties</code> 命令来为 <code>message-shared</code> 这个目标（通常是一个库或可执行文件）设置一系列属性。下面我会用中文解释这些属性的含义：</p><div class=highlight id=id-17><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>set_target_properties</span><span class=p>(</span><span class=n>message</span><span class=o>-</span><span class=n>shared</span>
</span></span><span class=line><span class=cl>  <span class=n>PROPERTIES</span>
</span></span><span class=line><span class=cl>    <span class=n>POSITION_INDEPENDENT_CODE</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>SOVERSION</span> <span class=err>$</span><span class=p>{</span><span class=n>PROJECT_VERSION_MAJOR</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>OUTPUT_NAME</span> <span class=s>&#34;message&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>DEBUG_POSTFIX</span> <span class=s>&#34;_d&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>PUBLIC_HEADER</span> <span class=s>&#34;message.hpp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>MACOSX_RPATH</span> <span class=n>ON</span>
</span></span><span class=line><span class=cl>    <span class=n>WINDOWS_EXPORT_ALL_SYMBOLS</span> <span class=n>ON</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><ol><li><strong><code>POSITION_INDEPENDENT_CODE 1</code></strong>: 设置代码为位置无关代码。这对于创建共享库是重要的，因为它允许代码在内存中的任何位置运行，这对于共享库来说是必需的。</li><li><strong><code>SOVERSION ${PROJECT_VERSION_MAJOR}</code></strong>: 设置共享对象版本号，这里使用的是项目的主版本号。</li><li><strong><code>OUTPUT_NAME "message"</code></strong>: 指定输出的名称。尽管目标名称是 <code>message-shared</code>，在构建时生成的文件将被命名为 <code>message</code>（例如，<code>message.dll</code> 或 <code>message.so</code>）。</li><li><strong><code>DEBUG_POSTFIX "_d"</code></strong>: 为调试版本的输出添加后缀。在构建调试版本时，输出文件的名称会有一个额外的 <code>_d</code> 后缀，有助于区分调试和发布版本。</li><li><strong><code>PUBLIC_HEADER "message.hpp"</code></strong>: 指定公共头文件。</li><li><strong><code>MACOSX_RPATH ON</code></strong>: 在 macOS 系统上启用 RPATH。这是一种动态库查找路径的设置方法，有助于应用程序在运行时找到其依赖的共享库。</li><li><strong><code>WINDOWS_EXPORT_ALL_SYMBOLS ON</code></strong>: 在 Windows 上自动导出所有符号。这对于创建 DLL（动态链接库）特别有用，因为它简化了符号导出的过程。</li></ol></div></div></div><div class="details admonition quote"><div class="details-summary admonition-title"><i class="icon fa-solid fa-quote-right fa-fw" aria-hidden=true></i>引用<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><div class=highlight id=id-18><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>file</span><span class=p>(</span><span class=n>RELATIVE_PATH</span> <span class=n>_rel</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_PREFIX</span><span class=p>}</span><span class=o>/</span><span class=err>$</span><span class=p>{</span><span class=n>INSTALL_BINDIR</span><span class=p>}</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_PREFIX</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>APPLE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>set</span><span class=p>(</span><span class=n>_rpath</span> <span class=s>&#34;@loader_path/${_rel}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=n>set</span><span class=p>(</span><span class=n>_rpath</span> <span class=s>&#34;\$ORIGIN/${_rel}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>endif</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>在这个 CMake 脚本命令中，<code>file(RELATIVE_PATH ...)</code> 用于计算两个路径之间的相对路径。</p><p>这个命令的目的是为了找出 <code>${CMAKE_INSTALL_PREFIX}</code> 相对于 <code>${CMAKE_INSTALL_PREFIX}/${INSTALL_BINDIR}</code> 的相对路径。换句话说，它在寻找从安装的二进制目录（<code>INSTALL_BINDIR</code>）到安装的根目录（<code>CMAKE_INSTALL_PREFIX</code>）的路径。在大多数情况下，这将简单地解析为从二进制目录向上到达根目录的相对路径（比如 <code>../</code> 或者更多级的 <code>../../</code>，取决于 <code>INSTALL_BINDIR</code> 的深度）。</p><p>这种类型的计算在处理安装和打包时非常有用，尤其是当需要处理可移植性和不同系统结构时。通过这样的相对路径设置，可以确保不管你的软件安装在哪里，文件和资源的相互引用都是正确的。</p><p>这段 CMake 脚本代码使用 <code>file(RELATIVE_PATH ...)</code> 命令计算了一个相对路径，并根据操作系统类型（Apple 系统或其他）设置了一个名为 <code>_rpath</code> 的变量，用于指定动态库的运行时搜索路径（RPATH）。下面是详细解释：</p><ol><li><strong><code>if(APPLE)</code></strong> 和 <strong><code>else()</code></strong>: 这两行代码检查当前是否在 Apple 系统（比如 macOS）上进行构建。如果是，在 Apple 系统上使用一种 RPATH 设置方法；如果不是（比如在 Linux 或 Windows 上），使用另一种方法。</li><li><strong><code>set(_rpath "@loader_path/${_rel}")</code></strong>: 在 Apple 系统上，<code>_rpath</code> 被设置为 <code>"@loader_path/${_rel}"</code>。这里的 <code>@loader_path</code> 是一个特殊的标记，它表示加载动态库的可执行文件的位置。这种方法允许动态库在与可执行文件相对的路径中被找到。</li><li><strong><code>set(_rpath "\$ORIGIN/${_rel}")</code></strong>: 在非 Apple 系统上，<code>_rpath</code> 被设置为 <code>"\$ORIGIN/${_rel}"</code>。这里的 <code>$ORIGIN</code> 是一个特殊的标记，它也表示加载动态库的可执行文件的位置。与 Apple 系统的方法类似，它使得动态库可以在相对于可执行文件的路径中被找到。</li></ol></div></div></div><div class="details admonition quote"><div class="details-summary admonition-title"><i class="icon fa-solid fa-quote-right fa-fw" aria-hidden=true></i>引用<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><div class=highlight id=id-19><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>set_target_properties</span><span class=p>(</span><span class=n>hello</span><span class=o>-</span><span class=n>world_wDSO</span>
</span></span><span class=line><span class=cl>  <span class=n>PROPERTIES</span>
</span></span><span class=line><span class=cl>    <span class=n>MACOSX_RPATH</span> <span class=n>ON</span>
</span></span><span class=line><span class=cl>    <span class=n>SKIP_BUILD_RPATH</span> <span class=n>OFF</span>
</span></span><span class=line><span class=cl>    <span class=n>BUILD_WITH_INSTALL_RPATH</span> <span class=n>OFF</span>
</span></span><span class=line><span class=cl>    <span class=n>INSTALL_RPATH</span> <span class=s>&#34;${message_RPATH}&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>INSTALL_RPATH_USE_LINK_PATH</span> <span class=n>ON</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>使用 <code>set_target_properties</code> 命令来为名为 <code>hello-world_wDSO</code> 的目标设置一系列属性。</p><ol><li><strong><code>MACOSX_RPATH ON</code></strong>: 这个选项用于在 macOS 系统上启用 RPATH。这意味着在 macOS 上构建时，CMake 会自动设置运行时路径，这有助于程序在运行时找到其动态库依赖。</li><li><strong><code>SKIP_BUILD_RPATH OFF</code></strong>: 当此选项为 OFF 时，CMake 会在构建阶段使用 RPATH。这样做确保在构建时（例如，当运行测试时），可以找到动态库。</li><li><strong><code>BUILD_WITH_INSTALL_RPATH OFF</code></strong>: 这个选项表示构建时不使用安装后的 RPATH。这意味着构建时和安装后使用的 RPATH 是不同的。通常，构建时的 RPATH 指向构建目录中的库，而安装后的 RPATH 指向安装目录中的库。</li><li><strong><code>INSTALL_RPATH "${message_RPATH}"</code></strong>: 这个选项设置了安装后的 RPATH。<code>${message_RPATH}</code> 是一个变量，它应该在其他地方被定义，并包含了运行时库（比如动态链接库）的路径。这意味着一旦 <code>hello-world_wDSO</code> 被安装，它会使用这个变量指定的路径来查找其运行时依赖。</li><li><strong><code>INSTALL_RPATH_USE_LINK_PATH ON</code></strong>: 当此选项为 ON 时，CMake 会在设置安装后的 RPATH 时考虑目标的链接路径。这意味着安装后的 RPATH 不仅会包括 <code>INSTALL_RPATH</code> 指定的路径，还会包括目标链接时使用的所有路径。这有助于确保运行时能找到所有必需的动态库，尤其是当这些库位于非标准或非默认的位置时。</li></ol><p>这些属性共同确保了 <code>hello-world_wDSO</code> 在构建、安装和运行时能正确地找到其动态链接库依赖。这是在跨平台开发和部署应用程序时非常重要的一部分，尤其是在涉及到动态链接库的情况下。</p></div></div></div><div class="details admonition quote"><div class="details-summary admonition-title"><i class="icon fa-solid fa-quote-right fa-fw" aria-hidden=true></i>引用<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><div class=highlight id=id-20><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>install</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=n>TARGETS</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=o>-</span><span class=n>shared</span>
</span></span><span class=line><span class=cl>    <span class=n>hello</span><span class=o>-</span><span class=n>world_wDSO</span>
</span></span><span class=line><span class=cl>  <span class=n>ARCHIVE</span>
</span></span><span class=line><span class=cl>    <span class=n>DESTINATION</span> <span class=err>$</span><span class=p>{</span><span class=n>INSTALL_LIBDIR</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>COMPONENT</span> <span class=n>lib</span>
</span></span><span class=line><span class=cl>  <span class=n>RUNTIME</span>
</span></span><span class=line><span class=cl>    <span class=n>DESTINATION</span> <span class=err>$</span><span class=p>{</span><span class=n>INSTALL_BINDIR</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>COMPONENT</span> <span class=n>bin</span>
</span></span><span class=line><span class=cl>  <span class=n>LIBRARY</span>
</span></span><span class=line><span class=cl>    <span class=n>DESTINATION</span> <span class=err>$</span><span class=p>{</span><span class=n>INSTALL_LIBDIR</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>COMPONENT</span> <span class=n>lib</span>
</span></span><span class=line><span class=cl>  <span class=n>PUBLIC_HEADER</span>
</span></span><span class=line><span class=cl>    <span class=n>DESTINATION</span> <span class=err>$</span><span class=p>{</span><span class=n>INSTALL_INCLUDEDIR</span><span class=p>}</span><span class=o>/</span><span class=n>message</span>
</span></span><span class=line><span class=cl>    <span class=n>COMPONENT</span> <span class=n>dev</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>使用 <code>install()</code> 命令来定义如何安装 <code>message-shared</code> 和 <code>hello-world_wDSO</code> 这两个目标。</p><ol><li><strong><code>TARGETS message-shared hello-world_wDSO</code></strong>: 这指定了要安装的目标。这里有两个目标：<code>message-shared</code> 和 <code>hello-world_wDSO</code>。</li><li><strong><code>ARCHIVE DESTINATION ${INSTALL_LIBDIR} COMPONENT lib</code></strong>: 这部分指定静态库（<code>.a</code> 或 <code>.lib</code> 文件）的安装位置。它们将被安装到由 <code>${INSTALL_LIBDIR}</code> 变量定义的目录中，并标记为 <code>lib</code> 组件的一部分。通常，<code>${INSTALL_LIBDIR}</code> 会指向类似 <code>lib</code> 或 <code>lib64</code> 的目录。</li><li><strong><code>RUNTIME DESTINATION ${INSTALL_BINDIR} COMPONENT bin</code></strong>: 这定义了可执行文件（<code>hello-world_wDSO</code>）的安装位置。它们将被安装到由 <code>${INSTALL_BINDIR}</code> 变量指定的目录，通常是类似于 <code>bin</code> 的目录。这些文件被标记为 <code>bin</code> 组件的一部分。</li><li><strong><code>LIBRARY DESTINATION ${INSTALL_LIBDIR} COMPONENT lib</code></strong>: 这指定动态库（<code>.so</code>、<code>.dll</code> 或 <code>.dylib</code> 文件）的安装位置。就像静态库一样，它们将被安装到 <code>${INSTALL_LIBDIR}</code> 目录，并标记为 <code>lib</code> 组件的一部分。</li><li><strong><code>PUBLIC_HEADER DESTINATION ${INSTALL_INCLUDEDIR}/message COMPONENT dev</code></strong>: 这指定了公共头文件（如 <code>message.hpp</code>）的安装位置。这些文件将被安装到 <code>${INSTALL_INCLUDEDIR}/message</code> 目录，通常是类似于 <code>include/message</code> 的目录，作为 <code>dev</code> 组件的一部分。这使得其他开发者可以在他们自己的项目中轻松地找到并使用这些头文件。</li></ol></div></div></div><p><strong>src/message.h</strong></p><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>class</span> <span class=nc>Message</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>  <span class=n>Message</span><span class=p>(</span><span class=k>const</span> <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=o>&amp;</span><span class=n>m</span><span class=p>)</span> <span class=o>:</span> <span class=n>message_</span><span class=p>(</span><span class=n>m</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>friend</span> <span class=n>std</span><span class=o>::</span><span class=n>ostream</span> <span class=o>&amp;</span><span class=k>operator</span><span class=o>&lt;&lt;</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>ostream</span> <span class=o>&amp;</span><span class=n>os</span><span class=p>,</span> <span class=n>Message</span> <span class=o>&amp;</span><span class=n>obj</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>obj</span><span class=p>.</span><span class=n>PrintObject</span><span class=p>(</span><span class=n>os</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>  <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>message_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>std</span><span class=o>::</span><span class=n>ostream</span> <span class=o>&amp;</span><span class=n>PrintObject</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>ostream</span> <span class=o>&amp;</span><span class=n>os</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>GetUUID</span><span class=p>();</span></span></span></code></pre></td></tr></table></div></div><p><strong>src/message.cpp</strong></p><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;message.hpp&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;string&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#ifdef HAVE_UUID
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;uuid/uuid.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#endif
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=n>std</span><span class=o>::</span><span class=n>ostream</span> <span class=o>&amp;</span><span class=n>Message</span><span class=o>::</span><span class=n>PrintObject</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>ostream</span> <span class=o>&amp;</span><span class=n>os</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>os</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;This is my very nice message: &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>os</span> <span class=o>&lt;&lt;</span> <span class=n>message_</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>os</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;...and here is its UUID: &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>GetUUID</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>os</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#ifdef HAVE_UUID
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>GetUUID</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>uuid_t</span> <span class=n>uuid</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>uuid_generate</span><span class=p>(</span><span class=n>uuid</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kt>char</span> <span class=n>uuid_str</span><span class=p>[</span><span class=mi>37</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=n>uuid_unparse_lower</span><span class=p>(</span><span class=n>uuid</span><span class=p>,</span> <span class=n>uuid_str</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>uuid_clear</span><span class=p>(</span><span class=n>uuid</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>uuid_cxx</span><span class=p>(</span><span class=n>uuid_str</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>uuid_cxx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cp>#else
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>GetUUID</span><span class=p>()</span> <span class=p>{</span> <span class=k>return</span> <span class=s>&#34;Ooooops, no UUID for you!&#34;</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cp>#endif</span></span></span></code></pre></td></tr></table></div></div><p><strong>src/hello_world.cpp</strong></p><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cstdlib&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;message.hpp&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Message</span> <span class=n>say_hello</span><span class=p>(</span><span class=s>&#34;Hello, CMake World!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>say_hello</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>Message</span> <span class=n>say_goodbye</span><span class=p>(</span><span class=s>&#34;Goodbye, CMake World&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>say_goodbye</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>retu</span></span></span></code></pre></td></tr></table></div></div><p><strong>test/CMakeLists.txt</strong></p><div class=highlight id=id-6><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>add_test</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=n>NAME</span> <span class=n>test_shared</span>
</span></span><span class=line><span class=cl>  <span class=n>COMMAND</span> <span class=err>$</span><span class=o>&lt;</span><span class=nl>TARGET_FILE</span><span class=p>:</span><span class=n>hello</span><span class=o>-</span><span class=n>world_wDSO</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><strong>CMakeLists.txt</strong></p><div class=highlight id=id-7><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>cmake_minimum_required</span><span class=p>(</span><span class=n>VERSION</span> <span class=mf>3.6</span> <span class=n>FATAL_ERROR</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>project</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=n>example</span>
</span></span><span class=line><span class=cl>  <span class=n>LANGUAGES</span> <span class=n>CXX</span>
</span></span><span class=line><span class=cl>  <span class=n>VERSION</span> <span class=mf>1.0.0</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp># &lt;&lt;&lt; General set up &gt;&gt;&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>CMAKE_CXX_STANDARD</span> <span class=mi>11</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>CMAKE_CXX_EXTENSIONS</span> <span class=n>OFF</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>CMAKE_CXX_STANDARD_REQUIRED</span> <span class=n>ON</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>CMAKE_INSTALL_PREFIX</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_SOURCE_DIR</span><span class=p>}</span><span class=o>/</span><span class=n>output</span><span class=o>/</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=s>&#34;Project will be installed to ${CMAKE_INSTALL_PREFIX}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>NOT</span> <span class=n>CMAKE_BUILD_TYPE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>set</span><span class=p>(</span><span class=n>CMAKE_BUILD_TYPE</span> <span class=n>Release</span> <span class=n>CACHE</span> <span class=n>STRING</span> <span class=s>&#34;Build type&#34;</span> <span class=n>FORCE</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>endif</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=s>&#34;Build type set to ${CMAKE_BUILD_TYPE}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>include</span><span class=p>(</span><span class=n>GNUInstallDirs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>CMAKE_ARCHIVE_OUTPUT_DIRECTORY</span> <span class=err>$</span><span class=p>{</span><span class=n>PROJECT_BINARY_DIR</span><span class=p>}</span><span class=o>/</span><span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_LIBDIR</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>CMAKE_LIBRARY_OUTPUT_DIRECTORY</span> <span class=err>$</span><span class=p>{</span><span class=n>PROJECT_BINARY_DIR</span><span class=p>}</span><span class=o>/</span><span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_LIBDIR</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>CMAKE_RUNTIME_OUTPUT_DIRECTORY</span> <span class=err>$</span><span class=p>{</span><span class=n>PROJECT_BINARY_DIR</span><span class=p>}</span><span class=o>/</span><span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_BINDIR</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp># Offer the user the choice of overriding the installation directories
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>set</span><span class=p>(</span><span class=n>INSTALL_LIBDIR</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_LIBDIR</span><span class=p>}</span> <span class=n>CACHE</span> <span class=n>PATH</span> <span class=s>&#34;Installation directory for libraries&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>INSTALL_BINDIR</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_BINDIR</span><span class=p>}</span> <span class=n>CACHE</span> <span class=n>PATH</span> <span class=s>&#34;Installation directory for executables&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>INSTALL_INCLUDEDIR</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_INCLUDEDIR</span><span class=p>}</span> <span class=n>CACHE</span> <span class=n>PATH</span> <span class=s>&#34;Installation directory for header files&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>WIN32</span> <span class=n>AND</span> <span class=n>NOT</span> <span class=n>CYGWIN</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>set</span><span class=p>(</span><span class=n>DEF_INSTALL_CMAKEDIR</span> <span class=n>CMake</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=n>set</span><span class=p>(</span><span class=n>DEF_INSTALL_CMAKEDIR</span> <span class=n>share</span><span class=o>/</span><span class=n>cmake</span><span class=o>/</span><span class=err>$</span><span class=p>{</span><span class=n>PROJECT_NAME</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>endif</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>INSTALL_CMAKEDIR</span> <span class=err>$</span><span class=p>{</span><span class=n>DEF_INSTALL_CMAKEDIR</span><span class=p>}</span> <span class=n>CACHE</span> <span class=n>PATH</span> <span class=s>&#34;Installation directory for CMake files&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp># Report to user
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>foreach</span><span class=p>(</span><span class=n>p</span> <span class=n>LIB</span> <span class=n>BIN</span> <span class=n>INCLUDE</span> <span class=n>CMAKE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>file</span><span class=p>(</span><span class=n>TO_NATIVE_PATH</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_PREFIX</span><span class=p>}</span><span class=o>/</span><span class=err>$</span><span class=p>{</span><span class=n>INSTALL_</span><span class=err>$</span><span class=p>{</span><span class=n>p</span><span class=p>}</span><span class=n>DIR</span><span class=p>}</span> <span class=n>_path</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>message</span><span class=p>(</span><span class=n>STATUS</span> <span class=s>&#34;Installing ${p} components to ${_path}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>unset</span><span class=p>(</span><span class=n>_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>endforeach</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>add_subdirectory</span><span class=p>(</span><span class=n>src</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>enable_testing</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>add_subdirectory</span><span class=p>(</span><span class=n>test</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class="details admonition quote"><div class="details-summary admonition-title"><i class="icon fa-solid fa-quote-right fa-fw" aria-hidden=true></i>引用<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><div class=highlight id=id-21><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>INSTALL_LIBDIR</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_LIBDIR</span><span class=p>}</span> <span class=n>CACHE</span> <span class=n>PATH</span> <span class=s>&#34;Installation directory for libraries&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>INSTALL_BINDIR</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_BINDIR</span><span class=p>}</span> <span class=n>CACHE</span> <span class=n>PATH</span> <span class=s>&#34;Installation directory for executables&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>INSTALL_INCLUDEDIR</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_INCLUDEDIR</span><span class=p>}</span> <span class=n>CACHE</span> <span class=n>PATH</span> <span class=s>&#34;Installation directory for header files&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>WIN32</span> <span class=n>AND</span> <span class=n>NOT</span> <span class=n>CYGWIN</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>set</span><span class=p>(</span><span class=n>DEF_INSTALL_CMAKEDIR</span> <span class=n>CMake</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=n>set</span><span class=p>(</span><span class=n>DEF_INSTALL_CMAKEDIR</span> <span class=n>share</span><span class=o>/</span><span class=n>cmake</span><span class=o>/</span><span class=err>$</span><span class=p>{</span><span class=n>PROJECT_NAME</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>endif</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>INSTALL_CMAKEDIR</span> <span class=err>$</span><span class=p>{</span><span class=n>DEF_INSTALL_CMAKEDIR</span><span class=p>}</span> <span class=n>CACHE</span> <span class=n>PATH</span> <span class=s>&#34;Installation directory for CMake files&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><ol><li><strong><code>set(INSTALL_LIBDIR ${CMAKE_INSTALL_LIBDIR} CACHE PATH "Installation directory for libraries")</code></strong>: 这行设置了一个名为 <code>INSTALL_LIBDIR</code> 的变量，它定义了库文件（静态库和动态库）的安装目录。这个目录默认为 <code>CMAKE_INSTALL_LIBDIR</code> 的值，通常指向系统默认的库安装路径（如 <code>lib</code> 或 <code>lib64</code>）。</li><li><strong><code>set(INSTALL_BINDIR ${CMAKE_INSTALL_BINDIR} CACHE PATH "Installation directory for executables")</code></strong>: 这行设置了一个名为 <code>INSTALL_BINDIR</code> 的变量，用于定义可执行文件的安装目录。这个目录默认为 <code>CMAKE_INSTALL_BINDIR</code> 的值，通常是系统默认的可执行文件安装路径（如 <code>bin</code>）。</li><li><strong><code>set(INSTALL_INCLUDEDIR ${CMAKE_INSTALL_INCLUDEDIR} CACHE PATH "Installation directory for header files")</code></strong>: 这行设置了一个名为 <code>INSTALL_INCLUDEDIR</code> 的变量，它定义了头文件的安装目录。这个目录默认为 <code>CMAKE_INSTALL_INCLUDEDIR</code> 的值，通常指向系统默认的头文件安装路径（如 <code>include</code>）。</li><li><strong><code>if(WIN32 AND NOT CYGWIN)</code></strong> 和 <strong><code>else()</code></strong>: 这两行代码是一个条件语句，用于区分 Windows 系统和其他系统（如 Linux 或 macOS）。<ul><li>在 Windows 系统上，如果不是在 Cygwin 环境下，<code>DEF_INSTALL_CMAKEDIR</code> 被设置为 <code>CMake</code>。这意味着 CMake 配置文件将安装到一个名为 <code>CMake</code> 的目录中。</li><li>在其他系统上，<code>DEF_INSTALL_CMAKEDIR</code> 被设置为 <code>share/cmake/${PROJECT_NAME}</code>。这里 <code>${PROJECT_NAME}</code> 是项目名称的变量，这个路径通常用于存放项目相关的 CMake 配置文件。</li></ul></li><li><strong><code>set(INSTALL_CMAKEDIR ${DEF_INSTALL_CMAKEDIR} CACHE PATH "Installation directory for CMake files")</code></strong>: 这行设置了一个名为 <code>INSTALL_CMAKEDIR</code> 的变量，它定义了 CMake 配置文件的安装目录，值为前面根据平台条件设置的 <code>DEF_INSTALL_CMAKEDIR</code>。</li></ol><p>这些设置的目的是确保在不同的操作系统和环境中，项目的库文件、可执行文件、头文件和 CMake 文件都能被安装到合适的位置。通过使用这些变量，CMake 脚本可以灵活地适应不同系统的目录结构和用户的自定义安装路径。这种做法提高了项目的可移植性和灵活性，使得在不同环境下的构建和安装过程更加一致和可预测。此外，使用缓存变量（<code>CACHE PATH</code>）允许用户在配置（CMake 的 configure 阶段）时覆盖这些路径，进一步增加了灵活性。</p></div></div></div><h2 id=四结果展示>四、结果展示</h2><div class=highlight id=id-8><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mkdir build <span class=p>&amp;</span> <span class=nb>cd</span> build
</span></span><span class=line><span class=cl>cmake ..
</span></span><span class=line><span class=cl>cmake --build . --target install</span></span></code></pre></td></tr></table></div></div><p>GNU/Linux构建目录的内容如下:</p><div class=highlight id=id-9><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>├── build
</span></span><span class=line><span class=cl>    ├── bin
</span></span><span class=line><span class=cl>    │   └── hello-world_wDSO
</span></span><span class=line><span class=cl>    ├── CMakeCache.txt
</span></span><span class=line><span class=cl>    ├── cmake_install.cmake
</span></span><span class=line><span class=cl>    ├── CTestTestfile.cmake
</span></span><span class=line><span class=cl>    ├── install_manifest.txt
</span></span><span class=line><span class=cl>    ├── lib
</span></span><span class=line><span class=cl>    │   ├── libmessage.so -&gt; libmessage.so.1
</span></span><span class=line><span class=cl>    │   └── libmessage.so.1
</span></span><span class=line><span class=cl>    ├── Makefile
</span></span><span class=line><span class=cl>    ├── src
</span></span><span class=line><span class=cl>    ├── <span class=nb>test</span>
</span></span><span class=line><span class=cl>    └── Testing</span></span></code></pre></td></tr></table></div></div><p>在安装位置，可以找到如下的目录结构:</p><div class=highlight id=id-10><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>├── bin
</span></span><span class=line><span class=cl>│   └── hello-world_wDSO
</span></span><span class=line><span class=cl>├── include
</span></span><span class=line><span class=cl>│   └── message
</span></span><span class=line><span class=cl>│       └── message.hpp
</span></span><span class=line><span class=cl>└── lib
</span></span><span class=line><span class=cl>    ├── libmessage.so -&gt; libmessage.so.1
</span></span><span class=line><span class=cl>    └── libmessage.so.1</span></span></code></pre></td></tr></table></div></div><h2 id=五补充内容>五、补充内容</h2><p><strong>安装到标准位置</strong></p><p>对于项目的安装来说，什么是好的布局呢？如果只有自己使用该项目，那就无所谓好或坏的布局。然而，一旦向外部发布产品，和他人共用该项目，就应该在安装项目时提供一个合理的布局。</p><p>我们可以遵循一些标准，CMake可以帮助我们做到这一点。实际上，<code>GNUInstallDirs.cmake</code>模块所做的就是定义这样一组变量，这些变量是安装不同类型文件的子目录的名称。</p><ul><li><strong><code>CMAKE_INSTALL_BINDIR</code></strong>：用于定义用户可执行文件所在的子目录，即所选安装目录下的bin目录。</li><li><strong><code>CMAKE_INSTALL_LIBDIR</code></strong>：将扩展到目标代码库(即静态库和动态库)所在的子目录。在64位系统上，它是<code>lib64</code>，而在32位系统上，它只是<code>lib</code>。</li><li><strong><code>CMAKE_INSTALL_INCLUDEDIR</code></strong>：使用这个变量为头文件获取正确的子目录，该变量为<code>include</code>。</li></ul><p>用户可能希望覆盖这些选项。允许在主CMakeLists.txt文件中使用以下方式覆盖选项:</p><div class=highlight id=id-11><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp># Offer the user the choice
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>of</span> <span class=n>overriding</span> <span class=n>the</span> <span class=n>installation</span> <span class=n>directories</span>
</span></span><span class=line><span class=cl><span class=nf>set</span><span class=p>(</span><span class=n>INSTALL_LIBDIR</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_LIBDIR</span><span class=p>}</span> <span class=n>CACHE</span> <span class=n>PATH</span>
</span></span><span class=line><span class=cl><span class=s>&#34;Installation directory for libraries&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>INSTALL_BINDIR</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_BINDIR</span><span class=p>}</span> <span class=n>CACHE</span> <span class=n>PATH</span>
</span></span><span class=line><span class=cl><span class=s>&#34;Installation directory for executables&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>set</span><span class=p>(</span><span class=n>INSTALL_INCLUDEDIR</span> <span class=err>$</span><span class=p>{</span><span class=n>CMAKE_INSTALL_INCLUDEDIR</span><span class=p>}</span> <span class=n>CACHE</span>
</span></span><span class=line><span class=cl><span class=n>PATH</span> <span class=s>&#34;Installation directory for header files&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>重新定义了在项目中使用的<code>INSTALL_BINDIR</code>、<code>INSTALL_LIBDIR</code>和<code>INSTALL_INCLUDEDIR</code>变量。</p><p>当只要求安装库：</p><div class=highlight id=id-12><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=err>$</span> <span class=n>cmake</span> <span class=o>-</span><span class=n>D</span> <span class=n>COMPONENT</span><span class=o>=</span><span class=n>lib</span> <span class=o>-</span><span class=n>P</span> <span class=n>cmake_install</span><span class=p>.</span><span class=n>cmake</span></span></span></code></pre></td></tr></table></div></div><p>正确设置<code>RPATH</code>可能相当麻烦，但这对于用户来说无法避免。默认情况下，<code>CMake</code>设置可执行程序的<code>RPATH</code>，假设它们将从构建树运行。但是，安装之后<code>RPATH</code>被清除，当用户想要运行<code>hello-world_wDSO</code>时，就会出现问题。使用Linux上的<code>ldd</code>工具，我们可以检查构建树中的<code>hello-world_wDSO</code>可执行文件，运行<code>ldd hello-world_wDSO</code>将得到以下结果:</p><div class=highlight id=id-13><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>libmessage</span><span class=p>.</span><span class=n>so</span><span class=mf>.1</span> <span class=o>=&gt;</span> <span class=o>/</span><span class=n>home</span><span class=o>/</span><span class=n>jiangli</span><span class=o>/</span><span class=n>repo</span><span class=o>/</span><span class=n>tutorials</span><span class=o>/</span><span class=n>cmake</span><span class=o>-</span><span class=n>tutorial</span><span class=o>/</span><span class=n>chapter9</span><span class=o>/</span><span class=mo>01</span><span class=o>/</span><span class=n>build</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>libmessage</span><span class=p>.</span><span class=n>so</span><span class=mf>.1</span> <span class=p>(</span><span class=mh>0x00007f43a4df7000</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>在安装目录中运行ldd hello-world_wDSO将得到以下结果:</p><div class=highlight id=id-14><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>libmessage</span><span class=p>.</span><span class=n>so</span><span class=mf>.1</span> <span class=o>=&gt;</span> <span class=n>Not</span> <span class=n>found</span></span></span></code></pre></td></tr></table></div></div><p>这显然是不行的。但是，总是硬编码<code>RPATH</code>来指向构建树或安装目录也是错误的：这两个位置中的任何一个都可能被删除，从而导致可执行文件的损坏。给出的解决方案为构建树和安装目录中的可执行文件设置了不同的<code>RPATH</code>，因此它总是指向“有意义”的位置；也就是说，尽可能接近可执行文件。在构建树中运行<code>ldd</code>显示相同的输出:</p><div class=highlight id=id-15><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>libmessage</span><span class=p>.</span><span class=n>so</span><span class=mf>.1</span> <span class=o>=&gt;</span> <span class=o>/</span><span class=n>home</span><span class=o>/</span><span class=n>jiangli</span><span class=o>/</span><span class=n>repo</span><span class=o>/</span><span class=n>tutorials</span><span class=o>/</span><span class=n>cmake</span><span class=o>-</span><span class=n>tutorial</span><span class=o>/</span><span class=n>chapter9</span><span class=o>/</span><span class=mo>01</span><span class=o>/</span><span class=n>output</span><span class=o>/</span><span class=n>bin</span><span class=o>/</span><span class=p>.</span><span class=o>/</span><span class=p>..</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>libmessage</span><span class=p>.</span><span class=n>so</span><span class=mf>.1</span> <span class=p>(</span><span class=mh>0x00007f0ebfc4a000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>libmessage</span><span class=p>.</span><span class=n>so</span><span class=mf>.1</span> <span class=o>=&gt;</span> <span class=o>/</span><span class=n>home</span><span class=o>/</span><span class=n>jiangli</span><span class=o>/</span><span class=n>repo</span><span class=o>/</span><span class=n>tutorials</span><span class=o>/</span><span class=n>cmake</span><span class=o>-</span><span class=n>tutorial</span><span class=o>/</span><span class=n>chapter9</span><span class=o>/</span><span class=mo>01</span><span class=o>/</span><span class=n>build</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>libmessage</span><span class=p>.</span><span class=n>so</span><span class=mf>.1</span> <span class=p>(</span><span class=mh>0x00007f43a4df7000</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>使用了带有目标参数的<code>CMake</code>安装命令，该命令还有另外4个参数:</p><ul><li><code>FILES</code>和<code>PROGRAMS</code>，分别用于安装文件或程序。安装后，并设置安装文件适当的权限。对于文件，对所有者具有读和写权限，对组以及其他用户和组具有读权限。对于程序，将授予执行权限。注意，<code>PROGRAMS</code>要与非构建目标的可执行程序一起使用。</li><li><code>DIRECTORY</code>，用于安装目录。当只给出一个目录名时，它通常被理解为相对于当前源目录。可以对目录的安装粒度进行控制。</li><li><code>SCRIPT</code>，可以使用它在CMake脚本中定义自定义安装规则。</li><li><code>EXPORT</code>，该参数用于导出目标。</li></ul></div><div class=post-reward><div class=comment>Buy me a coffee~</div><input type=checkbox class=reward-input name=reward id=fi-reward hidden>
<label class=reward-button for=fi-reward>赞赏</label><div class=reward-ways data-mode=fixed><div><img loading=lazy src=/images/alipay.png srcset="/images/alipay.png, /images/alipay.png 1.5x, /images/alipay.png 2x" sizes=auto data-title="Jian YE 支付宝" data-alt="Jian YE 支付宝" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span data-animation>支付宝</span></div><div><img loading=lazy src=/images/wechatpay.png srcset="/images/wechatpay.png, /images/wechatpay.png 1.5x, /images/wechatpay.png 2x" sizes=auto data-title="Jian YE 微信" data-alt="Jian YE 微信" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span data-animation>微信</span></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2024-02-02 10:39:29">更新于 2024-02-02&nbsp;<a class=git-hash href=https://github.com/jianye0428/JianBlog/commit/585194d72e6303e0025a823f78283eef72c161ae rel="external nofollow noopener noreferrer" target=_blank title="commit by yejian(18817571704@163.com) 585194d72e6303e0025a823f78283eef72c161ae: feat: add cmake note 41 ~ 45"><i class="fa-solid fa-hashtag fa-fw" aria-hidden=true></i>585194d</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/posts/cmake_note_41/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span><span><a href=https://github.com/jianye0428/JianBlog/edit/docs/content/posts/C++/CMAKE/Cmake_Learning_Notes/Cmake_Note_41/index.md title=编辑此页 target=_blank rel="external nofollow noopener noreferrer" class=link-to-edit>编辑此页</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://jianye0428.github.io/posts/cmake_note_41/ data-title="CMake 笔记 | [41] 安装项目" data-hashtags=CMake><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://jianye0428.github.io/posts/cmake_note_41/ data-hashtag=CMake><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Linkedin" data-sharer=linkedin data-url=https://jianye0428.github.io/posts/cmake_note_41/><i class="fa-brands fa-linkedin fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://jianye0428.github.io/posts/cmake_note_41/ data-title="CMake 笔记 | [41] 安装项目"><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 百度" data-sharer=baidu data-url=https://jianye0428.github.io/posts/cmake_note_41/ data-title="CMake 笔记 | [41] 安装项目"><i data-svg-src=/lib/simple-icons/icons/baidu.min.svg aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/cmake/ class=post-tag>CMake</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/cmake_note_40/ class=post-nav-item rel=prev title="CMake 笔记 | [40] 超级构建模式"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>CMake 笔记 | [40] 超级构建模式</a>
<a href=/posts/cmake_note_42/ class=post-nav-item rel=next title="CMake 笔记 | [42] 导出头文件">CMake 笔记 | [42] 导出头文件<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line powered">由 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.123.6">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.18"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2018 - 2024</span><span class=author itemprop=copyrightHolder>
<a href=https://github.com/jianye0428 target=_blank rel="external nofollow noopener noreferrer">Jian YE</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics order-first"><span class=site-time title=网站运行中……><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i><span class="ms-1 d-none">博客已运行</span><span class="run-times ms-1">网站运行中……</span></span></div><div class="footer-line visitor"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><a href=https://github.com/jianye0428/JianBlog title="在 GitHub 上查看程式碼，訂閱請點 Watch" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0;--bg-progress:#000;--bg-progress-dark:#fff></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/blue/pace-theme-minimal.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script src=/lib/instant-page/instantpage.min.js async defer type=module></script><script src=/lib/twemoji/twemoji.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=/lib/cell-watermark/watermark.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:50},comment:{enable:!1},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{algoliaAppID:"MTJNHU0JVB",algoliaIndex:"index",algoliaSearchKey:"5486225134d99f43826da401ee9bad57",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"},siteTime:"2018-05-28T20:01:01+08:00",twemoji:!0,watermark:{appendto:".wrapper>main",colspacing:30,content:'<img style="height: 0.85rem;" src="/images/favicon/jian_icon.png" alt="logo" /> jianye',enable:!0,fontfamily:"MMT_LRH,沐目体",fontsize:1.1,height:20,opacity:.0125,rotate:15,rowspacing:60,width:150}}</script><script src=/js/theme.min.js defer></script><script src=/js/custom.min.js defer></script></body></html>